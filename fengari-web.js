!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.fengari=t():e.fengari=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(a){if(r[a])return r[a].exports;var n=r[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,a){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=31)}([function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=r(5),u=n.LUAI_MAXSTACK,s=void 0;s="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(e){for(var t=0,r=e.length,a=new Uint8Array(r);r>t;)a[t]=e[t++];return a};var o=void 0;if("function"==typeof(new Uint8Array).indexOf)o=function(e,t,r){return e.indexOf(t,r)};else{var l=[].indexOf;if(0!==l.call(new Uint8Array(1),0))throw Error("missing .indexOf");o=function(e,t,r){return l.call(e,t,r)}}var i=void 0;i="function"==typeof Uint8Array.of?Uint8Array.of.bind(Uint8Array):function(){return s(arguments)};var c=function(e){return e instanceof Uint8Array},_=function(e,t){if(e!==t){var r=e.length;if(r!==t.length)return!1;for(var a=0;a<r;a++)if(e[a]!==t[a])return!1}return!0},f=function(e,t,r){if(!c(e))throw new TypeError("to_jsstring expects a Uint8Array");r=void 0===r?e.length:Math.min(e.length,r);for(var a="",n=void 0!==t?t:0;n<r;){var u=e[n++];if(u<128)a+=String.fromCharCode(u);else{if(u<194||u>244)throw RangeError("cannot convert invalid utf8 to javascript string");if(u<=223){if(n>=r)throw RangeError("cannot convert invalid utf8 to javascript string");var s=e[n++];if(128!=(192&s))throw RangeError("cannot convert invalid utf8 to javascript string");a+=String.fromCharCode(((31&u)<<6)+(63&s))}else if(u<=239){if(n+1>=r)throw RangeError("cannot convert invalid utf8 to javascript string");var o=e[n++];if(128!=(192&o))throw RangeError("cannot convert invalid utf8 to javascript string");var l=e[n++];if(128!=(192&l))throw RangeError("cannot convert invalid utf8 to javascript string");var i=((15&u)<<12)+((63&o)<<6)+(63&l);if(i<=65535)a+=String.fromCharCode(i);else{i-=65536;var _=55296+(i>>10),f=i%1024+56320;a+=String.fromCharCode(_,f)}}else{if(n+2>=r)throw RangeError("cannot convert invalid utf8 to javascript string");var p=e[n++];if(128!=(192&p))throw RangeError("cannot convert invalid utf8 to javascript string");var v=e[n++];if(128!=(192&v))throw RangeError("cannot convert invalid utf8 to javascript string");var d=e[n++];if(128!=(192&d))throw RangeError("cannot convert invalid utf8 to javascript string");var h=((7&u)<<18)+((63&p)<<12)+((63&v)<<6)+(63&d);h-=65536;var L=55296+(h>>10),A=h%1024+56320;a+=String.fromCharCode(L,A)}}}return a},p=";,/?:@&=+$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789,-_.!~*'()#".split("").reduce(function(e,t){return e[t.charCodeAt(0)]=!0,e},{}),v=function(e){if(!c(e))throw new TypeError("to_uristring expects a Uint8Array");for(var t="",r=0;r<e.length;r++){var a=e[r];p[a]?t+=String.fromCharCode(a):t+="%"+(a<16?"0":"")+a.toString(16)}return t},d={},h=function(e,t){if("string"!=typeof e)throw new TypeError("to_luastring expects a javascript string");if(t){var r=d[e];if(c(r))return r}for(var a=e.length,n=Array(a),u=0,o=0;o<a;++o){var l=e.charCodeAt(o);if(l<=127)n[u++]=l;else if(l<=2047)n[u++]=192|l>>6,n[u++]=128|63&l;else{if(l>=55296&&l<=56319&&o+1<a){var i=e.charCodeAt(o+1);i>=56320&&i<=57343&&(o++,l=1024*(l-55296)+i+9216)}l<=65535?(n[u++]=224|l>>12,n[u++]=128|l>>6&63,n[u++]=128|63&l):(n[u++]=240|l>>18,n[u++]=128|l>>12&63,n[u++]=128|l>>6&63,n[u++]=128|63&l)}}return n=s(n),t&&(d[e]=n),n},L=function(e){if(!c(e))throw new TypeError("expects an array of bytes");return e},A=h("Lua"),g={LUA_OK:0,LUA_YIELD:1,LUA_ERRRUN:2,LUA_ERRSYNTAX:3,LUA_ERRMEM:4,LUA_ERRGCMM:5,LUA_ERRERR:6},b={LUA_TNONE:-1,LUA_TNIL:0,LUA_TBOOLEAN:1,LUA_TLIGHTUSERDATA:2,LUA_TNUMBER:3,LUA_TSTRING:4,LUA_TTABLE:5,LUA_TFUNCTION:6,LUA_TUSERDATA:7,LUA_TTHREAD:8,LUA_NUMTAGS:9};b.LUA_TSHRSTR=0|b.LUA_TSTRING,b.LUA_TLNGSTR=16|b.LUA_TSTRING,b.LUA_TNUMFLT=0|b.LUA_TNUMBER,b.LUA_TNUMINT=16|b.LUA_TNUMBER,b.LUA_TLCL=0|b.LUA_TFUNCTION,b.LUA_TLCF=16|b.LUA_TFUNCTION,b.LUA_TCCL=32|b.LUA_TFUNCTION;var T=-u-1e3,x=function(e){return T-e},k=function e(){a(this,e),this.event=NaN,this.name=null,this.namewhat=null,this.what=null,this.source=null,this.currentline=NaN,this.linedefined=NaN,this.lastlinedefined=NaN,this.nups=NaN,this.nparams=NaN,this.isvararg=NaN,this.istailcall=NaN,this.short_src=null,this.i_ci=null};e.exports.LUA_PATH_SEP=";";e.exports.LUA_PATH_MARK="?";e.exports.LUA_EXEC_DIR="!";e.exports.LUA_VDIR="5.3";e.exports.LUA_DIRSEP="/";e.exports.LUA_LDIR="./lua/5.3/";e.exports.LUA_CDIR="./lua/5.3/";var O=h("./lua/5.3/?.lua;./lua/5.3/?/init.lua;./lua/5.3/?.lua;./lua/5.3/?/init.lua;./?.lua;./?/init.lua");e.exports.LUA_PATH_DEFAULT=O;var m=h("./lua/5.3/?.js;./lua/5.3/loadall.js;./?.js");e.exports.LUA_CPATH_DEFAULT=m,e.exports.LUA_AUTHORS="R. Ierusalimschy, L. H. de Figueiredo, W. Celes",e.exports.LUA_COPYRIGHT="Lua 5.3.4  Copyright (C) 1994-2017 Lua.org, PUC-Rio",e.exports.LUA_HOOKCALL=0,e.exports.LUA_HOOKCOUNT=3,e.exports.LUA_HOOKLINE=2,e.exports.LUA_HOOKRET=1,e.exports.LUA_HOOKTAILCALL=4,e.exports.LUA_INITVARVERSION="LUA_INIT_5_3",e.exports.LUA_INIT_VAR="LUA_INIT",e.exports.LUA_MASKCALL=1,e.exports.LUA_MASKCOUNT=8,e.exports.LUA_MASKLINE=4,e.exports.LUA_MASKRET=2,e.exports.LUA_MINSTACK=20,e.exports.LUA_MULTRET=-1,e.exports.LUA_OPADD=0,e.exports.LUA_OPBAND=7,e.exports.LUA_OPBNOT=13,e.exports.LUA_OPBOR=8,e.exports.LUA_OPBXOR=9,e.exports.LUA_OPDIV=5,e.exports.LUA_OPEQ=0,e.exports.LUA_OPIDIV=6,e.exports.LUA_OPLE=2,e.exports.LUA_OPLT=1,e.exports.LUA_OPMOD=3,e.exports.LUA_OPMUL=2,e.exports.LUA_OPPOW=4,e.exports.LUA_OPSHL=10,e.exports.LUA_OPSHR=11,e.exports.LUA_OPSUB=1,e.exports.LUA_OPUNM=12,e.exports.LUA_REGISTRYINDEX=T,e.exports.LUA_RELEASE="Lua 5.3.4",e.exports.LUA_RIDX_GLOBALS=2,e.exports.LUA_RIDX_LAST=2,e.exports.LUA_RIDX_MAINTHREAD=1,e.exports.LUA_SIGNATURE=A,e.exports.LUA_VERSION="Lua 5.3",e.exports.LUA_VERSION_MAJOR="5",e.exports.LUA_VERSION_MINOR="3",e.exports.LUA_VERSION_NUM=503,e.exports.LUA_VERSION_RELEASE="4",e.exports.LUA_VERSUFFIX="_5_3",e.exports.constant_types=b,e.exports.lua_Debug=k,e.exports.lua_upvalueindex=x,e.exports.thread_status=g,e.exports.is_luastring=c,e.exports.luastring_eq=_,e.exports.luastring_from=s,e.exports.luastring_indexOf=o,e.exports.luastring_of=i,e.exports.to_jsstring=f,e.exports.to_luastring=h,e.exports.to_uristring=v,e.exports.from_userstring=L},function(e,t,r){"use strict";var a=r(0),n=r(17),u=r(10),s=r(7),o=r(11);e.exports.LUA_AUTHORS=a.LUA_AUTHORS,e.exports.LUA_COPYRIGHT=a.LUA_COPYRIGHT,e.exports.LUA_ERRERR=a.thread_status.LUA_ERRERR,e.exports.LUA_ERRGCMM=a.thread_status.LUA_ERRGCMM,e.exports.LUA_ERRMEM=a.thread_status.LUA_ERRMEM,e.exports.LUA_ERRRUN=a.thread_status.LUA_ERRRUN,e.exports.LUA_ERRSYNTAX=a.thread_status.LUA_ERRSYNTAX,e.exports.LUA_HOOKCALL=a.LUA_HOOKCALL,e.exports.LUA_HOOKCOUNT=a.LUA_HOOKCOUNT,e.exports.LUA_HOOKLINE=a.LUA_HOOKLINE,e.exports.LUA_HOOKRET=a.LUA_HOOKRET,e.exports.LUA_HOOKTAILCALL=a.LUA_HOOKTAILCALL,e.exports.LUA_INITVARVERSION=a.LUA_INITVARVERSION,e.exports.LUA_INIT_VAR=a.LUA_INIT_VAR,e.exports.LUA_MASKCALL=a.LUA_MASKCALL,e.exports.LUA_MASKCOUNT=a.LUA_MASKCOUNT,e.exports.LUA_MASKLINE=a.LUA_MASKLINE,e.exports.LUA_MASKRET=a.LUA_MASKRET,e.exports.LUA_MINSTACK=a.LUA_MINSTACK,e.exports.LUA_MULTRET=a.LUA_MULTRET,e.exports.LUA_NUMTAGS=a.constant_types.LUA_NUMTAGS,e.exports.LUA_OK=a.thread_status.LUA_OK,e.exports.LUA_OPADD=a.LUA_OPADD,e.exports.LUA_OPBAND=a.LUA_OPBAND,e.exports.LUA_OPBNOT=a.LUA_OPBNOT,e.exports.LUA_OPBOR=a.LUA_OPBOR,e.exports.LUA_OPBXOR=a.LUA_OPBXOR,e.exports.LUA_OPDIV=a.LUA_OPDIV,e.exports.LUA_OPEQ=a.LUA_OPEQ,e.exports.LUA_OPIDIV=a.LUA_OPIDIV,e.exports.LUA_OPLE=a.LUA_OPLE,e.exports.LUA_OPLT=a.LUA_OPLT,e.exports.LUA_OPMOD=a.LUA_OPMOD,e.exports.LUA_OPMUL=a.LUA_OPMUL,e.exports.LUA_OPPOW=a.LUA_OPPOW,e.exports.LUA_OPSHL=a.LUA_OPSHL,e.exports.LUA_OPSHR=a.LUA_OPSHR,e.exports.LUA_OPSUB=a.LUA_OPSUB,e.exports.LUA_OPUNM=a.LUA_OPUNM,e.exports.LUA_REGISTRYINDEX=a.LUA_REGISTRYINDEX,e.exports.LUA_RELEASE=a.LUA_RELEASE,e.exports.LUA_RIDX_GLOBALS=a.LUA_RIDX_GLOBALS,e.exports.LUA_RIDX_LAST=a.LUA_RIDX_LAST,e.exports.LUA_RIDX_MAINTHREAD=a.LUA_RIDX_MAINTHREAD,e.exports.LUA_SIGNATURE=a.LUA_SIGNATURE,e.exports.LUA_TNONE=a.constant_types.LUA_TNONE,e.exports.LUA_TNIL=a.constant_types.LUA_TNIL,e.exports.LUA_TBOOLEAN=a.constant_types.LUA_TBOOLEAN,e.exports.LUA_TLIGHTUSERDATA=a.constant_types.LUA_TLIGHTUSERDATA,e.exports.LUA_TNUMBER=a.constant_types.LUA_TNUMBER,e.exports.LUA_TSTRING=a.constant_types.LUA_TSTRING,e.exports.LUA_TTABLE=a.constant_types.LUA_TTABLE,e.exports.LUA_TFUNCTION=a.constant_types.LUA_TFUNCTION,e.exports.LUA_TUSERDATA=a.constant_types.LUA_TUSERDATA,e.exports.LUA_TTHREAD=a.constant_types.LUA_TTHREAD,e.exports.LUA_VERSION=a.LUA_VERSION,e.exports.LUA_VERSION_MAJOR=a.LUA_VERSION_MAJOR,e.exports.LUA_VERSION_MINOR=a.LUA_VERSION_MINOR,e.exports.LUA_VERSION_NUM=a.LUA_VERSION_NUM,e.exports.LUA_VERSION_RELEASE=a.LUA_VERSION_RELEASE,e.exports.LUA_VERSUFFIX=a.LUA_VERSUFFIX,e.exports.LUA_YIELD=a.thread_status.LUA_YIELD,e.exports.lua_Debug=a.lua_Debug,e.exports.lua_upvalueindex=a.lua_upvalueindex,e.exports.LUA_CDIR=a.LUA_CDIR,e.exports.LUA_CPATH_DEFAULT=a.LUA_CPATH_DEFAULT,e.exports.LUA_EXEC_DIR=a.LUA_EXEC_DIR,e.exports.LUA_LDIR=a.LUA_LDIR,e.exports.LUA_PATH_DEFAULT=a.LUA_PATH_DEFAULT,e.exports.LUA_PATH_MARK=a.LUA_PATH_MARK,e.exports.LUA_PATH_SEP=a.LUA_PATH_SEP,e.exports.LUA_ROOT=a.LUA_ROOT,e.exports.LUA_SHRDIR=a.LUA_SHRDIR,e.exports.LUA_VDIR=a.LUA_VDIR,e.exports.LUA_DIRSEP=a.LUA_DIRSEP,e.exports.lua_absindex=n.lua_absindex,e.exports.lua_arith=n.lua_arith,e.exports.lua_atpanic=n.lua_atpanic,e.exports.lua_atnativeerror=n.lua_atnativeerror,e.exports.lua_call=n.lua_call,e.exports.lua_callk=n.lua_callk,e.exports.lua_checkstack=n.lua_checkstack,e.exports.lua_close=o.lua_close,e.exports.lua_compare=n.lua_compare,e.exports.lua_concat=n.lua_concat,e.exports.lua_copy=n.lua_copy,e.exports.lua_createtable=n.lua_createtable,e.exports.lua_dump=n.lua_dump,e.exports.lua_error=n.lua_error,e.exports.lua_gc=n.lua_gc,e.exports.lua_getallocf=n.lua_getallocf,e.exports.lua_getextraspace=n.lua_getextraspace,e.exports.lua_getfield=n.lua_getfield,e.exports.lua_getglobal=n.lua_getglobal,e.exports.lua_gethook=u.lua_gethook,e.exports.lua_gethookcount=u.lua_gethookcount,e.exports.lua_gethookmask=u.lua_gethookmask,e.exports.lua_geti=n.lua_geti,e.exports.lua_getinfo=u.lua_getinfo,e.exports.lua_getlocal=u.lua_getlocal,e.exports.lua_getmetatable=n.lua_getmetatable,e.exports.lua_getstack=u.lua_getstack,e.exports.lua_gettable=n.lua_gettable,e.exports.lua_gettop=n.lua_gettop,e.exports.lua_getupvalue=n.lua_getupvalue,e.exports.lua_getuservalue=n.lua_getuservalue,e.exports.lua_insert=n.lua_insert,e.exports.lua_isboolean=n.lua_isboolean,e.exports.lua_iscfunction=n.lua_iscfunction,e.exports.lua_isfunction=n.lua_isfunction,e.exports.lua_isinteger=n.lua_isinteger,e.exports.lua_islightuserdata=n.lua_islightuserdata,e.exports.lua_isnil=n.lua_isnil,e.exports.lua_isnone=n.lua_isnone,e.exports.lua_isnoneornil=n.lua_isnoneornil,e.exports.lua_isnumber=n.lua_isnumber,e.exports.lua_isproxy=n.lua_isproxy,e.exports.lua_isstring=n.lua_isstring,e.exports.lua_istable=n.lua_istable,e.exports.lua_isthread=n.lua_isthread,e.exports.lua_isuserdata=n.lua_isuserdata,e.exports.lua_isyieldable=s.lua_isyieldable,e.exports.lua_len=n.lua_len,e.exports.lua_load=n.lua_load,e.exports.lua_newstate=o.lua_newstate,e.exports.lua_newtable=n.lua_newtable,e.exports.lua_newthread=o.lua_newthread,e.exports.lua_newuserdata=n.lua_newuserdata,e.exports.lua_next=n.lua_next,e.exports.lua_pcall=n.lua_pcall,e.exports.lua_pcallk=n.lua_pcallk,e.exports.lua_pop=n.lua_pop,e.exports.lua_pushboolean=n.lua_pushboolean,e.exports.lua_pushcclosure=n.lua_pushcclosure,e.exports.lua_pushcfunction=n.lua_pushcfunction,e.exports.lua_pushfstring=n.lua_pushfstring,e.exports.lua_pushglobaltable=n.lua_pushglobaltable,e.exports.lua_pushinteger=n.lua_pushinteger,e.exports.lua_pushjsclosure=n.lua_pushjsclosure,e.exports.lua_pushjsfunction=n.lua_pushjsfunction,e.exports.lua_pushlightuserdata=n.lua_pushlightuserdata,e.exports.lua_pushliteral=n.lua_pushliteral,e.exports.lua_pushlstring=n.lua_pushlstring,e.exports.lua_pushnil=n.lua_pushnil,e.exports.lua_pushnumber=n.lua_pushnumber,e.exports.lua_pushstring=n.lua_pushstring,e.exports.lua_pushthread=n.lua_pushthread,e.exports.lua_pushvalue=n.lua_pushvalue,e.exports.lua_pushvfstring=n.lua_pushvfstring,e.exports.lua_rawequal=n.lua_rawequal,e.exports.lua_rawget=n.lua_rawget,e.exports.lua_rawgeti=n.lua_rawgeti,e.exports.lua_rawgetp=n.lua_rawgetp,e.exports.lua_rawlen=n.lua_rawlen,e.exports.lua_rawset=n.lua_rawset,e.exports.lua_rawseti=n.lua_rawseti,e.exports.lua_rawsetp=n.lua_rawsetp,e.exports.lua_register=n.lua_register,e.exports.lua_remove=n.lua_remove,e.exports.lua_replace=n.lua_replace,e.exports.lua_resume=s.lua_resume,e.exports.lua_rotate=n.lua_rotate,e.exports.lua_setallof=s.lua_setallof,e.exports.lua_setfield=n.lua_setfield,e.exports.lua_setglobal=n.lua_setglobal,e.exports.lua_sethook=u.lua_sethook,e.exports.lua_seti=n.lua_seti,e.exports.lua_setlocal=u.lua_setlocal,e.exports.lua_setmetatable=n.lua_setmetatable,e.exports.lua_settable=n.lua_settable,e.exports.lua_settop=n.lua_settop,e.exports.lua_setupvalue=n.lua_setupvalue,e.exports.lua_setuservalue=n.lua_setuservalue,e.exports.lua_status=n.lua_status,e.exports.lua_stringtonumber=n.lua_stringtonumber,e.exports.lua_toboolean=n.lua_toboolean,e.exports.lua_todataview=n.lua_todataview,e.exports.lua_tointeger=n.lua_tointeger,e.exports.lua_tointegerx=n.lua_tointegerx,e.exports.lua_tojsstring=n.lua_tojsstring,e.exports.lua_toljsstring=n.lua_toljsstring,e.exports.lua_tolstring=n.lua_tolstring,e.exports.lua_tonumber=n.lua_tonumber,e.exports.lua_tonumberx=n.lua_tonumberx,e.exports.lua_topointer=n.lua_topointer,e.exports.lua_toproxy=n.lua_toproxy,e.exports.lua_tostring=n.lua_tostring,e.exports.lua_tothread=n.lua_tothread,e.exports.lua_touserdata=n.lua_touserdata,e.exports.lua_type=n.lua_type,e.exports.lua_typename=n.lua_typename,e.exports.lua_upvalueid=n.lua_upvalueid,e.exports.lua_upvaluejoin=n.lua_upvaluejoin,e.exports.lua_version=n.lua_version,e.exports.lua_xmove=n.lua_xmove,e.exports.lua_yield=s.lua_yield,e.exports.lua_yieldk=s.lua_yieldk,e.exports.lua_tocfunction=n.lua_tocfunction},function(e,t,r){"use strict";var a=r(5),n=a.luai_apicheck,u=function(e){if(!e)throw Error("assertion failed")};e.exports.lua_assert=u,e.exports.luai_apicheck=n||function(e,t){return u(t)};var s=function(e,t,r){return n(e,t&&r)};e.exports.api_check=s;e.exports.LUAI_MAXCCALLS=200;e.exports.LUA_MINBUFFER=32;var o=function(e,t,r){var a=t%r;return a*r<0&&(a+=r),a};e.exports.luai_nummod=o;e.exports.MAX_INT=2147483647;e.exports.MIN_INT=-2147483648},function(e,t,r){"use strict";var a=r(0),n="Fengari 0.0.1  Copyright (C) 2017-2018 B. Giannangeli, Daurnimator\nBased on: "+a.LUA_COPYRIGHT;e.exports.FENGARI_AUTHORS="B. Giannangeli, Daurnimator",e.exports.FENGARI_COPYRIGHT=n,e.exports.FENGARI_RELEASE="Fengari 0.0.1",e.exports.FENGARI_VERSION="Fengari 0.0",e.exports.FENGARI_VERSION_MAJOR="0",e.exports.FENGARI_VERSION_MINOR="0",e.exports.FENGARI_VERSION_NUM=1,e.exports.FENGARI_VERSION_RELEASE="1",e.exports.is_luastring=a.is_luastring,e.exports.luastring_eq=a.luastring_eq,e.exports.luastring_from=a.luastring_from,e.exports.luastring_indexOf=a.luastring_indexOf,e.exports.luastring_of=a.luastring_of,e.exports.to_jsstring=a.to_jsstring,e.exports.to_luastring=a.to_luastring,e.exports.to_uristring=a.to_uristring,e.exports.from_userstring=a.from_userstring},function(e,t,r){"use strict";function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),l=r(0),i=l.LUA_OPADD,c=l.LUA_OPBAND,_=l.LUA_OPBNOT,f=l.LUA_OPBOR,p=l.LUA_OPBXOR,v=l.LUA_OPDIV,d=l.LUA_OPIDIV,h=l.LUA_OPMOD,L=l.LUA_OPMUL,A=l.LUA_OPPOW,g=l.LUA_OPSHL,b=l.LUA_OPSHR,T=l.LUA_OPSUB,x=l.LUA_OPUNM,k=l.constant_types,O=k.LUA_NUMTAGS,m=k.LUA_TBOOLEAN,E=k.LUA_TCCL,U=k.LUA_TFUNCTION,R=k.LUA_TLCF,y=k.LUA_TLCL,N=k.LUA_TLIGHTUSERDATA,S=k.LUA_TLNGSTR,w=k.LUA_TNIL,I=k.LUA_TNUMBER,M=k.LUA_TNUMFLT,P=k.LUA_TNUMINT,D=k.LUA_TSHRSTR,C=k.LUA_TSTRING,V=k.LUA_TTABLE,B=k.LUA_TTHREAD,G=k.LUA_TUSERDATA,K=l.from_userstring,j=l.luastring_indexOf,F=l.luastring_of,H=l.to_jsstring,X=l.to_luastring,z=r(21),q=z.lisdigit,Y=z.lisprint,J=z.lisspace,Z=z.lisxdigit,W=r(10),Q=r(7),$=r(11),ee=r(9),te=ee.luaS_bless,re=ee.luaS_new,ae=r(8),ne=r(5),ue=ne.ldexp,se=ne.lua_getlocaledecpoint,oe=ne.lua_integer2str,le=ne.lua_number2str,ie=r(14),ce=r(2),_e=ce.MAX_INT,fe=ce.luai_nummod,pe=ce.lua_assert,ve=r(13),de=O,he=O+1,Le=function(){function e(t,r){n(this,e),this.type=t,this.value=r}return o(e,[{key:"ttype",value:function(){return 63&this.type}},{key:"ttnov",value:function(){return 15&this.type}},{key:"checktag",value:function(e){return this.type===e}},{key:"checktype",value:function(e){return this.ttnov()===e}},{key:"ttisnumber",value:function(){return this.checktype(I)}},{key:"ttisfloat",value:function(){return this.checktag(M)}},{key:"ttisinteger",value:function(){return this.checktag(P)}},{key:"ttisnil",value:function(){return this.checktag(w)}},{key:"ttisboolean",value:function(){return this.checktag(m)}},{key:"ttislightuserdata",value:function(){return this.checktag(N)}},{key:"ttisstring",value:function(){return this.checktype(C)}},{key:"ttisshrstring",value:function(){return this.checktag(D)}},{key:"ttislngstring",value:function(){return this.checktag(S)}},{key:"ttistable",value:function(){return this.checktag(V)}},{key:"ttisfunction",value:function(){return this.checktype(U)}},{key:"ttisclosure",value:function(){return(31&this.type)===U}},{key:"ttisCclosure",value:function(){return this.checktag(E)}},{key:"ttisLclosure",value:function(){return this.checktag(y)}},{key:"ttislcf",value:function(){return this.checktag(R)}},{key:"ttisfulluserdata",value:function(){return this.checktag(G)}},{key:"ttisthread",value:function(){return this.checktag(B)}},{key:"ttisdeadkey",value:function(){return this.checktag(he)}},{key:"l_isfalse",value:function(){return this.ttisnil()||this.ttisboolean()&&!1===this.value}},{key:"setfltvalue",value:function(e){this.type=M,this.value=e}},{key:"chgfltvalue",value:function(e){pe(this.type==M),this.value=e}},{key:"setivalue",value:function(e){this.type=P,this.value=e}},{key:"chgivalue",value:function(e){pe(this.type==P),this.value=e}},{key:"setnilvalue",value:function(){this.type=w,this.value=null}},{key:"setfvalue",value:function(e){this.type=R,this.value=e}},{key:"setpvalue",value:function(e){this.type=N,this.value=e}},{key:"setbvalue",value:function(e){this.type=m,this.value=e}},{key:"setsvalue",value:function(e){this.type=S,this.value=e}},{key:"setuvalue",value:function(e){this.type=G,this.value=e}},{key:"setthvalue",value:function(e){this.type=B,this.value=e}},{key:"setclLvalue",value:function(e){this.type=y,this.value=e}},{key:"setclCvalue",value:function(e){this.type=E,this.value=e}},{key:"sethvalue",value:function(e){this.type=V,this.value=e}},{key:"setdeadvalue",value:function(){this.type=he,this.value=null}},{key:"setfrom",value:function(e){this.type=e.type,this.value=e.value}},{key:"tsvalue",value:function(){return pe(this.ttisstring()),this.value}},{key:"svalue",value:function(){return this.tsvalue().getstr()}},{key:"vslen",value:function(){return this.tsvalue().tsslen()}},{key:"jsstring",value:function(e,t){return H(this.svalue(),e,t)}}]),e}(),Ae=function(e,t){e.stack[e.top++]=new Le(t.type,t.value)},ge=function(e,t){e.stack[e.top++]=new Le(S,t)},be=function(e,t,r){e.stack[t].setfrom(e.stack[r])},Te=function(e,t,r){e.stack[t].setfrom(r)},xe=function(e,t,r){e.stack[t].setsvalue(r)},ke=new Le(w,null);Object.freeze(ke),e.exports.luaO_nilobject=ke;var Oe=function e(t,r){n(this,e),this.id=t.l_G.id_counter++,this.p=null,this.nupvalues=r,this.upvals=new Array(r)},me=function e(t,r,a){for(n(this,e),this.id=t.l_G.id_counter++,this.f=r,this.nupvalues=a,this.upvalue=new Array(a);a--;)this.upvalue[a]=new Le(w,null)},Ee=function e(t,r){n(this,e),this.id=t.l_G.id_counter++,this.metatable=null,this.uservalue=new Le(w,null),this.len=r,this.data=Object.create(null)},Ue=function e(){n(this,e),this.varname=null,this.startpc=NaN,this.endpc=NaN},Re=X("..."),ye=X('[string "'),Ne=X('"]'),Se=function(e,t){var r=e.length,a=void 0;if(61===e[0])r<t?(a=new Uint8Array(r-1),a.set(e.subarray(1))):(a=new Uint8Array(t),a.set(e.subarray(1,t+1)));else if(64===e[0])r<=t?(a=new Uint8Array(r-1),a.set(e.subarray(1))):(a=new Uint8Array(t),a.set(Re),t-=Re.length,a.set(e.subarray(r-t),Re.length));else{a=new Uint8Array(t);var n=j(e,10);a.set(ye);var u=ye.length;t-=ye.length+Re.length+Ne.length,r<t&&-1===n?(a.set(e,u),u+=e.length):(-1!==n&&(r=n),r>t&&(r=t),a.set(e.subarray(0,r),u),u+=r,a.set(Re,u),u+=Re.length),a.set(Ne,u),u+=Ne.length,a=a.subarray(0,u)}return a},we=function(e){return q(e)?e-48:(223&e)-55},Ie=function(e,t){var r=1;if(pe(t<=1114111),t<128)e[7]=t;else{var a=63;do{e[8-r++]=128|63&t,t>>=6,a>>=1}while(t>a);e[8-r]=~a<<1|t}return r},Me=function(e){for(var t=0,r=se(),a=0,n=0,u=0,s=0,o=void 0,l=!1;J(e[t]);)t++;if((o=45===e[t])?t++:43===e[t]&&t++,48!==e[t]||120!==e[t+1]&&88!==e[t+1])return null;for(t+=2;;t++)if(e[t]===r){if(l)break;l=!0}else{if(!Z(e[t]))break;0===n&&48===e[t]?u++:++n<=30?a=16*a+we(e[t]):s++,l&&s--}if(u+n===0)return null;if(s*=4,112===e[t]||80===e[t]){var i=0,c=void 0;if(t++,(c=45===e[t])?t++:43===e[t]&&t++,!q(e[t]))return null;for(;q(e[t]);)i=10*i+e[t++]-48;c&&(i=-i),s+=i}return o&&(a=-a),{n:ue(a,s),i:t}},Pe=function(e){try{e=H(e)}catch(e){return null}var t=/^[\t\v\f \n\r]*[+-]?(?:[0-9]+\.?[0-9]*|\.[0-9]*)(?:[eE][+-]?[0-9]+)?/.exec(e);if(!t)return null;var r=parseFloat(t[0]);return isNaN(r)?null:{n:r,i:t[0].length}},De=function(e,t){var r="x"===t?Me(e):Pe(e);if(null===r)return null;for(;J(e[r.i]);)r.i++;return r.i===e.length||0===e[r.i]?r:null},Ce=[46,120,88,110,78],Ve=(u={},a(u,46,"."),a(u,120,"x"),a(u,88,"x"),a(u,110,"n"),a(u,78,"n"),u),Be=function(e){for(var t=e.length,r=0,a=0;a<t;a++){var n=e[a];if(-1!==Ce.indexOf(n)){r=n;break}}var u=Ve[r];return"n"===u?null:De(e,u)},Ge=Math.floor(_e/10),Ke=_e%10,je=function(e){for(var t=0,r=0,a=!0,n=void 0;J(e[t]);)t++;if((n=45===e[t])?t++:43===e[t]&&t++,48!==e[t]||120!==e[t+1]&&88!==e[t+1])for(;t<e.length&&q(e[t]);t++){var u=e[t]-48;if(r>=Ge&&(r>Ge||u>Ke+n))return null;r=10*r+u|0,a=!1}else for(t+=2;t<e.length&&Z(e[t]);t++)r=16*r+we(e[t])|0,a=!1;for(;t<e.length&&J(e[t]);)t++;return a||t!==e.length&&0!==e[t]?null:{n:0|(n?-r:r),i:t}},Fe=function(e,t){var r=je(e);return null!==r?(t.setivalue(r.n),r.i+1):(r=Be(e),null!==r?(t.setfltvalue(r.n),r.i+1):0)},He=function(e,t){var r=void 0;if(t.ttisinteger())r=X(oe(t.value));else{var a=le(t.value);/^[-0123456789]+$/.test(a)&&(a+=String.fromCharCode(se())+"0"),r=X(a)}t.setsvalue(te(e,r))},Xe=function(e,t){Q.luaD_inctop(e),xe(e,e.top-1,re(e,t))},ze=function(e,t,r){for(var a=0,n=0,u=0,o=void 0;-1!=(o=j(t,37,n));){switch(Xe(e,t.subarray(n,o)),t[o+1]){case 115:var l=r[u++];if(null===l)l=X("(null)",!0);else{l=K(l);var i=j(l,0);-1!==i&&(l=l.subarray(0,i))}Xe(e,l);break;case 99:var c=r[u++];Y(c)?Xe(e,F(c)):qe(e,X("<\\%d>",!0),c);break;case 100:case 73:Q.luaD_inctop(e),e.stack[e.top-1].setivalue(r[u++]),He(e,e.stack[e.top-1]);break;case 102:Q.luaD_inctop(e),e.stack[e.top-1].setfltvalue(r[u++]),He(e,e.stack[e.top-1]);break;case 112:var _=r[u++];switch((_ instanceof $.lua_State||_ instanceof ae.Table||_ instanceof Ee||_ instanceof Oe||_ instanceof me)&&Xe(e,X("0x"+_.id.toString(16))),void 0===_?"undefined":s(_)){case"undefined":Xe(e,X("undefined"));break;case"number":Xe(e,X("Number("+_+")"));break;case"string":Xe(e,X("String("+JSON.stringify(_)+")"));break;case"boolean":Xe(e,X(_?"Boolean(true)":"Boolean(false)"));break;case"object":if(null===_){Xe(e,X("null"));break}case"function":var f=e.l_G.ids.get(_);f||(f=e.l_G.id_counter++,e.l_G.ids.set(_,f)),Xe(e,X("0x"+f.toString(16)));break;default:Xe(e,X("<id NYI>"))}break;case 85:var p=new Uint8Array(8),v=Ie(p,r[u++]);Xe(e,p.subarray(8-v));break;case 37:Xe(e,X("%",!0));break;default:W.luaG_runerror(e,X("invalid option '%%%c' to 'lua_pushfstring'"),t[o+1])}a+=2,n=o+2}return Q.luaD_checkstack(e,1),Xe(e,t.subarray(n)),a>0&&ie.luaV_concat(e,a+1),e.stack[e.top-1].svalue()},qe=function(e,t){for(var r=arguments.length,a=Array(r>2?r-2:0),n=2;n<r;n++)a[n-2]=arguments[n];return ze(e,t,a)},Ye=function(e){var t=0;if(e<8)return e;for(;e>=128;)e=e+15>>4,t+=4;for(;e>=16;)e=e+1>>1,t++;return t+1<<3|e-8},Je=function(e,t,r,a){switch(t){case i:return r+a|0;case T:return r-a|0;case L:return ie.luaV_imul(r,a);case h:return ie.luaV_mod(e,r,a);case d:return ie.luaV_div(e,r,a);case c:return r&a;case f:return r|a;case p:return r^a;case g:return ie.luaV_shiftl(r,a);case b:return ie.luaV_shiftl(r,-a);case x:return 0-r|0;case _:return-1^r;default:pe(0)}},Ze=function(e,t,r,a){switch(t){case i:return r+a;case T:return r-a;case L:return r*a;case v:return r/a;case A:return Math.pow(r,a);case d:return Math.floor(r/a);case x:return-r;case h:return fe(e,r,a);default:pe(0)}},We=function(e,t,r,a,n){var u="number"==typeof n?e.stack[n]:n;switch(t){case c:case f:case p:case g:case b:case _:var s=void 0,o=void 0;if(!1!==(s=ie.tointeger(r))&&!1!==(o=ie.tointeger(a)))return void u.setivalue(Je(e,t,s,o));break;case v:case A:var l=void 0,d=void 0;if(!1!==(l=ie.tonumber(r))&&!1!==(d=ie.tonumber(a)))return void u.setfltvalue(Ze(e,t,l,d));break;default:var h=void 0,L=void 0;if(r.ttisinteger()&&a.ttisinteger())return void u.setivalue(Je(e,t,r.value,a.value));if(!1!==(h=ie.tonumber(r))&&!1!==(L=ie.tonumber(a)))return void u.setfltvalue(Ze(e,t,h,L))}pe(null!==e),ve.luaT_trybinTM(e,r,a,n,t-i+ve.TMS.TM_ADD)};e.exports.CClosure=me,e.exports.LClosure=Oe,e.exports.LUA_TDEADKEY=he,e.exports.LUA_TPROTO=de,e.exports.LocVar=Ue,e.exports.TValue=Le,e.exports.Udata=Ee,e.exports.UTF8BUFFSZ=8,e.exports.luaO_arith=We,e.exports.luaO_chunkid=Se,e.exports.luaO_hexavalue=we,e.exports.luaO_int2fb=Ye,e.exports.luaO_pushfstring=qe,e.exports.luaO_pushvfstring=ze,e.exports.luaO_str2num=Fe,e.exports.luaO_tostring=He,e.exports.luaO_utf8esc=Ie,e.exports.numarith=Ze,e.exports.pushobj2s=Ae,e.exports.pushsvalue2s=ge,e.exports.setobjs2s=be,e.exports.setobj2s=Te,e.exports.setsvalue2s=xe},function(e,t,r){"use strict";var a=function(e){return String(e)},n=function(e){return String(Number(e.toPrecision(14)))},u=function(e){return e>=-2147483648&&e<2147483648&&e},s=function(){return 1.1.toLocaleString().charCodeAt(1)},o=function(e,t){if(!t)throw Error(t)},l=function(e){if(0===e)return[e,0];var t=new DataView(new ArrayBuffer(8));t.setFloat64(0,e);var r=t.getUint32(0)>>>20&2047;0===r&&(t.setFloat64(0,e*Math.pow(2,64)),r=(t.getUint32(0)>>>20&2047)-64);var a=r-1022;return[i(e,-a),a]},i=function(e,t){for(var r=Math.min(3,Math.ceil(Math.abs(t)/1023)),a=e,n=0;n<r;n++)a*=Math.pow(2,Math.floor((t+n)/r));return a};e.exports.LUAI_MAXSTACK=1e5,e.exports.LUA_IDSIZE=59,e.exports.LUA_INTEGER_FMT="%d",e.exports.LUA_INTEGER_FRMLEN="",e.exports.LUA_MAXINTEGER=2147483647,e.exports.LUA_MININTEGER=-2147483648,e.exports.LUA_NUMBER_FMT="%.14g",e.exports.LUA_NUMBER_FRMLEN="",e.exports.LUAL_BUFFERSIZE=8192,e.exports.frexp=l,e.exports.ldexp=i,e.exports.lua_getlocaledecpoint=s,e.exports.lua_integer2str=a,e.exports.lua_number2str=n,e.exports.lua_numbertointeger=u,e.exports.luai_apicheck=o},function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=r(5),u=n.LUAL_BUFFERSIZE,s=r(1),o=s.LUA_ERRERR,l=s.LUA_MULTRET,i=s.LUA_REGISTRYINDEX,c=s.LUA_SIGNATURE,_=s.LUA_TBOOLEAN,f=s.LUA_TLIGHTUSERDATA,p=s.LUA_TNIL,v=s.LUA_TNONE,d=s.LUA_TNUMBER,h=s.LUA_TSTRING,L=s.LUA_TTABLE,A=s.LUA_VERSION_NUM,g=s.lua_Debug,b=s.lua_absindex,T=s.lua_atpanic,x=s.lua_call,k=s.lua_checkstack,O=s.lua_concat,m=s.lua_copy,E=s.lua_createtable,U=s.lua_error,R=s.lua_getfield,y=s.lua_getinfo,N=s.lua_getmetatable,S=s.lua_getstack,w=s.lua_gettop,I=s.lua_insert,M=s.lua_isinteger,P=s.lua_isnil,D=s.lua_isnumber,C=s.lua_isstring,V=s.lua_istable,B=s.lua_len,G=s.lua_load,K=s.lua_newstate,j=s.lua_newtable,F=s.lua_next,H=s.lua_pcall,X=s.lua_pop,z=s.lua_pushboolean,q=s.lua_pushcclosure,Y=s.lua_pushcfunction,J=s.lua_pushfstring,Z=s.lua_pushinteger,W=s.lua_pushliteral,Q=s.lua_pushlstring,$=s.lua_pushnil,ee=s.lua_pushstring,te=s.lua_pushvalue,re=s.lua_pushvfstring,ae=s.lua_rawequal,ne=s.lua_rawget,ue=s.lua_rawgeti,se=s.lua_rawlen,oe=s.lua_rawseti,le=s.lua_remove,ie=s.lua_setfield,ce=s.lua_setglobal,_e=s.lua_setmetatable,fe=s.lua_settop,pe=s.lua_toboolean,ve=s.lua_tointeger,de=s.lua_tointegerx,he=s.lua_tojsstring,Le=s.lua_tolstring,Ae=s.lua_tonumber,ge=s.lua_tonumberx,be=s.lua_topointer,Te=s.lua_tostring,xe=s.lua_touserdata,ke=s.lua_type,Oe=s.lua_typename,me=s.lua_version,Ee=r(3),Ue=Ee.from_userstring,Re=Ee.luastring_eq,ye=Ee.to_luastring,Ne=Ee.to_uristring,Se=o+1,we=ye("_LOADED"),Ie=ye("_PRELOAD"),Me=ye("FILE*"),Pe=ye("__name"),De=ye("__tostring"),Ce=new Uint8Array(0),Ve=function e(){a(this,e),this.L=null,this.b=Ce,this.n=0},Be=function e(t,r,a){if(0===a||!V(t,-1))return 0;for($(t);F(t,-2);){if(ke(t,-2)===h){if(ae(t,r,-1))return X(t,1),1;if(e(t,r,a-1))return le(t,-2),W(t,"."),I(t,-2),O(t,3),1}X(t,1)}return 0},Ge=function(e,t){var r=w(e);if(y(e,ye("f"),t),R(e,i,we),Be(e,r+1,2)){var a=Te(e,-1);return 95===a[0]&&71===a[1]&&46===a[2]&&(ee(e,a.subarray(3)),le(e,-2)),m(e,-1,r+1),X(e,2),1}return fe(e,r),0},Ke=function(e,t){Ge(e,t)?(J(e,ye("function '%s'"),Te(e,-1)),le(e,-2)):0!==t.namewhat.length?J(e,ye("%s '%s'"),t.namewhat,t.name):t.what&&109===t.what[0]?W(e,"main chunk"):t.what&&76===t.what[0]?J(e,ye("function <%s:%d>"),t.short_src,t.linedefined):W(e,"?")},je=function(e){for(var t=new g,r=1,a=1;S(e,a,t);)r=a,a*=2;for(;r<a;){var n=Math.floor((r+a)/2);S(e,n,t)?r=n+1:a=n}return a-1},Fe=function(e,t,r,a){var n=new g,u=w(e),s=je(t),o=s-a>21?10:-1;for(r&&J(e,ye("%s\n"),r),zt(e,10,null),W(e,"stack traceback:");S(t,a++,n);)0==o--?(W(e,"\n\t..."),a=s-11+1):(y(t,ye("Slnt",!0),n),J(e,ye("\n\t%s:"),n.short_src),n.currentline>0&&W(e,n.currentline+":"),W(e," in "),Ke(e,n),n.istailcall&&W(e,"\n\t(...tail calls..)"),O(e,w(e)-u));O(e,w(e)-u)},He=function(e){var t="PANIC: unprotected error in call to Lua API";try{t+=" ("+he(e,-1)+")"}catch(e){}throw new Error(t)},Xe=function(e,t,r){var a=new g;return S(e,0,a)?(y(e,ye("n"),a),Re(a.namewhat,ye("method"))&&0===--t?Ye(e,ye("calling '%s' on bad self (%s)"),a.name,r):(null===a.name&&(a.name=Ge(e,a)?Te(e,-1):ye("?")),Ye(e,ye("bad argument #%d to '%s' (%s)"),t,a.name,r))):Ye(e,ye("bad argument #%d (%s)"),t,r)},ze=function(e,t,r){var a=void 0;a=Pt(e,t,Pe)===h?Te(e,-1):ke(e,t)===f?ye("light userdata",!0):ut(e,t);var n=J(e,ye("%s expected, got %s"),r,a);return Xe(e,t,n)},qe=function(e,t){var r=new g;if(S(e,t,r)&&(y(e,ye("Sl",!0),r),r.currentline>0))return void J(e,ye("%s:%d: "),r.short_src,r.currentline);ee(e,ye(""))},Ye=function(e,t){qe(e,1);for(var r=arguments.length,a=Array(r>2?r-2:0),n=2;n<r;n++)a[n-2]=arguments[n];return re(e,t,a),O(e,2),U(e)},Je=function(e,t,r,a){return t?(z(e,1),1):($(e),r?J(e,ye("%s: %s"),r,ye(a.message)):ee(e,ye(a.message)),Z(e,-a.errno),3)},Ze=function(e,t){var r=void 0,a=void 0;if(null===t)return z(e,1),W(e,"exit"),Z(e,0),3;if(t.status)r="exit",a=t.status;else{if(!t.signal)return Je(e,0,null,t);r="signal",a=t.signal}return $(e),W(e,r),Z(e,a),3},We=function(e,t){return R(e,i,t)},Qe=function(e,t){return We(e,t)!==p?0:(X(e,1),E(e,0,2),ee(e,t),ie(e,-2,Pe),te(e,-1),ie(e,i,t),1)},$e=function(e,t){We(e,t),_e(e,-2)},et=function(e,t,r){var a=xe(e,t);return null!==a&&N(e,t)?(We(e,r),ae(e,-1,-2)||(a=null),X(e,2),a):null},tt=function(e,t,r){var a=et(e,t,r);return null===a&&ze(e,t,r),a},rt=function(e,t,r,a){for(var n=null!==r?ft(e,t,r):it(e,t),u=0;a[u];u++)if(Re(a[u],n))return u;return Xe(e,t,J(e,ye("invalid option '%s'"),n))},at=function(e,t,r){ze(e,t,Oe(e,r))},nt=function(){var e=K();return e&&T(e,He),e},ut=function(e,t){return Oe(e,ke(e,t))},st=function(e,t,r,a){t||Xe(e,r,a)},ot=function(e,t){ke(e,t)===v&&Xe(e,t,ye("value expected",!0))},lt=function(e,t,r){ke(e,t)!==r&&at(e,t,r)},it=function(e,t){return ct(e,t,null)},ct=function(e,t){var r=Le(e,t);return null!==r&&void 0!==r||at(e,t,h),r},_t=function(e,t,r){return ke(e,t)<=0?null===r?null:Ue(r):ct(e,t)},ft=_t,pt=function(e,t){D(e,t)?Xe(e,t,ye("number has no integer representation",!0)):at(e,t,d)},vt=function(e,t){var r=ge(e,t);return!1===r&&at(e,t,d),r},dt=function(e,t,r){return yt(e,vt,t,r)},ht=function(e,t){var r=de(e,t);return!1===r&&pt(e,t),r},Lt=function(e,t,r){return yt(e,ht,t,r)},At=function(e,t){var r=e.n+t;if(e.b.length<r){var a=Math.max(2*e.b.length,r),n=new Uint8Array(a);n.set(e.b),e.b=n}return e.b.subarray(e.n,r)},gt=function(e,t){t.L=e,t.b=Ce},bt=function(e,t,r){return gt(e,t),At(t,r)},Tt=function(e){return At(e,u)},xt=function(e,t,r){if(r>0){At(e,r).set(t.subarray(0,r)),Et(e,r)}},kt=function(e,t){xt(e,t,t.length)},Ot=function(e){Q(e.L,e.b,e.n),e.n=0,e.b=Ce},mt=function(e,t){At(e,1),e.b[e.n++]=t},Et=function(e,t){e.n+=t},Ut=function(e,t){Et(e,t),Ot(e)},Rt=function(e){var t=e.L,r=Te(t,-1);xt(e,r,r.length),X(t,1)},yt=function(e,t,r,a){return ke(e,r)<=0?a:t(e,r)},Nt=function(e,t){var r=t.string;return t.string=null,r},St=function(e,t,r,a,n){return G(e,Nt,{string:t},a,n)},wt=function(e,t,r,a){return St(e,t,0,a,null)},It=function(e,t){return wt(e,t,t.length,t)},Mt=function(e,t){return It(e,t)||H(e,0,l,0)},Pt=function(e,t,r){if(N(e,t)){ee(e,r);var a=ne(e,-2);return a===p?X(e,2):le(e,-2),a}return p},Dt=function(e,t,r){return t=b(e,t),Pt(e,t,r)!==p&&(te(e,t),x(e,1,1),!0)},Ct=function(e,t){B(e,t);var r=de(e,-1);return!1===r&&Ye(e,ye("object length is not an integer",!0)),X(e,1),r},Vt=ye("%I"),Bt=ye("%f"),Gt=function(e,t){if(Dt(e,t,De))C(e,-1)||Ye(e,ye("'__tostring' must return a string"));else{switch(ke(e,t)){case d:M(e,t)?J(e,Vt,ve(e,t)):J(e,Bt,Ae(e,t));break;case h:te(e,t);break;case _:W(e,pe(e,t)?"true":"false");break;case p:W(e,"nil");break;default:var r=Pt(e,t,Pe),a=r===h?Te(e,-1):ut(e,t);J(e,ye("%s: %p"),a,be(e,t)),r!==p&&le(e,-2)}}return Le(e,-1)},Kt=function(e,t,r,a){Ht(e,i,we),R(e,-1,t),pe(e,-1)||(X(e,1),Y(e,r),ee(e,t),x(e,1,1),te(e,-1),ie(e,-3,t)),le(e,-2),a&&(te(e,-1),ce(e,t))},jt=function(e,t,r){var a=r>>>0,n=t.length,u=e.length+1-n;e:for(;a<u;a++){for(var s=0;s<n;s++)if(e[a+s]!==t[s])continue e;return a}return-1},Ft=function(e,t,r,a){var n=void 0,u=new Ve;for(gt(e,u);(n=jt(t,r))>=0;)xt(u,t,n),kt(u,a),t=t.subarray(n+r.length);return kt(u,t),Ot(u),Te(e,-1)},Ht=function(e,t,r){return R(e,t,r)===L||(X(e,1),t=b(e,t),j(e),te(e,-1),ie(e,t,r),!1)},Xt=function(e,t,r){zt(e,r,ye("too many upvalues",!0));for(var a in t){for(var n=0;n<r;n++)te(e,-r);q(e,t[a],r),ie(e,-(r+2),ye(a))}X(e,r)},zt=function(e,t,r){k(e,t)||(r?Ye(e,ye("stack overflow (%s)"),r):Ye(e,ye("stack overflow",!0)))},qt=function(e){E(e)},Yt=function(e,t){E(e),Xt(e,t,0)},Jt=function(e,t){var r=void 0;return P(e,-1)?(X(e,1),-1):(t=b(e,t),ue(e,t,0),r=ve(e,-1),X(e,1),0!==r?(ue(e,t,r),oe(e,t,0)):r=se(e,t)+1,oe(e,t,r),r)},Zt=function(e,t,r){r>=0&&(t=b(e,t),ue(e,t,0),oe(e,t,r),Z(e,r),oe(e,t,0))},Wt=function(e,t,r,a){var n=a.message,u=Te(e,r).subarray(1);return J(e,ye("cannot %s %s: %s"),ye(t),u,ye(n)),le(e,r),Se},Qt=void 0,$t=[239,187,191],er=function(e){e.n=0;var t=void 0,r=0;do{if(null===(t=Qt(e))||t!==$t[r])return t;r++,e.buff[e.n++]=t}while(r<$t.length);return e.n=0,Qt(e)},tr=function(e){var t=er(e);if(35===t){do{t=Qt(e)}while(t&&10!==t);return{skipped:!0,c:Qt(e)}}return{skipped:!1,c:t}},rr=void 0,ar=function e(){a(this,e),this.n=NaN,this.f=null,this.buff=new Uint8Array(1024),this.pos=0,this.err=void 0},nr=function(e,t){var r=t;if(null!==r.f&&r.n>0){var a=r.n;return r.n=0,r.f=r.f.subarray(r.pos),r.buff.subarray(0,a)}var n=r.f;return r.f=null,n};Qt=function(e){return e.pos<e.f.length?e.f[e.pos++]:null},rr=function(e,t,r){var a=new ar,n=w(e)+1;if(null===t)throw new Error("Can't read stdin in the browser");J(e,ye("@%s"),t);var u=Ne(t),s=new XMLHttpRequest;if(s.open("GET",u,!1),"undefined"==typeof window&&(s.responseType="arraybuffer"),s.send(),!(s.status>=200&&s.status<=299))return a.err=s.status,Wt(e,"open",n,{message:s.status+": "+s.statusText});"string"==typeof s.response?a.f=ye(s.response):a.f=new Uint8Array(s.response);var o=tr(a);o.c===c[0]&&t||o.skipped&&(a.buff[a.n++]=10),null!==o.c&&(a.buff[a.n++]=o.c);var l=G(e,nr,a,Te(e,-1),r),i=a.err;return i?(fe(e,n),Wt(e,"read",n,i)):(le(e,n),l)};var ur=function(e,t){return rr(e,t,null)},sr=function(e,t){return ur(e,t)||H(e,0,l,0)},or=function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];do{var r=/([^\n]*)\n?([\d\D]*)/.exec(t);console.error(r[1]),t=r[2]}while(""!==t)}},lr=function(e,t,r){var a=me(e);72!=r&&Ye(e,ye("core and library have incompatible numeric types")),a!=me(null)?Ye(e,ye("multiple Lua VMs detected")):a!==t&&Ye(e,ye("version mismatch: app. needs %f, Lua core provides %f"),t,a)},ir=function(e){lr(e,A,72)};e.exports.LUA_ERRFILE=Se,e.exports.LUA_FILEHANDLE=Me,e.exports.LUA_LOADED_TABLE=we,e.exports.LUA_NOREF=-2,e.exports.LUA_PRELOAD_TABLE=Ie,e.exports.LUA_REFNIL=-1,e.exports.luaL_Buffer=Ve,e.exports.luaL_addchar=mt,e.exports.luaL_addlstring=xt,e.exports.luaL_addsize=Et,e.exports.luaL_addstring=kt,e.exports.luaL_addvalue=Rt,e.exports.luaL_argcheck=st,e.exports.luaL_argerror=Xe,e.exports.luaL_buffinit=gt,e.exports.luaL_buffinitsize=bt,e.exports.luaL_callmeta=Dt,e.exports.luaL_checkany=ot,e.exports.luaL_checkinteger=ht,e.exports.luaL_checklstring=ct,e.exports.luaL_checknumber=vt,e.exports.luaL_checkoption=rt,e.exports.luaL_checkstack=zt,e.exports.luaL_checkstring=it,e.exports.luaL_checktype=lt,e.exports.luaL_checkudata=tt,e.exports.luaL_checkversion=ir,e.exports.luaL_checkversion_=lr,e.exports.luaL_dofile=sr,e.exports.luaL_dostring=Mt,e.exports.luaL_error=Ye,e.exports.luaL_execresult=Ze,e.exports.luaL_fileresult=Je,e.exports.luaL_getmetafield=Pt,e.exports.luaL_getmetatable=We,e.exports.luaL_getsubtable=Ht,e.exports.luaL_gsub=Ft,e.exports.luaL_len=Ct,e.exports.luaL_loadbuffer=wt,e.exports.luaL_loadbufferx=St,e.exports.luaL_loadfile=ur,e.exports.luaL_loadfilex=rr,e.exports.luaL_loadstring=It,e.exports.luaL_newlib=Yt,e.exports.luaL_newlibtable=qt,e.exports.luaL_newmetatable=Qe,e.exports.luaL_newstate=nt,e.exports.luaL_opt=yt,e.exports.luaL_optinteger=Lt,e.exports.luaL_optlstring=_t,e.exports.luaL_optnumber=dt,e.exports.luaL_optstring=ft,e.exports.luaL_prepbuffer=Tt,e.exports.luaL_prepbuffsize=At,e.exports.luaL_pushresult=Ot,e.exports.luaL_pushresultsize=Ut,e.exports.luaL_ref=Jt,e.exports.luaL_requiref=Kt,e.exports.luaL_setfuncs=Xt,e.exports.luaL_setmetatable=$e,e.exports.luaL_testudata=et,e.exports.luaL_tolstring=Gt,e.exports.luaL_traceback=Fe,e.exports.luaL_typename=ut,e.exports.luaL_unref=Zt,e.exports.luaL_where=qe,e.exports.lua_writestringerror=or},function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=r(0),u=n.LUA_HOOKCALL,s=n.LUA_HOOKRET,o=n.LUA_HOOKTAILCALL,l=n.LUA_MASKCALL,i=n.LUA_MASKLINE,c=n.LUA_MASKRET,_=n.LUA_MINSTACK,f=n.LUA_MULTRET,p=n.LUA_SIGNATURE,v=n.constant_types,d=v.LUA_TCCL,h=v.LUA_TLCF,L=v.LUA_TLCL,A=v.LUA_TNIL,g=n.thread_status,b=g.LUA_ERRMEM,T=g.LUA_ERRERR,x=g.LUA_ERRRUN,k=g.LUA_ERRSYNTAX,O=g.LUA_OK,m=g.LUA_YIELD,E=n.lua_Debug,U=n.luastring_indexOf,R=n.to_luastring,y=r(17),N=r(10),S=r(12),w=r(2),I=w.api_check,M=w.lua_assert,P=w.LUAI_MAXCCALLS,D=r(4),C=r(15),V=r(22),B=r(11),G=r(9),K=G.luaS_newliteral,j=r(13),F=r(5),H=F.LUAI_MAXSTACK,X=r(33),z=r(14),q=r(18),Y=q.MBuffer,J=function(e,t){if(e.top<t)for(;e.top<t;)e.stack[e.top++]=new D.TValue(A,null);else for(;e.top>t;)delete e.stack[--e.top]},Z=function(e,t,r){for(var a=e.top;e.top<r+1;)e.stack[e.top++]=new D.TValue(A,null);switch(t){case b:D.setsvalue2s(e,r,K(e,"not enough memory"));break;case T:D.setsvalue2s(e,r,K(e,"error in error handling"));break;default:D.setobjs2s(e,r,a-1)}for(;e.top>r+1;)delete e.stack[--e.top]},W=H+200,Q=function(e,t){M(t<=H||t==W),M(e.stack_last==e.stack.length-B.EXTRA_STACK),e.stack.length=t,e.stack_last=t-B.EXTRA_STACK},$=function(e,t){var r=e.stack.length;if(r>H)pe(e,T);else{var a=e.top+t+B.EXTRA_STACK,n=2*r;n>H&&(n=H),n<a&&(n=a),n>H?(Q(e,W),N.luaG_runerror(e,R("stack overflow",!0))):Q(e,n)}},ee=function(e,t){e.stack_last-e.top<=t&&$(e,t)},te=function(e){for(var t=e.top,r=e.ci;null!==r;r=r.previous)t<r.top&&(t=r.top);return M(t<=e.stack_last),t+1},re=function(e){var t=te(e),r=t+Math.floor(t/8)+2*B.EXTRA_STACK;r>H&&(r=H),e.stack.length>H&&B.luaE_freeCI(e),t<=H-B.EXTRA_STACK&&r<e.stack.length&&Q(e,r)},ae=function(e){ee(e,1),e.stack[e.top++]=new D.TValue(A,null)},ne=function e(t,r,a){var n=t.stack[r];switch(n.type){case d:case h:var s=n.type===d?n.value.f:n.value;ee(t,_);var o=B.luaE_extendCI(t);o.funcOff=r,o.nresults=a,o.func=n,o.top=t.top+_,M(o.top<=t.stack_last),o.callstatus=0,t.hookmask&l&&oe(t,u,-1);var i=s(t);if("number"!=typeof i||i<0||(0|i)!==i)throw Error("invalid return value from JS function (expected integer)");return y.api_checknelems(t,i),ue(t,o,t.top-i,i),!0;case L:var c=void 0,f=n.value.p,p=t.top-r-1,v=f.maxstacksize;if(ee(t,v),f.is_vararg)c=ie(t,f,p);else{for(;p<f.numparams;p++)t.stack[t.top++]=new D.TValue(A,null);c=r+1}var g=B.luaE_extendCI(t);return g.funcOff=r,g.nresults=a,g.func=n,g.l_base=c,g.top=c+v,J(t,g.top),g.l_code=f.code,g.l_savedpc=0,g.callstatus=B.CIST_LUA,t.hookmask&l&&le(t,g),!1;default:return ee(t,1),ce(t,r,n),e(t,r,a)}},ue=function(e,t,r,a){var n=t.nresults;e.hookmask&(c|i)&&(e.hookmask&c&&oe(e,s,-1),e.oldpc=t.previous.l_savedpc);var u=t.funcOff;return e.ci=t.previous,e.ci.next=null,se(e,r,u,a,n)},se=function(e,t,r,a,n){switch(n){case 0:break;case 1:0===a?e.stack[r].setnilvalue():D.setobjs2s(e,r,t);break;case f:for(var u=0;u<a;u++)D.setobjs2s(e,r+u,t+u);for(var s=e.top;s>=r+a;s--)delete e.stack[s];return e.top=r+a,!1;default:var o=void 0;if(n<=a)for(o=0;o<n;o++)D.setobjs2s(e,r+o,t+o);else{for(o=0;o<a;o++)D.setobjs2s(e,r+o,t+o);for(;o<n;o++)r+o>=e.top?e.stack[r+o]=new D.TValue(A,null):e.stack[r+o].setnilvalue()}}for(var l=r+n,i=e.top;i>=l;i--)delete e.stack[i];return e.top=l,!0},oe=function(e,t,r){var a=e.hook;if(a&&e.allowhook){var n=e.ci,u=e.top,s=n.top,o=new E;o.event=t,o.currentline=r,o.i_ci=n,ee(e,_),n.top=e.top+_,M(n.top<=e.stack_last),e.allowhook=0,n.callstatus|=B.CIST_HOOKED,a(e,o),M(!e.allowhook),e.allowhook=1,n.top=s,J(e,u),n.callstatus&=~B.CIST_HOOKED}},le=function(e,t){var r=u;t.l_savedpc++,t.previous.callstatus&B.CIST_LUA&&t.previous.l_code[t.previous.l_savedpc-1].opcode==C.OpCodesI.OP_TAILCALL&&(t.callstatus|=B.CIST_TAIL,r=o),oe(e,r,-1),t.l_savedpc--},ie=function(e,t,r){var a=t.numparams,n=e.top-r,u=e.top,s=void 0;for(s=0;s<a&&s<r;s++)D.pushobj2s(e,e.stack[n+s]),e.stack[n+s].setnilvalue();for(;s<a;s++)e.stack[e.top++]=new D.TValue(A,null);return u},ce=function(e,t,r){var a=j.luaT_gettmbyobj(e,r,j.TMS.TM_CALL);a.ttisfunction(a)||N.luaG_typeerror(e,r,R("call",!0)),D.pushobj2s(e,e.stack[e.top-1]);for(var n=e.top-2;n>t;n--)D.setobjs2s(e,n,n-1);D.setobj2s(e,t,a)},_e=function(e){e.nCcalls===P?N.luaG_runerror(e,R("JS stack overflow",!0)):e.nCcalls>=P+(P>>3)&&pe(e,T)},fe=function(e,t,r){++e.nCcalls>=P&&_e(e),ne(e,t,r)||z.luaV_execute(e),e.nCcalls--},pe=function e(t,r){if(t.errorJmp)throw t.errorJmp.status=r,t.errorJmp;var a=t.l_G;if(t.status=r,!a.mainthread.errorJmp){var n=a.panic;throw n&&(Z(t,r,t.top),t.ci.top<t.top&&(t.ci.top=t.top),n(t)),new Error("Aborted "+r)}a.mainthread.stack[a.mainthread.top++]=t.stack[t.top-1],e(a.mainthread,r)},ve=function(e,t,r){var a=e.nCcalls,n={status:O,previous:e.errorJmp};e.errorJmp=n;try{t(e,r)}catch(t){if(n.status===O){var u=e.l_G.atnativeerror;if(u)try{if(n.status=O,y.lua_pushcfunction(e,u),y.lua_pushlightuserdata(e,t),Ee(e,e.top-2,1),0!==e.errfunc){var s=e.errfunc;D.pushobj2s(e,e.stack[e.top-1]),D.setobjs2s(e,e.top-2,s),Ee(e,e.top-2,1)}n.status=x}catch(e){n.status===O&&(n.status=-1)}else n.status=-1}}return e.errorJmp=n.previous,e.nCcalls=a,n.status},de=function(e,t){var r=e.ci;M(null!==r.c_k&&0===e.nny),M(r.callstatus&B.CIST_YPCALL||t===m),r.callstatus&B.CIST_YPCALL&&(r.callstatus&=~B.CIST_YPCALL,e.errfunc=r.c_old_errfunc),r.nresults===f&&e.ci.top<e.top&&(e.ci.top=e.top);var a=r.c_k,n=a(e,t,r.c_ctx);y.api_checknelems(e,n),ue(e,r,e.top-n,n)},he=function(e,t){for(null!==t&&de(e,t);e.ci!==e.base_ci;)e.ci.callstatus&B.CIST_LUA?(z.luaV_finishOp(e),z.luaV_execute(e)):de(e,m)},Le=function(e){for(var t=e.ci;null!==t;t=t.previous)if(t.callstatus&B.CIST_YPCALL)return t;return null},Ae=function(e,t){var r=Le(e);if(null===r)return 0;var a=r.extra;return S.luaF_close(e,a),Z(e,t,a),e.ci=r,e.allowhook=r.callstatus&B.CIST_OAH,e.nny=0,re(e),e.errfunc=r.c_old_errfunc,1},ge=function(e,t,r){var a=K(e,t);if(0===r)D.pushsvalue2s(e,a),I(e,e.top<=e.ci.top,"stack overflow");else{for(var n=1;n<r;n++)delete e.stack[--e.top];D.setsvalue2s(e,e.top-1,a)}return x},be=function(e,t){var r=e.top-t,a=e.ci;e.status===O?ne(e,r-1,f)||z.luaV_execute(e):(M(e.status===m),e.status=O,a.funcOff=a.extra,a.func=e.stack[a.funcOff],a.callstatus&B.CIST_LUA?z.luaV_execute(e):(null!==a.c_k&&(t=a.c_k(e,m,a.c_ctx),y.api_checknelems(e,t),r=e.top-t),ue(e,a,r,t)),he(e,null))},Te=function(e,t,r){var a=e.nny;if(e.status===O){if(e.ci!==e.base_ci)return ge(e,"cannot resume non-suspended coroutine",r)}else if(e.status!==m)return ge(e,"cannot resume dead coroutine",r);if(e.nCcalls=t?t.nCcalls+1:1,e.nCcalls>=P)return ge(e,"JS stack overflow",r);e.nny=0,y.api_checknelems(e,e.status===O?r+1:r);var n=ve(e,be,r);if(-1===n)n=x;else{for(;n>m&&Ae(e,n);)n=ve(e,he,n);n>m?(e.status=n,Z(e,n,e.top),e.ci.top=e.top):M(n===e.status)}return e.nny=a,e.nCcalls--,M(e.nCcalls===(t?t.nCcalls:0)),n},xe=function(e){return 0===e.nny},ke=function(e,t,r,a){var n=e.ci;return y.api_checknelems(e,t),e.nny>0&&(e!==e.l_G.mainthread?N.luaG_runerror(e,R("attempt to yield across a JS-call boundary",!0)):N.luaG_runerror(e,R("attempt to yield from outside a coroutine",!0))),e.status=m,n.extra=n.funcOff,n.callstatus&B.CIST_LUA?I(e,null===a,"hooks cannot continue after yielding"):(n.c_k=a,null!==a&&(n.c_ctx=r),n.funcOff=e.top-t-1,n.func=e.stack[n.funcOff],pe(e,m)),M(n.callstatus&B.CIST_HOOKED),0},Oe=function(e,t){ke(e,t,0,null)},me=function(e,t,r,a,n){var u=e.ci,s=e.allowhook,o=e.nny,l=e.errfunc;e.errfunc=n;var i=ve(e,t,r);return i!==O&&(S.luaF_close(e,a),Z(e,i,a),e.ci=u,e.allowhook=s,e.nny=o,re(e)),e.errfunc=l,i},Ee=function(e,t,r){e.nny++,fe(e,t,r),e.nny--},Ue=function e(t,r,n){a(this,e),this.z=t,this.buff=new Y,this.dyd=new V.Dyndata,this.mode=n,this.name=r},Re=function(e,t,r){t&&-1===U(t,r[0])&&(D.luaO_pushfstring(e,R("attempt to load a %s chunk (mode is '%s')"),r,t),pe(e,k))},ye=function(e,t){var r=void 0,a=t.z.zgetc();a===p[0]?(Re(e,t.mode,R("binary",!0)),r=X.luaU_undump(e,t.z,t.name)):(Re(e,t.mode,R("text",!0)),r=V.luaY_parser(e,t.z,t.buff,t.dyd,t.name,a)),M(r.nupvalues===r.p.upvalues.length),S.luaF_initupvals(e,r)},Ne=function(e,t,r,a){var n=new Ue(t,r,a);e.nny++;var u=me(e,ye,n,e.top,e.errfunc);return e.nny--,u};e.exports.adjust_top=J,e.exports.luaD_call=fe,e.exports.luaD_callnoyield=Ee,e.exports.luaD_checkstack=ee,e.exports.luaD_growstack=$,e.exports.luaD_hook=oe,e.exports.luaD_inctop=ae,e.exports.luaD_pcall=me,e.exports.luaD_poscall=ue,e.exports.luaD_precall=ne,e.exports.luaD_protectedparser=Ne,e.exports.luaD_rawrunprotected=ve,e.exports.luaD_reallocstack=Q,e.exports.luaD_throw=pe,e.exports.lua_isyieldable=xe,e.exports.lua_resume=Te,e.exports.lua_yield=Oe,e.exports.lua_yieldk=ke},function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=r(0),s=u.constant_types,o=s.LUA_TBOOLEAN,l=s.LUA_TCCL,i=s.LUA_TLCF,c=s.LUA_TLCL,_=s.LUA_TLIGHTUSERDATA,f=s.LUA_TLNGSTR,p=s.LUA_TNIL,v=s.LUA_TNUMFLT,d=s.LUA_TNUMINT,h=s.LUA_TSHRSTR,L=s.LUA_TTABLE,A=s.LUA_TTHREAD,g=s.LUA_TUSERDATA,b=u.to_luastring,T=r(2),x=T.lua_assert,k=r(10),O=r(4),m=r(9),E=m.luaS_hashlongstr,U=m.TString,R=r(11),y=new WeakMap,N=function(e){var t=y.get(e);return t||(t={},y.set(e,t)),t},S=function(e,t){switch(t.type){case p:return k.luaG_runerror(e,b("table index is nil",!0));case v:if(isNaN(t.value))return k.luaG_runerror(e,b("table index is NaN",!0));case d:case o:case L:case c:case i:case l:case g:case A:return t.value;case h:case f:return E(t.tsvalue());case _:var r=t.value;switch(void 0===r?"undefined":n(r)){case"string":return"*"+r;case"number":return"#"+r;case"boolean":return r?"?true":"?false";case"function":return N(r);case"object":if(r instanceof R.lua_State&&r.l_G===e.l_G||r instanceof w||r instanceof O.Udata||r instanceof O.LClosure||r instanceof O.CClosure)return N(r);default:return r}default:throw new Error("unknown key type: "+t.type)}},w=function e(t){a(this,e),this.id=t.l_G.id_counter++,this.strong=new Map,this.dead_strong=new Map,this.dead_weak=void 0,this.f=void 0,this.l=void 0,this.metatable=null,this.flags=-1},I=function(e){e.flags=0},M=function(e,t,r,a){e.dead_strong.clear(),e.dead_weak=void 0;var n=null,u={key:r,value:a,p:n=e.l,n:void 0};e.f||(e.f=u),n&&(n.n=u),e.strong.set(t,u),e.l=u},P=function(e){return"object"===(void 0===e?"undefined":n(e))?null!==e:"function"==typeof e},D=function(e,t){var r=e.strong.get(t);if(r){r.key.setdeadvalue(),r.value=void 0;var a=r.n,n=r.p;r.p=void 0,n&&(n.n=a),a&&(a.p=n),e.f===r&&(e.f=a),e.l===r&&(e.l=n),e.strong.delete(t),P(t)?(e.dead_weak||(e.dead_weak=new WeakMap),e.dead_weak.set(t,r)):e.dead_strong.set(t,r)}},C=function(e){return new w(e)},V=function(e,t){var r=e.strong.get(t);return r?r.value:O.luaO_nilobject},B=function(e,t){return x("number"==typeof t&&(0|t)===t),V(e,t)},G=function(e,t){return x(t instanceof U),V(e,E(t))},K=function(e,t,r){return x(r instanceof O.TValue),r.ttisnil()||r.ttisfloat()&&isNaN(r.value)?O.luaO_nilobject:V(t,S(e,r))},j=function(e,t,r){var a=e.strong.get(t);if(a)return a.value;var n=r.value;r=r.ttisfloat()&&(0|n)===n?new O.TValue(d,n):new O.TValue(r.type,n);var u=new O.TValue(p,null);return M(e,t,r,u),u},F=function(e,t,r){x("number"==typeof t&&(0|t)===t&&r instanceof O.TValue);var a=t;if(r.ttisnil())return void D(e,a);var n=e.strong.get(a);if(n){n.value.setfrom(r)}else{var u=new O.TValue(d,t),s=new O.TValue(r.type,r.value);M(e,a,u,s)}},H=function(e,t,r){x(r instanceof O.TValue);var a=S(e,r);return j(t,a,r)},X=function(e,t,r){x(r instanceof O.TValue);var a=S(e,r);return D(t,a)},z=function(e){for(var t=0,r=e.strong.size+1;r-t>1;){var a=Math.floor((t+r)/2);B(e,a).ttisnil()?r=a:t=a}return t},q=function(e,t,r){var a=e.stack[r],n=void 0;if(a.type===p){if(!(n=t.f))return!1}else{var u=S(e,a);if(n=t.strong.get(u)){if(!(n=n.n))return!1}else{if(!(n=t.dead_weak&&t.dead_weak.get(u)||t.dead_strong.get(u)))return k.luaG_runerror(e,b("invalid key to 'next'"));do{if(!(n=n.n))return!1}while(n.key.ttisdeadkey())}}return O.setobj2s(e,r,n.key),O.setobj2s(e,r+1,n.value),!0};e.exports.invalidateTMcache=I,e.exports.luaH_delete=X,e.exports.luaH_get=K,e.exports.luaH_getint=B,e.exports.luaH_getn=z,e.exports.luaH_getstr=G,e.exports.luaH_set=H,e.exports.luaH_setint=F,e.exports.luaH_new=C,e.exports.luaH_next=q,e.exports.Table=w},function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),u=r(0),s=u.is_luastring,o=u.luastring_eq,l=u.luastring_from,i=u.to_luastring,c=r(2),_=c.lua_assert,f=function(){function e(t,r){a(this,e),this.hash=null,this.realstring=r}return n(e,[{key:"getstr",value:function(){return this.realstring}},{key:"tsslen",value:function(){return this.realstring.length}}]),e}(),p=function(e,t){return _(e instanceof f),_(t instanceof f),e==t||o(e.realstring,t.realstring)},v=function(e){_(s(e));for(var t=e.length,r="|",a=0;a<t;a++)r+=e[a].toString(16);return r},d=function(e){return _(e instanceof f),null===e.hash&&(e.hash=v(e.getstr())),e.hash},h=function(e,t){return _(t instanceof Uint8Array),new f(e,t)},L=function(e,t){return h(e,l(t))},A=function(e,t){return h(e,i(t))};e.exports.luaS_eqlngstr=p,e.exports.luaS_hash=v,e.exports.luaS_hashlongstr=d,e.exports.luaS_bless=h,e.exports.luaS_new=L,e.exports.luaS_newliteral=A,e.exports.TString=f},function(e,t,r){"use strict";var a=r(0),n=a.LUA_HOOKCOUNT,u=a.LUA_HOOKLINE,s=a.LUA_MASKCOUNT,o=a.LUA_MASKLINE,l=a.constant_types,i=l.LUA_TBOOLEAN,c=l.LUA_TNIL,_=l.LUA_TTABLE,f=a.thread_status,p=f.LUA_ERRRUN,v=f.LUA_YIELD,d=a.from_userstring,h=a.luastring_eq,L=a.luastring_indexOf,A=a.to_luastring,g=r(2),b=g.api_check,T=g.lua_assert,x=r(5),k=x.LUA_IDSIZE,O=r(17),m=r(7),E=r(12),U=r(20),R=r(4),y=r(15),N=r(11),S=r(8),w=r(13),I=r(14),M=function(e){return T(e.callstatus&N.CIST_LUA),e.l_savedpc-1},P=function(e){return 0!==e.func.value.p.lineinfo.length?e.func.value.p.lineinfo[M(e)]:-1},D=function(e){if(e.status===v){var t=e.ci,r=t.funcOff;t.func=e.stack[t.extra],t.funcOff=t.extra,t.extra=r}},C=function(e,t,r,a){null!==t&&0!==r||(r=0,t=null),e.ci.callstatus&N.CIST_LUA&&(e.oldpc=e.ci.l_savedpc),e.hook=t,e.basehookcount=a,e.hookcount=e.basehookcount,e.hookmask=r},V=function(e){return e.hook},B=function(e){return e.hookmask},G=function(e){return e.basehookcount},K=function(e,t,r){var a=void 0,n=void 0;if(t<0)return 0;for(a=e.ci;t>0&&a!==e.base_ci;a=a.previous)t--;return 0===t&&a!==e.base_ci?(n=1,r.i_ci=a):n=0,n},j=function(e,t){T(t<e.upvalues.length);var r=e.upvalues[t].name;return null===r?A("?",!0):r.getstr()},F=function(e,t){var r=e.func.value.p.numparams;return t>=e.l_base-e.funcOff-r?null:{pos:e.funcOff+r+t,name:A("(*vararg)",!0)}},H=function(e,t,r){var a=void 0,n=null;if(t.callstatus&N.CIST_LUA){if(r<0)return F(t,-r);a=t.l_base,n=E.luaF_getlocalname(t.func.value.p,r,M(t))}else a=t.funcOff+1;if(null===n){if(!((t===e.ci?e.top:t.next.funcOff)-a>=r&&r>0))return null;n=A("(*temporary)",!0)}return{pos:a+(r-1),name:n}},X=function(e,t,r){var a=void 0;if(D(e),null===t)a=e.stack[e.top-1].ttisLclosure()?E.luaF_getlocalname(e.stack[e.top-1].value.p,r,0):null;else{var n=H(e,t.i_ci,r);n?(a=n.name,R.pushobj2s(e,e.stack[n.pos]),b(e,e.top<=e.ci.top,"stack overflow")):a=null}return D(e),a},z=function(e,t,r){var a=void 0;D(e);var n=H(e,t.i_ci,r);return n?(a=n.name,R.setobjs2s(e,n.pos,e.top-1),delete e.stack[--e.top]):a=null,D(e),a},q=function(e,t){if(null===t||t instanceof R.CClosure)e.source=A("=[JS]",!0),e.linedefined=-1,e.lastlinedefined=-1,e.what=A("J",!0);else{var r=t.p;e.source=r.source?r.source.getstr():A("=?",!0),e.linedefined=r.linedefined,e.lastlinedefined=r.lastlinedefined,e.what=0===e.linedefined?A("main",!0):A("Lua",!0)}e.short_src=R.luaO_chunkid(e.source,k)},Y=function(e,t){if(null===t||t instanceof R.CClosure)e.stack[e.top]=new R.TValue(c,null),O.api_incr_top(e);else{var r=t.p.lineinfo,a=S.luaH_new(e);e.stack[e.top]=new R.TValue(_,a),O.api_incr_top(e);for(var n=new R.TValue(i,!0),u=0;u<r.length;u++)S.luaH_setint(a,r[u],n)}},J=function(e,t){var r={name:null,funcname:null};return null===t?null:t.callstatus&N.CIST_FIN?(r.name=A("__gc",!0),r.funcname=A("metamethod",!0),r):!(t.callstatus&N.CIST_TAIL)&&t.previous.callstatus&N.CIST_LUA?re(e,t.previous):null},Z=function(e,t,r,a,n){for(var u=1;t.length>0;t=t.subarray(1))switch(t[0]){case 83:q(r,a);break;case 108:r.currentline=n&&n.callstatus&N.CIST_LUA?P(n):-1;break;case 117:r.nups=null===a?0:a.nupvalues,null===a||a instanceof R.CClosure?(r.isvararg=!0,r.nparams=0):(r.isvararg=a.p.is_vararg,r.nparams=a.p.numparams);break;case 116:r.istailcall=n?n.callstatus&N.CIST_TAIL:0;break;case 110:var s=J(e,n);null===s?(r.namewhat=A("",!0),r.name=null):(r.namewhat=s.funcname,r.name=s.name);break;case 76:case 102:break;default:u=0}return u},W=function(e,t,r){t=d(t);var a=void 0,n=void 0,u=void 0,s=void 0;return D(e),62===t[0]?(u=null,s=e.stack[e.top-1],b(e,s.ttisfunction(),"function expected"),t=t.subarray(1),e.top--):(u=r.i_ci,s=u.func,T(u.func.ttisfunction())),n=s.ttisclosure()?s.value:null,a=Z(e,t,r,n,u),L(t,102)>=0&&(R.pushobj2s(e,s),b(e,e.top<=e.ci.top,"stack overflow")),D(e),L(t,76)>=0&&Y(e,n),a},Q=function(e,t,r){var a={name:null,funcname:null};if(y.ISK(r)){var n=e.k[y.INDEXK(r)];if(n.ttisstring())return a.name=n.svalue(),a}else{var u=te(e,t,r);if(u&&99===u.funcname[0])return u}return a.name=A("?",!0),a},$=function(e,t){return e<t?-1:e},ee=function(e,t,r){for(var a=-1,n=0,u=y.OpCodesI,s=0;s<t;s++){var o=e.code[s],l=o.A;switch(o.opcode){case u.OP_LOADNIL:var i=o.B;l<=r&&r<=l+i&&(a=$(s,n));break;case u.OP_TFORCALL:r>=l+2&&(a=$(s,n));break;case u.OP_CALL:case u.OP_TAILCALL:r>=l&&(a=$(s,n));break;case u.OP_JMP:var c=o.sBx,_=s+1+c;s<_&&_<=t&&_>n&&(n=_);break;default:y.testAMode(o.opcode)&&r===l&&(a=$(s,n))}}return a},te=function e(t,r,a){var n={name:E.luaF_getlocalname(t,a+1,r),funcname:null};if(n.name)return n.funcname=A("local",!0),n;var u=ee(t,r,a),s=y.OpCodesI;if(-1!==u){var o=t.code[u];switch(o.opcode){case s.OP_MOVE:var l=o.B;if(l<o.A)return e(t,u,l);break;case s.OP_GETTABUP:case s.OP_GETTABLE:var i=o.C,c=o.B,_=o.opcode===s.OP_GETTABLE?E.luaF_getlocalname(t,c+1,u):j(t,c);return n.name=Q(t,u,i).name,n.funcname=_&&h(_,U.LUA_ENV)?A("global",!0):A("field",!0),n;case s.OP_GETUPVAL:return n.name=j(t,o.B),n.funcname=A("upvalue",!0),n;case s.OP_LOADK:case s.OP_LOADKX:var f=o.opcode===s.OP_LOADK?o.Bx:t.code[u+1].Ax;if(t.k[f].ttisstring())return n.name=t.k[f].svalue(),n.funcname=A("constant",!0),n;break;case s.OP_SELF:var p=o.C;return n.name=Q(t,u,p).name,n.funcname=A("method",!0),n}}return null},re=function(e,t){var r={name:null,funcname:null},a=0,n=t.func.value.p,u=M(t),s=n.code[u],o=y.OpCodesI;if(t.callstatus&N.CIST_HOOKED)return r.name=A("?",!0),r.funcname=A("hook",!0),r;switch(s.opcode){case o.OP_CALL:case o.OP_TAILCALL:return te(n,u,s.A);case o.OP_TFORCALL:return r.name=A("for iterator",!0),r.funcname=A("for iterator",!0),r;case o.OP_SELF:case o.OP_GETTABUP:case o.OP_GETTABLE:a=w.TMS.TM_INDEX;break;case o.OP_SETTABUP:case o.OP_SETTABLE:a=w.TMS.TM_NEWINDEX;break;case o.OP_ADD:a=w.TMS.TM_ADD;break;case o.OP_SUB:a=w.TMS.TM_SUB;break;case o.OP_MUL:a=w.TMS.TM_MUL;break;case o.OP_MOD:a=w.TMS.TM_MOD;break;case o.OP_POW:a=w.TMS.TM_POW;break;case o.OP_DIV:a=w.TMS.TM_DIV;break;case o.OP_IDIV:a=w.TMS.TM_IDIV;break;case o.OP_BAND:a=w.TMS.TM_BAND;break;case o.OP_BOR:a=w.TMS.TM_BOR;break;case o.OP_BXOR:a=w.TMS.TM_BXOR;break;case o.OP_SHL:a=w.TMS.TM_SHL;break;case o.OP_SHR:a=w.TMS.TM_SHR;break;case o.OP_UNM:a=w.TMS.TM_UNM;break;case o.OP_BNOT:a=w.TMS.TM_BNOT;break;case o.OP_LEN:a=w.TMS.TM_LEN;break;case o.OP_CONCAT:a=w.TMS.TM_CONCAT;break;case o.OP_EQ:a=w.TMS.TM_EQ;break;case o.OP_LT:a=w.TMS.TM_LT;break;case o.OP_LE:a=w.TMS.TM_LE;break;default:return null}return r.name=e.l_G.tmname[a].getstr(),r.funcname=A("metamethod",!0),r},ae=function(e,t,r){for(var a=t.l_base;a<t.top;a++)if(e.stack[a]===r)return a;return!1},ne=function(e,t,r){for(var a=t.func.value,n=0;n<a.nupvalues;n++)if(a.upvals[n]===r)return{name:j(a.p,n),funcname:A("upvalue",!0)};return null},ue=function(e,t){var r=e.ci,a=null;if(r.callstatus&N.CIST_LUA){a=ne(0,r,t);var n=ae(e,r,t);!a&&n&&(a=te(r.func.value.p,M(r),n-r.l_base))}return a?R.luaO_pushfstring(e,A(" (%s '%s')",!0),a.funcname,a.name):A("",!0)},se=function(e,t,r){var a=w.luaT_objtypename(e,t);_e(e,A("attempt to %s a %s value%s",!0),r,a,ue(e,t))},oe=function(e,t,r){(t.ttisstring()||I.cvt2str(t))&&(t=r),se(e,t,A("concatenate",!0))},le=function(e,t,r,a){!1===I.tonumber(t)&&(r=t),se(e,r,a)},ie=function(e,t,r){var a=w.luaT_objtypename(e,t),n=w.luaT_objtypename(e,r);h(a,n)?_e(e,A("attempt to compare two %s values",!0),a):_e(e,A("attempt to compare %s with %s",!0),a,n)},ce=function(e,t,r,a){var n=void 0;return n=r?R.luaO_chunkid(r.getstr(),k):A("?",!0),R.luaO_pushfstring(e,A("%s:%d: %s",!0),n,a,t)},_e=function(e,t){for(var r=e.ci,a=arguments.length,n=Array(a>2?a-2:0),u=2;u<a;u++)n[u-2]=arguments[u];var s=R.luaO_pushvfstring(e,t,n);r.callstatus&N.CIST_LUA&&ce(e,s,r.func.value.p.source,P(r)),fe(e)},fe=function(e){if(0!==e.errfunc){var t=e.errfunc;R.pushobj2s(e,e.stack[e.top-1]),R.setobjs2s(e,e.top-2,t),m.luaD_callnoyield(e,e.top-2,1)}m.luaD_throw(e,p)},pe=function(e,t,r){!1===I.tointeger(t)&&(r=t),_e(e,A("number%s has no integer representation",!0),ue(e,r))},ve=function(e){var t=e.ci,r=e.hookmask,a=0==--e.hookcount&&r&s;if(a)e.hookcount=e.basehookcount;else if(!(r&o))return;if(t.callstatus&N.CIST_HOOKYIELD)return void(t.callstatus&=~N.CIST_HOOKYIELD);if(a&&m.luaD_hook(e,n,-1),r&o){var l=t.func.value.p,i=t.l_savedpc-1,c=0!==l.lineinfo.length?l.lineinfo[i]:-1;(0===i||t.l_savedpc<=e.oldpc||c!==(0!==l.lineinfo.length?l.lineinfo[e.oldpc-1]:-1))&&m.luaD_hook(e,u,c)}e.oldpc=t.l_savedpc,e.status===v&&(a&&(e.hookcount=1),t.l_savedpc--,t.callstatus|=N.CIST_HOOKYIELD,t.funcOff=e.top-1,t.func=e.stack[t.funcOff],m.luaD_throw(e,v))};e.exports.luaG_addinfo=ce,e.exports.luaG_concaterror=oe,e.exports.luaG_errormsg=fe,e.exports.luaG_opinterror=le,e.exports.luaG_ordererror=ie,e.exports.luaG_runerror=_e,e.exports.luaG_tointerror=pe,e.exports.luaG_traceexec=ve,e.exports.luaG_typeerror=se,e.exports.lua_gethook=V,e.exports.lua_gethookcount=G,e.exports.lua_gethookmask=B,e.exports.lua_getinfo=W,e.exports.lua_getlocal=X,e.exports.lua_getstack=K,e.exports.lua_sethook=C,e.exports.lua_setlocal=z},function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=r(0),u=n.LUA_MINSTACK,s=n.LUA_RIDX_GLOBALS,o=n.LUA_RIDX_MAINTHREAD,l=n.constant_types,i=l.LUA_NUMTAGS,c=l.LUA_TNIL,_=l.LUA_TTABLE,f=l.LUA_TTHREAD,p=n.thread_status.LUA_OK,v=r(4),d=r(7),h=r(17),L=r(8),A=r(13),g=2*u,b=function e(){a(this,e),this.func=null,this.funcOff=NaN,this.top=NaN,this.previous=null,this.next=null,this.l_base=NaN,this.l_code=null,this.l_savedpc=NaN,this.c_k=null,this.c_old_errfunc=null,this.c_ctx=null,this.nresults=NaN,this.callstatus=NaN},T=function e(t){a(this,e),this.id=t.id_counter++,this.base_ci=new b,this.top=NaN,this.stack_last=NaN,this.oldpc=NaN,this.l_G=t,this.stack=null,this.ci=null,this.errorJmp=null,this.nCcalls=0,this.hook=null,this.hookmask=0,this.basehookcount=0,this.allowhook=1,this.hookcount=this.basehookcount,this.nny=1,this.status=p,this.errfunc=0},x=function e(){a(this,e),this.id_counter=0,this.ids=new WeakMap,this.mainthread=null,this.l_registry=new v.TValue(c,null),this.panic=null,this.atnativeerror=null,this.version=null,this.tmname=new Array(A.TMS.TM_N),this.mt=new Array(i)},k=function(e){var t=new b;return e.ci.next=t,t.previous=e.ci,t.next=null,e.ci=t,t},O=function(e){e.ci.next=null},m=function(e,t){e.stack=new Array(g),e.top=0,e.stack_last=g-5;var r=e.base_ci;r.next=r.previous=null,r.callstatus=0,r.funcOff=e.top,r.func=e.stack[e.top],e.stack[e.top++]=new v.TValue(c,null),r.top=e.top+u,e.ci=r},E=function(e){e.ci=e.base_ci,O(e),e.stack=null},U=function(e,t){var r=L.luaH_new(e);t.l_registry.sethvalue(r),L.luaH_setint(r,o,new v.TValue(f,e)),L.luaH_setint(r,s,new v.TValue(_,L.luaH_new(e)))},R=function(e){var t=e.l_G;m(e),U(e,t),A.luaT_init(e),t.version=h.lua_version(null)},y=function(e){var t=e.l_G,r=new T(t);return e.stack[e.top]=new v.TValue(f,r),h.api_incr_top(e),r.hookmask=e.hookmask,r.basehookcount=e.basehookcount,r.hook=e.hook,r.hookcount=r.basehookcount,m(r),r},N=function(e,t){E(t)},S=function(){var e=new x,t=new T(e);return e.mainthread=t,d.luaD_rawrunprotected(t,R,null)!==p&&(t=null),t},w=function(e){E(e)},I=function(e){e=e.l_G.mainthread,w(e)};e.exports.lua_State=T,e.exports.CallInfo=b,e.exports.CIST_OAH=1,e.exports.CIST_LUA=2,e.exports.CIST_HOOKED=4,e.exports.CIST_FRESH=8,e.exports.CIST_YPCALL=16,e.exports.CIST_TAIL=32,e.exports.CIST_HOOKYIELD=64,e.exports.CIST_LEQ=128,e.exports.CIST_FIN=256,e.exports.EXTRA_STACK=5,e.exports.lua_close=I,e.exports.lua_newstate=S,e.exports.lua_newthread=y,e.exports.luaE_extendCI=k,e.exports.luaE_freeCI=O,e.exports.luaE_freethread=N},function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=r(0),u=n.constant_types.LUA_TNIL,s=r(4),o=function e(t){a(this,e),this.id=t.l_G.id_counter++,this.k=[],this.p=[],this.code=[],this.cache=null,this.lineinfo=[],this.upvalues=[],this.numparams=0,this.is_vararg=!1,this.maxstacksize=0,this.locvars=[],this.linedefined=0,this.lastlinedefined=0,this.source=null},l=function(e,t){return new s.LClosure(e,t)},i=function(e,t){return e.stack[t]},c=function(e,t){for(var r=t;r<e.top;r++){var a=e.stack[r];e.stack[r]=new s.TValue(a.type,a.value)}},_=function(e,t){for(var r=0;r<t.nupvalues;r++)t.upvals[r]=new s.TValue(u,null)},f=function(e,t,r){for(var a=0;a<e.locvars.length&&e.locvars[a].startpc<=r;a++)if(r<e.locvars[a].endpc&&0===--t)return e.locvars[a].varname.getstr();return null};e.exports.MAXUPVAL=255,e.exports.Proto=o,e.exports.luaF_findupval=i,e.exports.luaF_close=c,e.exports.luaF_getlocalname=f,e.exports.luaF_initupvals=_,e.exports.luaF_newLclosure=l},function(e,t,r){"use strict";var a=r(0),n=a.constant_types,u=n.LUA_TTABLE,s=n.LUA_TUSERDATA,o=a.to_luastring,l=r(2),i=l.lua_assert,c=r(4),_=r(7),f=r(11),p=r(9),v=p.luaS_bless,d=p.luaS_new,h=r(8),L=r(10),A=r(14),g=["no value","nil","boolean","userdata","number","string","table","function","userdata","thread","proto"].map(function(e){return o(e)}),b=function(e){return g[e+1]},T={TM_INDEX:0,TM_NEWINDEX:1,TM_GC:2,TM_MODE:3,TM_LEN:4,TM_EQ:5,TM_ADD:6,TM_SUB:7,TM_MUL:8,TM_MOD:9,TM_POW:10,TM_DIV:11,TM_IDIV:12,TM_BAND:13,TM_BOR:14,TM_BXOR:15,TM_SHL:16,TM_SHR:17,TM_UNM:18,TM_BNOT:19,TM_LT:20,TM_LE:21,TM_CONCAT:22,TM_CALL:23,TM_N:24},x=function(e){e.l_G.tmname[T.TM_INDEX]=new d(e,o("__index",!0)),e.l_G.tmname[T.TM_NEWINDEX]=new d(e,o("__newindex",!0)),e.l_G.tmname[T.TM_GC]=new d(e,o("__gc",!0)),e.l_G.tmname[T.TM_MODE]=new d(e,o("__mode",!0)),e.l_G.tmname[T.TM_LEN]=new d(e,o("__len",!0)),e.l_G.tmname[T.TM_EQ]=new d(e,o("__eq",!0)),e.l_G.tmname[T.TM_ADD]=new d(e,o("__add",!0)),e.l_G.tmname[T.TM_SUB]=new d(e,o("__sub",!0)),e.l_G.tmname[T.TM_MUL]=new d(e,o("__mul",!0)),e.l_G.tmname[T.TM_MOD]=new d(e,o("__mod",!0)),e.l_G.tmname[T.TM_POW]=new d(e,o("__pow",!0)),e.l_G.tmname[T.TM_DIV]=new d(e,o("__div",!0)),e.l_G.tmname[T.TM_IDIV]=new d(e,o("__idiv",!0)),e.l_G.tmname[T.TM_BAND]=new d(e,o("__band",!0)),e.l_G.tmname[T.TM_BOR]=new d(e,o("__bor",!0)),e.l_G.tmname[T.TM_BXOR]=new d(e,o("__bxor",!0)),e.l_G.tmname[T.TM_SHL]=new d(e,o("__shl",!0)),e.l_G.tmname[T.TM_SHR]=new d(e,o("__shr",!0)),e.l_G.tmname[T.TM_UNM]=new d(e,o("__unm",!0)),e.l_G.tmname[T.TM_BNOT]=new d(e,o("__bnot",!0)),e.l_G.tmname[T.TM_LT]=new d(e,o("__lt",!0)),e.l_G.tmname[T.TM_LE]=new d(e,o("__le",!0)),e.l_G.tmname[T.TM_CONCAT]=new d(e,o("__concat",!0)),e.l_G.tmname[T.TM_CALL]=new d(e,o("__call",!0))},k=o("__name",!0),O=function(e,t){var r=void 0;if(t.ttistable()&&null!==(r=t.value.metatable)||t.ttisfulluserdata()&&null!==(r=t.value.metatable)){var a=h.luaH_getstr(r,v(e,k));if(a.ttisstring())return a.svalue()}return b(t.ttnov())},m=function(e,t,r,a,n,u){var s=e.top;if(c.pushobj2s(e,t),c.pushobj2s(e,r),c.pushobj2s(e,a),u||c.pushobj2s(e,n),e.ci.callstatus&f.CIST_LUA?_.luaD_call(e,s,u):_.luaD_callnoyield(e,s,u),u){var o=e.stack[e.top-1];delete e.stack[--e.top],n.setfrom(o)}},E=function(e,t,r,a,n){var u=S(e,t,n);return u.ttisnil()&&(u=S(e,r,n)),!u.ttisnil()&&(m(e,u,t,r,a,1),!0)},U=function(e,t,r,a,n){if(!E(e,t,r,a,n))switch(n){case T.TM_CONCAT:return L.luaG_concaterror(e,t,r);case T.TM_BAND:case T.TM_BOR:case T.TM_BXOR:case T.TM_SHL:case T.TM_SHR:case T.TM_BNOT:var u=A.tonumber(t),s=A.tonumber(r);return!1!==u&&!1!==s?L.luaG_tointerror(e,t,r):L.luaG_opinterror(e,t,r,o("perform bitwise operation on",!0));default:return L.luaG_opinterror(e,t,r,o("perform arithmetic on",!0))}},R=function(e,t,r,a){var n=new c.TValue;return E(e,t,r,n,a)?!n.l_isfalse():null},y=function(e,t,r){return null===t?null:t.flags&1<<r?null:N(t,r,e.l_G.tmname[r])},N=function(e,t,r){var a=h.luaH_getstr(e,r);return i(t<=T.TM_EQ),a.ttisnil()?(e.flags|=1<<t,null):a},S=function(e,t,r){var a=void 0;switch(t.ttnov()){case u:case s:a=t.value.metatable;break;default:a=e.l_G.mt[t.ttnov()]}return a?h.luaH_getstr(a,e.l_G.tmname[r]):c.luaO_nilobject};e.exports.fasttm=y,e.exports.TMS=T,e.exports.luaT_callTM=m,e.exports.luaT_callbinTM=E,e.exports.luaT_trybinTM=U,e.exports.luaT_callorderTM=R,e.exports.luaT_gettm=N,e.exports.luaT_gettmbyobj=S,e.exports.luaT_init=x,e.exports.luaT_objtypename=O,e.exports.ttypename=b},function(e,t,r){"use strict";var a=r(0),n=a.LUA_MASKLINE,u=a.LUA_MASKCOUNT,s=a.LUA_MULTRET,o=a.constant_types,l=o.LUA_TBOOLEAN,i=o.LUA_TLCF,c=o.LUA_TLIGHTUSERDATA,_=o.LUA_TLNGSTR,f=o.LUA_TNIL,p=o.LUA_TNUMBER,v=o.LUA_TNUMFLT,d=o.LUA_TNUMINT,h=o.LUA_TSHRSTR,L=o.LUA_TTABLE,A=o.LUA_TUSERDATA,g=a.to_luastring,b=r(15),T=b.INDEXK,x=b.ISK,k=b.LFIELDS_PER_FLUSH,O=b.OpCodesI,m=O.OP_ADD,E=O.OP_BAND,U=O.OP_BNOT,R=O.OP_BOR,y=O.OP_BXOR,N=O.OP_CALL,S=O.OP_CLOSURE,w=O.OP_CONCAT,I=O.OP_DIV,M=O.OP_EQ,P=O.OP_EXTRAARG,D=O.OP_FORLOOP,C=O.OP_FORPREP,V=O.OP_GETTABLE,B=O.OP_GETTABUP,G=O.OP_GETUPVAL,K=O.OP_IDIV,j=O.OP_JMP,F=O.OP_LE,H=O.OP_LEN,X=O.OP_LOADBOOL,z=O.OP_LOADK,q=O.OP_LOADKX,Y=O.OP_LOADNIL,J=O.OP_LT,Z=O.OP_MOD,W=O.OP_MOVE,Q=O.OP_MUL,$=O.OP_NEWTABLE,ee=O.OP_NOT,te=O.OP_POW,re=O.OP_RETURN,ae=O.OP_SELF,ne=O.OP_SETLIST,ue=O.OP_SETTABLE,se=O.OP_SETTABUP,oe=O.OP_SETUPVAL,le=O.OP_SHL,ie=O.OP_SHR,ce=O.OP_SUB,_e=O.OP_TAILCALL,fe=O.OP_TEST,pe=O.OP_TESTSET,ve=O.OP_TFORCALL,de=O.OP_TFORLOOP,he=O.OP_UNM,Le=O.OP_VARARG,Ae=r(5),ge=Ae.LUA_MAXINTEGER,be=Ae.LUA_MININTEGER,Te=Ae.lua_numbertointeger,xe=r(2),ke=xe.lua_assert,Oe=xe.luai_nummod,me=r(4),Ee=r(12),Ue=r(11),Re=r(9),ye=Re.luaS_bless,Ne=Re.luaS_eqlngstr,Se=Re.luaS_hashlongstr,we=r(7),Ie=r(13),Me=r(8),Pe=r(10),De=function(e){var t=e.ci,r=t.l_base,a=t.l_code[t.l_savedpc-1],n=a.opcode;switch(n){case m:case ce:case Q:case I:case K:case E:case R:case y:case le:case ie:case Z:case te:case he:case U:case H:case B:case V:case ae:me.setobjs2s(e,r+a.A,e.top-1),delete e.stack[--e.top];break;case F:case J:case M:var u=!e.stack[e.top-1].l_isfalse();delete e.stack[--e.top],t.callstatus&Ue.CIST_LEQ&&(ke(n===F),t.callstatus^=Ue.CIST_LEQ,u=!u),ke(t.l_code[t.l_savedpc].opcode===j),u!==!!a.A&&t.l_savedpc++;break;case w:var s=e.top-1,o=a.B,l=s-1-(r+o);me.setobjs2s(e,s-2,s),l>1&&(e.top=s-1,pt(e,l)),me.setobjs2s(e,t.l_base+a.A,e.top-1),we.adjust_top(e,t.top);break;case ve:ke(t.l_code[t.l_savedpc].opcode===de),we.adjust_top(e,t.top);break;case N:a.C-1>=0&&we.adjust_top(e,t.top)}},Ce=function(e,t,r){return t+r.A},Ve=function(e,t,r){return t+r.B},Be=function(e,t,r,a){return x(a.B)?r[T(a.B)]:e.stack[t+a.B]},Ge=function(e,t,r,a){return x(a.C)?r[T(a.C)]:e.stack[t+a.C]},Ke=function(e){var t=e.ci;t.callstatus|=Ue.CIST_FRESH;e:for(;;){ke(t===e.ci);var r=t.func.value,a=r.p.k,o=t.l_base,l=t.l_code[t.l_savedpc++];e.hookmask&(n|u)&&Pe.luaG_traceexec(e);var i=Ce(0,o,l),c=l.opcode;switch(c){case W:me.setobjs2s(e,i,Ve(0,o,l));break;case z:var _=a[l.Bx];me.setobj2s(e,i,_);break;case q:ke(t.l_code[t.l_savedpc].opcode===P);var f=a[t.l_code[t.l_savedpc++].Ax];me.setobj2s(e,i,f);break;case X:e.stack[i].setbvalue(0!==l.B),0!==l.C&&t.l_savedpc++;break;case Y:for(var p=0;p<=l.B;p++)e.stack[i+p].setnilvalue();break;case G:var v=l.B;me.setobj2s(e,i,r.upvals[v]);break;case B:var d=r.upvals[l.B],h=Ge(e,o,a,l);vt(e,d,h,i);break;case V:var L=e.stack[Ve(0,o,l)],A=Ge(e,o,a,l);vt(e,L,A,i);break;case se:var b=r.upvals[l.A],T=Be(e,o,a,l),x=Ge(e,o,a,l);dt(e,b,T,x);break;case oe:var O=r.upvals[l.B];O.setfrom(e.stack[i]);break;case ue:var Ae=e.stack[i],ge=Be(e,o,a,l),be=Ge(e,o,a,l);dt(e,Ae,ge,be);break;case $:e.stack[i].sethvalue(Me.luaH_new(e));break;case ae:var Te=Ve(0,o,l),xe=Ge(e,o,a,l);me.setobjs2s(e,i+1,Te),vt(e,e.stack[Te],xe,i);break;case m:var Re=Be(e,o,a,l),ye=Ge(e,o,a,l),Ne=void 0,Se=void 0;Re.ttisinteger()&&ye.ttisinteger()?e.stack[i].setivalue(Re.value+ye.value|0):!1!==(Ne=We(Re))&&!1!==(Se=We(ye))?e.stack[i].setfltvalue(Ne+Se):Ie.luaT_trybinTM(e,Re,ye,e.stack[i],Ie.TMS.TM_ADD);break;case ce:var De=Be(e,o,a,l),Ke=Ge(e,o,a,l),qe=void 0,Je=void 0;De.ttisinteger()&&Ke.ttisinteger()?e.stack[i].setivalue(De.value-Ke.value|0):!1!==(qe=We(De))&&!1!==(Je=We(Ke))?e.stack[i].setfltvalue(qe-Je):Ie.luaT_trybinTM(e,De,Ke,e.stack[i],Ie.TMS.TM_SUB);break;case Q:var Qe=Be(e,o,a,l),$e=Ge(e,o,a,l),et=void 0,lt=void 0;Qe.ttisinteger()&&$e.ttisinteger()?e.stack[i].setivalue(rt(Qe.value,$e.value)):!1!==(et=We(Qe))&&!1!==(lt=We($e))?e.stack[i].setfltvalue(et*lt):Ie.luaT_trybinTM(e,Qe,$e,e.stack[i],Ie.TMS.TM_MUL);break;case Z:var it=Be(e,o,a,l),ct=Ge(e,o,a,l),_t=void 0,ft=void 0;it.ttisinteger()&&ct.ttisinteger()?e.stack[i].setivalue(nt(e,it.value,ct.value)):!1!==(_t=We(it))&&!1!==(ft=We(ct))?e.stack[i].setfltvalue(Oe(e,_t,ft)):Ie.luaT_trybinTM(e,it,ct,e.stack[i],Ie.TMS.TM_MOD);break;case te:var ht=Be(e,o,a,l),Lt=Ge(e,o,a,l),At=void 0,gt=void 0;!1!==(At=We(ht))&&!1!==(gt=We(Lt))?e.stack[i].setfltvalue(Math.pow(At,gt)):Ie.luaT_trybinTM(e,ht,Lt,e.stack[i],Ie.TMS.TM_POW);break;case I:var bt=Be(e,o,a,l),Tt=Ge(e,o,a,l),xt=void 0,kt=void 0;!1!==(xt=We(bt))&&!1!==(kt=We(Tt))?e.stack[i].setfltvalue(xt/kt):Ie.luaT_trybinTM(e,bt,Tt,e.stack[i],Ie.TMS.TM_DIV);break;case K:var Ot=Be(e,o,a,l),mt=Ge(e,o,a,l),Et=void 0,Ut=void 0;Ot.ttisinteger()&&mt.ttisinteger()?e.stack[i].setivalue(at(e,Ot.value,mt.value)):!1!==(Et=We(Ot))&&!1!==(Ut=We(mt))?e.stack[i].setfltvalue(Math.floor(Et/Ut)):Ie.luaT_trybinTM(e,Ot,mt,e.stack[i],Ie.TMS.TM_IDIV);break;case E:var Rt=Be(e,o,a,l),yt=Ge(e,o,a,l),Nt=void 0,St=void 0;!1!==(Nt=Ze(Rt))&&!1!==(St=Ze(yt))?e.stack[i].setivalue(Nt&St):Ie.luaT_trybinTM(e,Rt,yt,e.stack[i],Ie.TMS.TM_BAND);break;case R:var wt=Be(e,o,a,l),It=Ge(e,o,a,l),Mt=void 0,Pt=void 0;!1!==(Mt=Ze(wt))&&!1!==(Pt=Ze(It))?e.stack[i].setivalue(Mt|Pt):Ie.luaT_trybinTM(e,wt,It,e.stack[i],Ie.TMS.TM_BOR);break;case y:var Dt=Be(e,o,a,l),Ct=Ge(e,o,a,l),Vt=void 0,Bt=void 0;!1!==(Vt=Ze(Dt))&&!1!==(Bt=Ze(Ct))?e.stack[i].setivalue(Vt^Bt):Ie.luaT_trybinTM(e,Dt,Ct,e.stack[i],Ie.TMS.TM_BXOR);break;case le:var Gt=Be(e,o,a,l),Kt=Ge(e,o,a,l),jt=void 0,Ft=void 0;!1!==(jt=Ze(Gt))&&!1!==(Ft=Ze(Kt))?e.stack[i].setivalue(ut(jt,Ft)):Ie.luaT_trybinTM(e,Gt,Kt,e.stack[i],Ie.TMS.TM_SHL);break;case ie:var Ht=Be(e,o,a,l),Xt=Ge(e,o,a,l),zt=void 0,qt=void 0;!1!==(zt=Ze(Ht))&&!1!==(qt=Ze(Xt))?e.stack[i].setivalue(ut(zt,-qt)):Ie.luaT_trybinTM(e,Ht,Xt,e.stack[i],Ie.TMS.TM_SHR);break;case he:var Yt=e.stack[Ve(0,o,l)],Jt=void 0;Yt.ttisinteger()?e.stack[i].setivalue(0|-Yt.value):!1!==(Jt=We(Yt))?e.stack[i].setfltvalue(-Jt):Ie.luaT_trybinTM(e,Yt,Yt,e.stack[i],Ie.TMS.TM_UNM);break;case U:var Zt=e.stack[Ve(0,o,l)];Zt.ttisinteger()?e.stack[i].setivalue(~Zt.value):Ie.luaT_trybinTM(e,Zt,Zt,e.stack[i],Ie.TMS.TM_BNOT);break;case ee:var Wt=e.stack[Ve(0,o,l)];e.stack[i].setbvalue(Wt.l_isfalse());break;case H:tt(e,e.stack[i],e.stack[Ve(0,o,l)]);break;case w:var Qt=l.B,$t=l.C;e.top=o+$t+1,pt(e,$t-Qt+1);var er=o+Qt;me.setobjs2s(e,i,er),we.adjust_top(e,t.top);break;case j:je(e,t,l,0);break;case M:ze(e,Be(e,o,a,l),Ge(e,o,a,l))!==l.A?t.l_savedpc++:Fe(e,t);break;case J:He(e,Be(e,o,a,l),Ge(e,o,a,l))!==l.A?t.l_savedpc++:Fe(e,t);break;case F:Xe(e,Be(e,o,a,l),Ge(e,o,a,l))!==l.A?t.l_savedpc++:Fe(e,t);break;case fe:(l.C?e.stack[i].l_isfalse():!e.stack[i].l_isfalse())?t.l_savedpc++:Fe(e,t);break;case pe:var tr=Ve(0,o,l),rr=e.stack[tr];(l.C?rr.l_isfalse():!rr.l_isfalse())?t.l_savedpc++:(me.setobjs2s(e,i,tr),Fe(e,t));break;case N:var ar=l.B,nr=l.C-1;if(0!==ar&&we.adjust_top(e,i+ar),!we.luaD_precall(e,i,nr)){t=e.ci;continue e}nr>=0&&we.adjust_top(e,t.top);break;case _e:var ur=l.B;if(0!==ur&&we.adjust_top(e,i+ur),!we.luaD_precall(e,i,s)){var sr=e.ci,or=sr.previous,lr=sr.func,ir=sr.funcOff,cr=or.funcOff,_r=sr.l_base+lr.value.p.numparams;r.p.p.length>0&&Ee.luaF_close(e,or.l_base);for(var fr=0;ir+fr<_r;fr++)me.setobjs2s(e,cr+fr,ir+fr);or.l_base=cr+(sr.l_base-ir),or.top=cr+(e.top-ir),we.adjust_top(e,or.top),or.l_code=sr.l_code,or.l_savedpc=sr.l_savedpc,or.callstatus|=Ue.CIST_TAIL,or.next=null,t=e.ci=or,ke(e.top===or.l_base+e.stack[cr].value.p.maxstacksize);continue e}break;case re:r.p.p.length>0&&Ee.luaF_close(e,o);var pr=we.luaD_poscall(e,t,i,0!==l.B?l.B-1:e.top-i);if(t.callstatus&Ue.CIST_FRESH)return;t=e.ci,pr&&we.adjust_top(e,t.top),ke(t.callstatus&Ue.CIST_LUA),ke(t.l_code[t.l_savedpc-1].opcode===N);continue e;case D:if(e.stack[i].ttisinteger()){var vr=e.stack[i+2].value,dr=e.stack[i].value+vr|0,hr=e.stack[i+1].value;(0<vr?dr<=hr:hr<=dr)&&(t.l_savedpc+=l.sBx,e.stack[i].chgivalue(dr),e.stack[i+3].setivalue(dr))}else{var Lr=e.stack[i+2].value,Ar=e.stack[i].value+Lr,gr=e.stack[i+1].value;(0<Lr?Ar<=gr:gr<=Ar)&&(t.l_savedpc+=l.sBx,e.stack[i].chgfltvalue(Ar),e.stack[i+3].setfltvalue(Ar))}break;case C:var br=e.stack[i],Tr=e.stack[i+1],xr=e.stack[i+2],kr=void 0;if(br.ttisinteger()&&xr.ttisinteger()&&(kr=Ye(Tr,xr.value))){var Or=kr.stopnow?0:br.value;Tr.value=kr.ilimit,br.value=Or-xr.value|0}else{var mr=void 0,Er=void 0,Ur=void 0;!1===(mr=We(Tr))&&Pe.luaG_runerror(e,g("'for' limit must be a number",!0)),e.stack[i+1].setfltvalue(mr),!1===(Er=We(xr))&&Pe.luaG_runerror(e,g("'for' step must be a number",!0)),e.stack[i+2].setfltvalue(Er),!1===(Ur=We(br))&&Pe.luaG_runerror(e,g("'for' initial value must be a number",!0)),e.stack[i].setfltvalue(Ur-Er)}t.l_savedpc+=l.sBx;break;case ve:var Rr=i+3;me.setobjs2s(e,Rr+2,i+2),me.setobjs2s(e,Rr+1,i+1),me.setobjs2s(e,Rr,i),we.adjust_top(e,Rr+3),we.luaD_call(e,Rr,l.C),we.adjust_top(e,t.top),l=t.l_code[t.l_savedpc++],i=Ce(0,o,l),ke(l.opcode===de);case de:e.stack[i+1].ttisnil()||(me.setobjs2s(e,i,i+1),t.l_savedpc+=l.sBx);break;case ne:var yr=l.B,Nr=l.C;0===yr&&(yr=e.top-i-1),0===Nr&&(ke(t.l_code[t.l_savedpc].opcode===P),Nr=t.l_code[t.l_savedpc++].Ax);for(var Sr=e.stack[i].value,wr=(Nr-1)*k+yr;yr>0;yr--)Me.luaH_setint(Sr,wr--,e.stack[i+yr]);we.adjust_top(e,t.top);break;case S:var Ir=r.p.p[l.Bx],Mr=st(Ir,r.upvals,e.stack,o);null===Mr?ot(e,Ir,r.upvals,o,i):e.stack[i].setclLvalue(Mr);break;case Le:var Pr=l.B-1,Dr=o-t.funcOff-r.p.numparams-1,Cr=void 0;for(Dr<0&&(Dr=0),Pr<0&&(Pr=Dr,we.luaD_checkstack(e,Dr),we.adjust_top(e,i+Dr)),Cr=0;Cr<Pr&&Cr<Dr;Cr++)me.setobjs2s(e,i+Cr,o-Dr+Cr);for(;Cr<Pr;Cr++)e.stack[i+Cr].setnilvalue();break;case P:throw Error("invalid opcode")}}},je=function(e,t,r,a){var n=r.A;0!==n&&Ee.luaF_close(e,t.l_base+n-1),t.l_savedpc+=r.sBx+a},Fe=function(e,t){je(e,t,t.l_code[t.l_savedpc],1)},He=function(e,t,r){if(t.ttisnumber()&&r.ttisnumber())return Qe(t,r)?1:0;if(t.ttisstring()&&r.ttisstring())return et(t.tsvalue(),r.tsvalue())<0?1:0;var a=Ie.luaT_callorderTM(e,t,r,Ie.TMS.TM_LT);return null===a&&Pe.luaG_ordererror(e,t,r),a?1:0},Xe=function(e,t,r){var a=void 0;return t.ttisnumber()&&r.ttisnumber()?$e(t,r)?1:0:t.ttisstring()&&r.ttisstring()?et(t.tsvalue(),r.tsvalue())<=0?1:0:null!==(a=Ie.luaT_callorderTM(e,t,r,Ie.TMS.TM_LE))?a?1:0:(e.ci.callstatus|=Ue.CIST_LEQ,a=Ie.luaT_callorderTM(e,r,t,Ie.TMS.TM_LT),e.ci.callstatus^=Ue.CIST_LEQ,null===a&&Pe.luaG_ordererror(e,t,r),a?0:1)},ze=function(e,t,r){if(t.ttype()!==r.ttype())return t.ttnov()!==r.ttnov()||t.ttnov()!==p?0:t.value===r.value?1:0;var a=void 0;switch(t.ttype()){case f:return 1;case l:return t.value==r.value?1:0;case c:case d:case v:case i:return t.value===r.value?1:0;case h:case _:return Ne(t.tsvalue(),r.tsvalue())?1:0;case A:case L:if(t.value===r.value)return 1;if(null===e)return 0;a=Ie.fasttm(e,t.value.metatable,Ie.TMS.TM_EQ),null===a&&(a=Ie.fasttm(e,r.value.metatable,Ie.TMS.TM_EQ));break;default:return t.value===r.value?1:0}if(null===a)return 0;var n=new me.TValue;return Ie.luaT_callTM(e,a,t,r,n,1),n.l_isfalse()?0:1},qe=function(e,t){return ze(null,e,t)},Ye=function(e,t){var r=!1,a=Je(e,t<0?2:1);if(!1===a){var n=We(e);if(!1===n)return!1;0<n?(a=ge,t<0&&(r=!0)):(a=be,t>=0&&(r=!0))}return{stopnow:r,ilimit:a}},Je=function e(t,r){if(t.ttisfloat()){var a=t.value,n=Math.floor(a);if(a!==n){if(0===r)return!1;r>1&&(n+=1)}return Te(n)}if(t.ttisinteger())return t.value;if(it(t)){var u=new me.TValue;if(me.luaO_str2num(t.svalue(),u)===t.vslen()+1)return e(u,r)}return!1},Ze=function(e){return e.ttisinteger()?e.value:Je(e,0)},We=function(e){if(e.ttnov()===p)return e.value;if(it(e)){var t=new me.TValue;if(me.luaO_str2num(e.svalue(),t)===e.vslen()+1)return t.value}return!1},Qe=function(e,t){return e.value<t.value},$e=function(e,t){return e.value<=t.value},et=function(e,t){var r=Se(e),a=Se(t);return r===a?0:r<a?-1:1},tt=function(e,t,r){var a=void 0;switch(r.ttype()){case L:var n=r.value;if(null!==(a=Ie.fasttm(e,n.metatable,Ie.TMS.TM_LEN)))break;return void t.setivalue(Me.luaH_getn(n));case h:case _:return void t.setivalue(r.vslen());default:a=Ie.luaT_gettmbyobj(e,r,Ie.TMS.TM_LEN),a.ttisnil()&&Pe.luaG_typeerror(e,r,g("get length of",!0))}Ie.luaT_callTM(e,a,r,r,t,1)},rt=Math.imul||function(e,t){var r=e>>>16&65535,a=65535&e,n=t>>>16&65535,u=65535&t;return a*u+(r*u+a*n<<16>>>0)|0},at=function(e,t,r){return 0===r&&Pe.luaG_runerror(e,g("attempt to divide by zero")),0|Math.floor(t/r)},nt=function(e,t,r){return 0===r&&Pe.luaG_runerror(e,g("attempt to perform 'n%%0'")),t-Math.floor(t/r)*r|0},ut=function(e,t){return t<0?t<=-32?0:e>>>-t:t>=32?0:e<<t},st=function(e,t,r,a){var n=e.cache;if(null!==n)for(var u=e.upvalues,s=u.length,o=0;o<s;o++){var l=u[o].instack?r[a+u[o].idx]:t[u[o].idx];if(n.upvals[o]!==l)return null}return n},ot=function(e,t,r,a,n){var u=t.upvalues.length,s=t.upvalues,o=new me.LClosure(e,u);o.p=t,e.stack[n].setclLvalue(o);for(var l=0;l<u;l++)s[l].instack?o.upvals[l]=Ee.luaF_findupval(e,a+s[l].idx):o.upvals[l]=r[s[l].idx];t.cache=o},lt=function(e){return e.ttisnumber()},it=function(e){return e.ttisstring()},ct=function(e,t){var r=e.stack[t];return!!r.ttisstring()||!!lt(r)&&(me.luaO_tostring(e,r),!0)},_t=function(e){return e.ttisstring()&&0===e.vslen()},ft=function(e,t,r,a){var n=0;do{var u=e.stack[t-r],s=u.vslen(),o=u.svalue();a.set(o,n),n+=s}while(--r>0)},pt=function(e,t){ke(t>=2);do{var r=e.top,a=2;if((e.stack[r-2].ttisstring()||lt(e.stack[r-2]))&&ct(e,r-1))if(_t(e.stack[r-1]))ct(e,r-2);else if(_t(e.stack[r-2]))me.setobjs2s(e,r-2,r-1);else{var n=e.stack[r-1].vslen();for(a=1;a<t&&ct(e,r-a-1);a++){var u=e.stack[r-a-1].vslen();n+=u}var s=new Uint8Array(n);ft(e,r,a,s);var o=ye(e,s);me.setsvalue2s(e,r-a,o)}else Ie.luaT_trybinTM(e,e.stack[r-2],e.stack[r-1],e.stack[r-2],Ie.TMS.TM_CONCAT);for(t-=a-1;e.top>r-(a-1);)delete e.stack[--e.top]}while(t>1)},vt=function(e,t,r,a){for(var n=0;n<2e3;n++){var u=void 0;if(t.ttistable()){var s=Me.luaH_get(e,t.value,r);if(!s.ttisnil())return void me.setobj2s(e,a,s);if(null===(u=Ie.fasttm(e,t.value.metatable,Ie.TMS.TM_INDEX)))return void e.stack[a].setnilvalue()}else u=Ie.luaT_gettmbyobj(e,t,Ie.TMS.TM_INDEX),u.ttisnil()&&Pe.luaG_typeerror(e,t,g("index",!0));if(u.ttisfunction())return void Ie.luaT_callTM(e,u,t,r,e.stack[a],1);t=u}Pe.luaG_runerror(e,g("'__index' chain too long; possible loop",!0))},dt=function(e,t,r,a){for(var n=0;n<2e3;n++){var u=void 0;if(t.ttistable()){var s=t.value,o=Me.luaH_set(e,s,r);if(!o.ttisnil()||null===(u=Ie.fasttm(e,s.metatable,Ie.TMS.TM_NEWINDEX)))return a.ttisnil()?Me.luaH_delete(e,s,r):o.setfrom(a),void Me.invalidateTMcache(s)}else(u=Ie.luaT_gettmbyobj(e,t,Ie.TMS.TM_NEWINDEX)).ttisnil()&&Pe.luaG_typeerror(e,t,g("index",!0));if(u.ttisfunction())return void Ie.luaT_callTM(e,u,t,r,a,0);t=u}Pe.luaG_runerror(e,g("'__newindex' chain too long; possible loop",!0))};e.exports.cvt2str=lt,e.exports.cvt2num=it,e.exports.luaV_gettable=vt,e.exports.luaV_concat=pt,e.exports.luaV_div=at,e.exports.luaV_equalobj=ze,e.exports.luaV_execute=Ke,e.exports.luaV_finishOp=De,e.exports.luaV_imul=rt,e.exports.luaV_lessequal=Xe,e.exports.luaV_lessthan=He,e.exports.luaV_mod=nt,e.exports.luaV_objlen=tt,e.exports.luaV_rawequalobj=qe,e.exports.luaV_shiftl=ut,e.exports.luaV_tointeger=Je,e.exports.settable=dt,e.exports.tointeger=Ze,e.exports.tonumber=We},function(e,t,r){"use strict";var a=["MOVE","LOADK","LOADKX","LOADBOOL","LOADNIL","GETUPVAL","GETTABUP","GETTABLE","SETTABUP","SETUPVAL","SETTABLE","NEWTABLE","SELF","ADD","SUB","MUL","MOD","POW","DIV","IDIV","BAND","BOR","BXOR","SHL","SHR","UNM","BNOT","NOT","LEN","CONCAT","JMP","EQ","LT","LE","TEST","TESTSET","CALL","TAILCALL","RETURN","FORLOOP","FORPREP","TFORCALL","TFORLOOP","SETLIST","CLOSURE","VARARG","EXTRAARG"],n={OP_MOVE:0,OP_LOADK:1,OP_LOADKX:2,OP_LOADBOOL:3,OP_LOADNIL:4,OP_GETUPVAL:5,OP_GETTABUP:6,OP_GETTABLE:7,OP_SETTABUP:8,OP_SETUPVAL:9,OP_SETTABLE:10,OP_NEWTABLE:11,OP_SELF:12,OP_ADD:13,OP_SUB:14,OP_MUL:15,OP_MOD:16,OP_POW:17,OP_DIV:18,OP_IDIV:19,OP_BAND:20,OP_BOR:21,OP_BXOR:22,OP_SHL:23,OP_SHR:24,OP_UNM:25,OP_BNOT:26,OP_NOT:27,OP_LEN:28,OP_CONCAT:29,OP_JMP:30,OP_EQ:31,OP_LT:32,OP_LE:33,OP_TEST:34,OP_TESTSET:35,OP_CALL:36,OP_TAILCALL:37,OP_RETURN:38,OP_FORLOOP:39,OP_FORPREP:40,OP_TFORCALL:41,OP_TFORLOOP:42,OP_SETLIST:43,OP_CLOSURE:44,OP_VARARG:45,OP_EXTRAARG:46},u=[96,113,65,84,80,80,92,108,60,16,60,84,108,124,124,124,124,124,124,124,124,124,124,124,124,96,96,96,96,104,34,188,188,188,132,228,84,84,16,98,98,4,98,20,81,80,23],s=function(e){return 3&u[e]},o=function(e){return u[e]>>4&3},l=function(e){return u[e]>>2&3},i=function(e){return 64&u[e]},c=function(e){return 128&u[e]},_=function(e){return 256&e},f=function(e){return-257&e},p=function(e){return 256|e},v=function(e,t){return~(-1<<e)<<t},d=function(e,t){return~v(e,t)},h=function(e){return e.opcode},L=function(e,t){return e.code=e.code&d(6,0)|t<<0&v(6,0),S(e)},A=function(e,t,r,a){return e.code=e.code&d(a,r)|t<<r&v(a,r),S(e)},g=function(e){return e.A},b=function(e,t){return A(e,t,6,8)},T=function(e){return e.B},x=function(e,t){return A(e,t,23,9)},k=function(e){return e.C},O=function(e,t){return A(e,t,14,9)},m=function(e){return e.Bx},E=function(e,t){return A(e,t,14,18)},U=function(e){return e.Ax},R=function(e,t){return A(e,t,6,26)},y=function(e){return e.sBx},N=function(e,t){return E(e,t+131071)},S=function(e){if("number"==typeof e)return{code:e,opcode:e>>0&v(6,0),A:e>>6&v(8,0),B:e>>23&v(9,0),C:e>>14&v(9,0),Bx:e>>14&v(18,0),Ax:e>>6&v(26,0),sBx:(e>>14&v(18,0))-131071};var t=e.code;return e.opcode=t>>0&v(6,0),e.A=t>>6&v(8,0),e.B=t>>23&v(9,0),e.C=t>>14&v(9,0),e.Bx=t>>14&v(18,0),e.Ax=t>>6&v(26,0),e.sBx=(t>>14&v(18,0))-131071,e},w=function(e,t,r,a){return S(e<<0|t<<6|r<<23|a<<14)},I=function(e,t,r){return S(e<<0|t<<6|r<<14)},M=function(e,t){return S(e<<0|t<<6)};e.exports.BITRK=256,e.exports.CREATE_ABC=w,e.exports.CREATE_ABx=I,e.exports.CREATE_Ax=M,e.exports.GET_OPCODE=h,e.exports.GETARG_A=g,e.exports.GETARG_B=T,e.exports.GETARG_C=k,e.exports.GETARG_Bx=m,e.exports.GETARG_Ax=U,e.exports.GETARG_sBx=y,e.exports.INDEXK=f,e.exports.ISK=_,e.exports.LFIELDS_PER_FLUSH=50,e.exports.MAXARG_A=255,e.exports.MAXARG_Ax=67108863,e.exports.MAXARG_B=511,e.exports.MAXARG_Bx=262143,e.exports.MAXARG_C=511,e.exports.MAXARG_sBx=131071,e.exports.MAXINDEXRK=255,e.exports.NO_REG=255,e.exports.OpArgK=3,e.exports.OpArgN=0,e.exports.OpArgR=2,e.exports.OpArgU=1,e.exports.OpCodes=a,e.exports.OpCodesI=n,e.exports.POS_A=6,e.exports.POS_Ax=6,e.exports.POS_B=23,e.exports.POS_Bx=14,e.exports.POS_C=14,e.exports.POS_OP=0,e.exports.RKASK=p,e.exports.SETARG_A=b,e.exports.SETARG_Ax=R,e.exports.SETARG_B=x,e.exports.SETARG_Bx=E,e.exports.SETARG_C=O,e.exports.SETARG_sBx=N,e.exports.SET_OPCODE=L,e.exports.SIZE_A=8,e.exports.SIZE_Ax=26,e.exports.SIZE_B=9,e.exports.SIZE_Bx=18,e.exports.SIZE_C=9,e.exports.SIZE_OP=6,e.exports.fullins=S,e.exports.getBMode=o,e.exports.getCMode=l,e.exports.getOpMode=s,e.exports.iABC=0,e.exports.iABx=1,e.exports.iAsBx=2,e.exports.iAx=3,e.exports.testAMode=i,e.exports.testTMode=c},function(e,t,r){"use strict";var a=r(1),n=a.LUA_VERSION_MAJOR,u=a.LUA_VERSION_MINOR,s="_"+n+"_"+u;e.exports.LUA_VERSUFFIX=s,e.exports.lua_assert=function(e){};e.exports.LUA_COLIBNAME="coroutine",e.exports.luaopen_coroutine=r(23).luaopen_coroutine;e.exports.LUA_TABLIBNAME="table",e.exports.luaopen_table=r(24).luaopen_table;e.exports.LUA_OSLIBNAME="os",e.exports.luaopen_os=r(25).luaopen_os;e.exports.LUA_STRLIBNAME="string",e.exports.luaopen_string=r(26).luaopen_string;e.exports.LUA_UTF8LIBNAME="utf8",e.exports.luaopen_utf8=r(27).luaopen_utf8;e.exports.LUA_BITLIBNAME="bit32";e.exports.LUA_MATHLIBNAME="math",e.exports.luaopen_math=r(28).luaopen_math;e.exports.LUA_DBLIBNAME="debug",e.exports.luaopen_debug=r(29).luaopen_debug;e.exports.LUA_LOADLIBNAME="package",e.exports.luaopen_package=r(30).luaopen_package;var o=r(37);e.exports.luaL_openlibs=o.luaL_openlibs},function(e,t,r){"use strict";var a=r(0),n=a.LUA_MULTRET,u=a.LUA_OPBNOT,s=a.LUA_OPEQ,o=a.LUA_OPLE,l=a.LUA_OPLT,i=a.LUA_OPUNM,c=a.LUA_REGISTRYINDEX,_=a.LUA_RIDX_GLOBALS,f=a.LUA_VERSION_NUM,p=a.constant_types,v=p.LUA_NUMTAGS,d=p.LUA_TBOOLEAN,h=p.LUA_TCCL,L=p.LUA_TFUNCTION,A=p.LUA_TLCF,g=p.LUA_TLCL,b=p.LUA_TLIGHTUSERDATA,T=p.LUA_TLNGSTR,x=p.LUA_TNIL,k=p.LUA_TNONE,O=p.LUA_TNUMFLT,m=p.LUA_TNUMINT,E=p.LUA_TSHRSTR,U=p.LUA_TTABLE,R=p.LUA_TTHREAD,y=p.LUA_TUSERDATA,N=a.thread_status.LUA_OK,S=a.from_userstring,w=a.to_luastring,I=r(2),M=I.api_check,P=r(10),D=r(7),C=r(34),V=C.luaU_dump,B=r(12),G=r(4),K=r(11),j=r(9),F=j.luaS_bless,H=j.luaS_new,X=j.luaS_newliteral,z=r(13),q=r(5),Y=q.LUAI_MAXSTACK,J=r(14),Z=r(8),W=r(18),Q=W.ZIO,$=G.TValue,ee=G.CClosure,te=function(e){e.top++,M(e,e.top<=e.ci.top,"stack overflow")},re=function(e,t){M(e,t<e.top-e.ci.funcOff,"not enough elements in the stack")},ae=function(e){if(!e)throw TypeError("invalid argument")},ne=function(e){ae("number"==typeof e&&(0|e)===e)},ue=function(e){return e!==G.luaO_nilobject},se=function(e){return null===e?f:e.l_G.version},oe=function(e,t){var r=e.l_G.panic;return e.l_G.panic=t,r},le=function(e,t){var r=e.l_G.atnativeerror;return e.l_G.atnativeerror=t,r},ie=function(e,t){var r=e.ci;if(t>0){var a=r.funcOff+t;return M(e,t<=r.top-(r.funcOff+1),"unacceptable index"),a>=e.top?G.luaO_nilobject:e.stack[a]}return t>c?(M(e,0!==t&&-t<=e.top,"invalid index"),e.stack[e.top+t]):t===c?e.l_G.l_registry:(t=c-t,M(e,t<=B.MAXUPVAL+1,"upvalue index too large"),r.func.ttislcf()?G.luaO_nilobject:t<=r.func.value.nupvalues?r.func.value.upvalue[t-1]:G.luaO_nilobject)},ce=function(e,t){var r=e.ci;if(t>0){var a=r.funcOff+t;return M(e,t<=r.top-(r.funcOff+1),"unacceptable index"),a>=e.top?null:a}if(t>c)return M(e,0!==t&&-t<=e.top,"invalid index"),e.top+t;throw Error("attempt to use pseudo-index")},_e=function(e,t){var r=void 0,a=e.ci;if(M(e,t>=0,"negative 'n'"),e.stack_last-e.top>t)r=!0;else{e.top+K.EXTRA_STACK>Y-t?r=!1:(D.luaD_growstack(e,t),r=!0)}return r&&a.top<e.top+t&&(a.top=e.top+t),r},fe=function(e,t,r){if(e!==t){re(e,r),M(e,e.l_G===t.l_G,"moving among independent states"),M(e,t.ci.top-t.top>=r,"stack overflow"),e.top-=r;for(var a=0;a<r;a++)t.stack[t.top]=new G.TValue,G.setobj2s(t,t.top,e.stack[e.top+a]),delete e.stack[e.top+a],t.top++}},pe=function(e,t){return t>0||t<=c?t:e.top-e.ci.funcOff+t},ve=function(e){return e.top-(e.ci.funcOff+1)},de=function(e,t){G.pushobj2s(e,ie(e,t)),M(e,e.top<=e.ci.top,"stack overflow")},he=function(e,t){var r=e.ci.funcOff,a=void 0;t>=0?(M(e,t<=e.stack_last-(r+1),"new top too large"),a=r+1+t):(M(e,-(t+1)<=e.top-(r+1),"invalid new top"),a=e.top+t+1),D.adjust_top(e,a)},Le=function(e,t){he(e,-t-1)},Ae=function(e,t,r){for(;t<r;t++,r--){var a=e.stack[t],n=new $(a.type,a.value);G.setobjs2s(e,t,r),G.setobj2s(e,r,n)}},ge=function(e,t,r){var a=e.top-1,n=ce(e,t),u=e.stack[n];M(e,ue(u)&&t>c,"index not in the stack"),M(e,(r>=0?r:-r)<=a-n+1,"invalid 'n'");var s=r>=0?a-r:n-r-1;Ae(e,n,s),Ae(e,s+1,e.top-1),Ae(e,n,e.top-1)},be=function(e,t,r){var a=ie(e,t);ie(e,r).setfrom(a)},Te=function(e,t){ge(e,t,-1),Le(e,1)},xe=function(e,t){ge(e,t,1)},ke=function(e,t){be(e,-1,t),Le(e,1)},Oe=function(e){e.stack[e.top]=new $(x,null),te(e)},me=function(e,t){ae("number"==typeof t),e.stack[e.top]=new $(O,t),te(e)},Ee=function(e,t){ne(t),e.stack[e.top]=new $(m,t),te(e)},Ue=function(e,t,r){ne(r);var a=void 0;return 0===r?(t=w("",!0),a=F(e,t)):(t=S(t),M(e,t.length>=r,"invalid length to lua_pushlstring"),a=H(e,t.subarray(0,r))),G.pushsvalue2s(e,a),M(e,e.top<=e.ci.top,"stack overflow"),a.value},Re=function(e,t){if(void 0===t||null===t)e.stack[e.top]=new $(x,null),e.top++;else{var r=H(e,S(t));G.pushsvalue2s(e,r),t=r.getstr()}return M(e,e.top<=e.ci.top,"stack overflow"),t},ye=function(e,t,r){return t=S(t),G.luaO_pushvfstring(e,t,r)},Ne=function(e,t){t=S(t);for(var r=arguments.length,a=Array(r>2?r-2:0),n=2;n<r;n++)a[n-2]=arguments[n];return G.luaO_pushvfstring(e,t,a)},Se=function(e,t){if(void 0===t||null===t)e.stack[e.top]=new $(x,null),e.top++;else{ae("string"==typeof t);var r=X(e,t);G.pushsvalue2s(e,r),t=r.getstr()}return M(e,e.top<=e.ci.top,"stack overflow"),t},we=function(e,t,r){if(ae("function"==typeof t),ne(r),0===r)e.stack[e.top]=new $(A,t);else{re(e,r),M(e,r<=B.MAXUPVAL,"upvalue index too large");for(var a=new ee(e,t,r),n=0;n<r;n++)a.upvalue[n].setfrom(e.stack[e.top-r+n]);for(var u=1;u<r;u++)delete e.stack[--e.top];r>0&&--e.top,e.stack[e.top].setclCvalue(a)}te(e)},Ie=we,Me=function(e,t){we(e,t,0)},Pe=Me,De=function(e,t){e.stack[e.top]=new $(d,!!t),te(e)},Ce=function(e,t){e.stack[e.top]=new $(b,t),te(e)},Ve=function(e){return e.stack[e.top]=new $(R,e),te(e),e.l_G.mainthread===e},Be=function(e){Ze(e,c,_)},Ge=function(e,t,r){var a=H(e,S(r));re(e,1),G.pushsvalue2s(e,a),M(e,e.top<=e.ci.top,"stack overflow"),J.settable(e,t,e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top],delete e.stack[--e.top]},Ke=function(e,t){Ge(e,Z.luaH_getint(e.l_G.l_registry.value,_),t)},je=function(e,t){re(e,1);var r=void 0,a=ie(e,t);switch(e.stack[e.top-1].ttisnil()?r=null:(M(e,e.stack[e.top-1].ttistable(),"table expected"),r=e.stack[e.top-1].value),a.ttnov()){case y:case U:a.value.metatable=r;break;default:e.l_G.mt[a.ttnov()]=r}return delete e.stack[--e.top],!0},Fe=function(e,t){re(e,2);var r=ie(e,t);J.settable(e,r,e.stack[e.top-2],e.stack[e.top-1]),delete e.stack[--e.top],delete e.stack[--e.top]},He=function(e,t,r){Ge(e,ie(e,t),r)},Xe=function(e,t,r){ne(r),re(e,1);var a=ie(e,t);e.stack[e.top]=new $(m,r),te(e),J.settable(e,a,e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top],delete e.stack[--e.top]},ze=function(e,t){re(e,2);var r=ie(e,t);M(e,r.ttistable(),"table expected");var a=e.stack[e.top-2],n=e.stack[e.top-1];if(n.ttisnil())Z.luaH_delete(e,r.value,a);else{Z.luaH_set(e,r.value,a).setfrom(n)}Z.invalidateTMcache(r.value),delete e.stack[--e.top],delete e.stack[--e.top]},qe=function(e,t,r){ne(r),re(e,1);var a=ie(e,t);M(e,a.ttistable(),"table expected"),Z.luaH_setint(a.value,r,e.stack[e.top-1]),delete e.stack[--e.top]},Ye=function(e,t,r){re(e,1);var a=ie(e,t);M(e,a.ttistable(),"table expected");var n=new $(b,r),u=e.stack[e.top-1];if(u.ttisnil())Z.luaH_delete(e,a.value,n);else{Z.luaH_set(e,a.value,n).setfrom(u)}delete e.stack[--e.top]},Je=function(e,t,r){var a=H(e,S(r));return G.pushsvalue2s(e,a),M(e,e.top<=e.ci.top,"stack overflow"),J.luaV_gettable(e,t,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},Ze=function(e,t,r){var a=ie(e,t);return ne(r),M(e,a.ttistable(),"table expected"),G.pushobj2s(e,Z.luaH_getint(a.value,r)),M(e,e.top<=e.ci.top,"stack overflow"),e.stack[e.top-1].ttnov()},We=function(e,t,r){var a=ie(e,t);M(e,a.ttistable(),"table expected");var n=new $(b,r);return G.pushobj2s(e,Z.luaH_get(e,a.value,n)),M(e,e.top<=e.ci.top,"stack overflow"),e.stack[e.top-1].ttnov()},Qe=function(e,t){var r=ie(e,t);return M(e,r.ttistable(r),"table expected"),G.setobj2s(e,e.top-1,Z.luaH_get(e,r.value,e.stack[e.top-1])),e.stack[e.top-1].ttnov()},$e=function(e,t,r){var a=new G.TValue(U,Z.luaH_new(e));e.stack[e.top]=a,te(e)},et=function(e,t){return new G.Udata(e,t)},tt=function(e,t){var r=et(e,t);return e.stack[e.top]=new G.TValue(y,r),te(e),r.data},rt=function(e,t,r){switch(ne(r),t.ttype()){case h:var a=t.value;return 1<=r&&r<=a.nupvalues?{name:w("",!0),val:a.upvalue[r-1]}:null;case g:var n=t.value,u=n.p;if(!(1<=r&&r<=u.upvalues.length))return null;var s=u.upvalues[r-1].name;return{name:s?s.getstr():w("(*no name)",!0),val:n.upvals[r-1]};default:return null}},at=function(e,t,r){var a=rt(0,ie(e,t),r);if(a){var n=a.name,u=a.val;return G.pushobj2s(e,u),M(e,e.top<=e.ci.top,"stack overflow"),n}return null},nt=function(e,t,r){var a=ie(e,t);re(e,1);var n=rt(0,a,r);if(n){var u=n.name;return n.val.setfrom(e.stack[e.top-1]),delete e.stack[--e.top],u}return null},ut=function(e){$e(e)},st=function(e,t,r){Me(e,r),Ke(e,t)},ot=function(e,t){var r=ie(e,t),a=void 0,n=!1;switch(r.ttnov()){case U:case y:a=r.value.metatable;break;default:a=e.l_G.mt[r.ttnov()]}return null!==a&&void 0!==a&&(e.stack[e.top]=new $(U,a),te(e),n=!0),n},lt=function(e,t){var r=ie(e,t);M(e,r.ttisfulluserdata(),"full userdata expected");var a=r.value.uservalue;return e.stack[e.top]=new $(a.type,a.value),te(e),e.stack[e.top-1].ttnov()},it=function(e,t){var r=ie(e,t);return J.luaV_gettable(e,r,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},ct=function(e,t,r){return Je(e,ie(e,t),r)},_t=function(e,t,r){var a=ie(e,t);return ne(r),e.stack[e.top]=new $(m,r),te(e),J.luaV_gettable(e,a,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},ft=function(e,t){return Je(e,Z.luaH_getint(e.l_G.l_registry.value,_),t)},pt=function(e,t){return!ie(e,t).l_isfalse()},vt=function(e,t){var r=ie(e,t);if(!r.ttisstring()){if(!J.cvt2str(r))return null;G.luaO_tostring(e,r)}return r.svalue()},dt=vt,ht=function(e,t){var r=ie(e,t);if(!r.ttisstring()){if(!J.cvt2str(r))return null;G.luaO_tostring(e,r)}return r.jsstring()},Lt=ht,At=function(e,t){var r=vt(e,t);return new DataView(r.buffer,r.byteOffset,r.byteLength)},gt=function(e,t){var r=ie(e,t);switch(r.ttype()){case E:case T:return r.vslen();case y:return r.value.len;case U:return Z.luaH_getn(r.value);default:return 0}},bt=function(e,t){var r=ie(e,t);return r.ttislcf()||r.ttisCclosure()?r.value:null},Tt=function(e,t){var r=xt(e,t);return!1===r?0:r},xt=function(e,t){return J.tointeger(ie(e,t))},kt=function(e,t){var r=Ot(e,t);return!1===r?0:r},Ot=function(e,t){return J.tonumber(ie(e,t))},mt=function(e,t){var r=ie(e,t);switch(r.ttnov()){case y:return r.value.data;case b:return r.value;default:return null}},Et=function(e,t){var r=ie(e,t);return r.ttisthread()?r.value:null},Ut=function(e,t){var r=ie(e,t);switch(r.ttype()){case U:case g:case h:case A:case R:case y:case b:return r.value;default:return null}},Rt=new WeakMap,yt=function(e,t){var r=Rt.get(e);return!!r&&(null===t||t.l_G===r)},Nt=function(e,t,r){var a=function(a){M(a,a instanceof K.lua_State&&e===a.l_G,"must be from same global state"),a.stack[a.top]=new $(t,r),te(a)};return Rt.set(a,e),a},St=function(e,t){var r=ie(e,t);return Nt(e.l_G,r.type,r.value)},wt=function(e,t,r,a){var n=ie(e,t),u=ie(e,r),i=0;if(ue(n)&&ue(u))switch(a){case s:i=J.luaV_equalobj(e,n,u);break;case l:i=J.luaV_lessthan(e,n,u);break;case o:i=J.luaV_lessequal(e,n,u);break;default:M(e,!1,"invalid option")}return i},It=function(e,t){var r=new $,a=G.luaO_str2num(t,r);return 0!==a&&(e.stack[e.top]=r,te(e)),a},Mt=function(e,t){D.luaD_callnoyield(e,t.funcOff,t.nresults)},Pt=function(e,t){var r=ie(e,t);return ue(r)?r.ttnov():k},Dt=function(e,t){return M(e,k<=t&&t<v,"invalid tag"),z.ttypename(t)},Ct=function(e,t){var r=ie(e,t);return r.ttislcf(r)||r.ttisCclosure()},Vt=function(e,t){return Pt(e,t)===x},Bt=function(e,t){return Pt(e,t)===d},Gt=function(e,t){return Pt(e,t)===k},Kt=function(e,t){return Pt(e,t)<=0},jt=function(e,t){return ie(e,t).ttistable()},Ft=function(e,t){return ie(e,t).ttisinteger()},Ht=function(e,t){return!1!==J.tonumber(ie(e,t))},Xt=function(e,t){var r=ie(e,t);return r.ttisstring()||J.cvt2str(r)},zt=function(e,t){var r=ie(e,t);return r.ttisfulluserdata(r)||r.ttislightuserdata()},qt=function(e,t){return Pt(e,t)===R},Yt=function(e,t){return Pt(e,t)===L},Jt=function(e,t){return Pt(e,t)===b},Zt=function(e,t,r){var a=ie(e,t),n=ie(e,r);return ue(a)&&ue(n)?J.luaV_equalobj(null,a,n):0},Wt=function(e,t){t!==i&&t!==u?re(e,2):(re(e,1),G.pushobj2s(e,e.stack[e.top-1]),M(e,e.top<=e.ci.top,"stack overflow")),G.luaO_arith(e,t,e.stack[e.top-2],e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top]},Qt=w("?"),$t=function(e,t,r,a,n){a=a?S(a):Qt,null!==n&&(n=S(n));var u=new Q(e,t,r),s=D.luaD_protectedparser(e,u,a,n);if(s===N){var o=e.stack[e.top-1].value;if(o.nupvalues>=1){var l=Z.luaH_getint(e.l_G.l_registry.value,_);o.upvals[0].setfrom(l)}}return s},er=function(e,t,r,a){re(e,1);var n=e.stack[e.top-1];return n.ttisLclosure()?V(e,n.value.p,t,r,a):1},tr=function(e){return e.status},rr=function(e,t){re(e,1);var r=ie(e,t);M(e,r.ttisfulluserdata(),"full userdata expected"),r.value.uservalue.setfrom(e.stack[e.top-1]),delete e.stack[--e.top]},ar=function(e,t,r){M(e,r===n||e.ci.top-e.top>=r-t,"results from function overflow current stack size")},nr=function(e,t,r,a,u){M(e,null===u||!(e.ci.callstatus&K.CIST_LUA),"cannot use continuations inside hooks"),re(e,t+1),M(e,e.status===N,"cannot do calls on non-normal thread"),ar(e,t,r);var s=e.top-(t+1);null!==u&&0===e.nny?(e.ci.c_k=u,e.ci.c_ctx=a,D.luaD_call(e,s,r)):D.luaD_callnoyield(e,s,r),r===n&&e.ci.top<e.top&&(e.ci.top=e.top)},ur=function(e,t,r){nr(e,t,r,0,null)},sr=function(e,t,r,a,u,s){M(e,null===s||!(e.ci.callstatus&K.CIST_LUA),"cannot use continuations inside hooks"),re(e,t+1),M(e,e.status===N,"cannot do calls on non-normal thread"),ar(e,t,r);var o=void 0,l=void 0;l=0===a?0:ce(e,a);var i=e.top-(t+1);if(null===s||e.nny>0){var c={funcOff:i,nresults:r};o=D.luaD_pcall(e,Mt,c,i,l)}else{var _=e.ci;_.c_k=s,_.c_ctx=u,_.extra=i,_.c_old_errfunc=e.errfunc,e.errfunc=l,_.callstatus&=~K.CIST_OAH|e.allowhook,_.callstatus|=K.CIST_YPCALL,D.luaD_call(e,i,r),_.callstatus&=~K.CIST_YPCALL,e.errfunc=_.c_old_errfunc,o=N}return r===n&&e.ci.top<e.top&&(e.ci.top=e.top),o},or=function(e,t,r,a){return sr(e,t,r,a,0,null)},lr=function(e){re(e,1),P.luaG_errormsg(e)},ir=function(e,t){var r=ie(e,t);return M(e,r.ttistable(),"table expected"),e.stack[e.top]=new $,Z.luaH_next(e,r.value,e.top-1)?(te(e),1):(delete e.stack[e.top],delete e.stack[--e.top],0)},cr=function(e,t){re(e,t),t>=2?J.luaV_concat(e,t):0===t&&(G.pushsvalue2s(e,F(e,w("",!0))),M(e,e.top<=e.ci.top,"stack overflow"))},_r=function(e,t){var r=ie(e,t),a=new $;J.luaV_objlen(e,a,r),e.stack[e.top]=a,te(e)},fr=function(e,t,r){var a=ie(e,t);M(e,a.ttisLclosure(),"Lua function expected");var n=a.value;return ne(r),M(e,1<=r&&r<=n.p.upvalues.length,"invalid upvalue index"),{f:n,i:r-1}},pr=function(e,t,r){var a=ie(e,t);switch(a.ttype()){case g:var n=fr(e,t,r);return n.f.upvals[n.i];case h:var u=a.value;return M(e,r|0===r&&1<=r&&r<=u.nupvalues,"invalid upvalue index"),u.upvalue[r-1];default:return M(e,!1,"closure expected"),null}},vr=function(e,t,r,a,n){var u=fr(e,t,r),s=fr(e,a,n),o=s.f.upvals[s.i];u.f.upvals[u.i]=o},dr=function(){},hr=function(){return console.warn("lua_getallocf is not available"),0},Lr=function(){return console.warn("lua_setallocf is not available"),0},Ar=function(){return console.warn("lua_getextraspace is not available"),0};e.exports.api_incr_top=te,e.exports.api_checknelems=re,e.exports.lua_absindex=pe,e.exports.lua_arith=Wt,e.exports.lua_atpanic=oe,e.exports.lua_atnativeerror=le,e.exports.lua_call=ur,e.exports.lua_callk=nr,e.exports.lua_checkstack=_e,e.exports.lua_compare=wt,e.exports.lua_concat=cr,e.exports.lua_copy=be,e.exports.lua_createtable=$e,e.exports.lua_dump=er,e.exports.lua_error=lr,e.exports.lua_gc=dr,e.exports.lua_getallocf=hr,e.exports.lua_getextraspace=Ar,e.exports.lua_getfield=ct,e.exports.lua_getglobal=ft,e.exports.lua_geti=_t,e.exports.lua_getmetatable=ot,e.exports.lua_gettable=it,e.exports.lua_gettop=ve,e.exports.lua_getupvalue=at,e.exports.lua_getuservalue=lt,e.exports.lua_insert=xe,e.exports.lua_isboolean=Bt,e.exports.lua_iscfunction=Ct,e.exports.lua_isfunction=Yt,e.exports.lua_isinteger=Ft,e.exports.lua_islightuserdata=Jt,e.exports.lua_isnil=Vt,e.exports.lua_isnone=Gt,e.exports.lua_isnoneornil=Kt,e.exports.lua_isnumber=Ht,e.exports.lua_isproxy=yt,e.exports.lua_isstring=Xt,e.exports.lua_istable=jt,e.exports.lua_isthread=qt,e.exports.lua_isuserdata=zt,e.exports.lua_len=_r,e.exports.lua_load=$t,e.exports.lua_newtable=ut,e.exports.lua_newuserdata=tt,e.exports.lua_next=ir,e.exports.lua_pcall=or,e.exports.lua_pcallk=sr,e.exports.lua_pop=Le,e.exports.lua_pushboolean=De,e.exports.lua_pushcclosure=we,e.exports.lua_pushcfunction=Me,e.exports.lua_pushfstring=Ne,e.exports.lua_pushglobaltable=Be,e.exports.lua_pushinteger=Ee,e.exports.lua_pushjsclosure=Ie,e.exports.lua_pushjsfunction=Pe,e.exports.lua_pushlightuserdata=Ce,e.exports.lua_pushliteral=Se,e.exports.lua_pushlstring=Ue,e.exports.lua_pushnil=Oe,e.exports.lua_pushnumber=me,e.exports.lua_pushstring=Re,e.exports.lua_pushthread=Ve,e.exports.lua_pushvalue=de,e.exports.lua_pushvfstring=ye,e.exports.lua_rawequal=Zt,e.exports.lua_rawget=Qe,e.exports.lua_rawgeti=Ze,e.exports.lua_rawgetp=We,e.exports.lua_rawlen=gt,e.exports.lua_rawset=ze,e.exports.lua_rawseti=qe,e.exports.lua_rawsetp=Ye,e.exports.lua_register=st,e.exports.lua_remove=Te,e.exports.lua_replace=ke,e.exports.lua_rotate=ge,e.exports.lua_setallocf=Lr,e.exports.lua_setfield=He,e.exports.lua_setglobal=Ke,e.exports.lua_seti=Xe,e.exports.lua_setmetatable=je,e.exports.lua_settable=Fe,e.exports.lua_settop=he,e.exports.lua_setupvalue=nt,e.exports.lua_setuservalue=rr,e.exports.lua_status=tr,e.exports.lua_stringtonumber=It,e.exports.lua_toboolean=pt,e.exports.lua_tocfunction=bt,e.exports.lua_todataview=At,e.exports.lua_tointeger=Tt,e.exports.lua_tointegerx=xt,e.exports.lua_tojsstring=Lt,e.exports.lua_toljsstring=ht,e.exports.lua_tolstring=vt,e.exports.lua_tonumber=kt,e.exports.lua_tonumberx=Ot,e.exports.lua_topointer=Ut,e.exports.lua_toproxy=St,e.exports.lua_tostring=dt,e.exports.lua_tothread=Et,e.exports.lua_touserdata=mt,e.exports.lua_type=Pt,e.exports.lua_typename=Dt,e.exports.lua_upvalueid=pr,e.exports.lua_upvaluejoin=vr,e.exports.lua_version=se,e.exports.lua_xmove=fe},function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),u=r(2),s=u.lua_assert,o=function e(){a(this,e),this.buffer=null,this.n=0},l=function(e){return e.buffer.subarray(0,e.n)},i=function(e,t){e.n-=t},c=function(e){e.n=0},_=function(e,t,r){var a=new Uint8Array(r);t.buffer&&a.set(t.buffer),t.buffer=a},f=function(){function e(t,r,n){a(this,e),this.L=t,s("function"==typeof r,"ZIO requires a reader"),this.reader=r,this.data=n,this.n=0,this.buffer=null,this.off=0}return n(e,[{key:"zgetc",value:function(){return this.n-- >0?this.buffer[this.off++]:p(this)}}]),e}(),p=function(e){var t=e.reader(e.L,e.data);if(null===t)return-1;s(t instanceof Uint8Array,"Should only load binary of array of bytes");var r=t.length;return 0===r?-1:(e.buffer=t,e.off=0,e.n=r-1,e.buffer[e.off++])},v=function(e,t,r,a){for(;a;){if(0===e.n){if(-1===p(e))return a;e.n++,e.off--}for(var n=a<=e.n?a:e.n,u=0;u<n;u++)t[r++]=e.buffer[e.off++];e.n-=n,0===e.n&&(e.buffer=null),a-=n}return 0};e.exports.EOZ=-1,e.exports.luaZ_buffer=l,e.exports.luaZ_buffremove=i,e.exports.luaZ_fill=p,e.exports.luaZ_read=v,e.exports.luaZ_resetbuffer=c,e.exports.luaZ_resizebuffer=_,e.exports.MBuffer=o,e.exports.ZIO=f},function(e,t,r){"use strict";/**
@license MIT

Copyright © 2017-2018 Benoit Giannangeli
Copyright © 2017-2018 Daurnimator
Copyright © 1994–2017 Lua.org, PUC-Rio.
*/
var a=r(3);e.exports.FENGARI_AUTHORS=a.FENGARI_AUTHORS,e.exports.FENGARI_COPYRIGHT=a.FENGARI_COPYRIGHT,e.exports.FENGARI_RELEASE=a.FENGARI_RELEASE,e.exports.FENGARI_VERSION=a.FENGARI_VERSION,e.exports.FENGARI_VERSION_MAJOR=a.FENGARI_VERSION_MAJOR,e.exports.FENGARI_VERSION_MINOR=a.FENGARI_VERSION_MINOR,e.exports.FENGARI_VERSION_NUM=a.FENGARI_VERSION_NUM,e.exports.FENGARI_VERSION_RELEASE=a.FENGARI_VERSION_RELEASE,e.exports.luastring_eq=a.luastring_eq,e.exports.luastring_indexOf=a.luastring_indexOf,e.exports.luastring_of=a.luastring_of,e.exports.to_jsstring=a.to_jsstring,e.exports.to_luastring=a.to_luastring,e.exports.to_uristring=a.to_uristring;var n=r(1),u=r(6),s=r(16);e.exports.lua=n,e.exports.lauxlib=u,e.exports.lualib=s},function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=r(0),u=n.constant_types.LUA_TLNGSTR,s=n.thread_status.LUA_ERRSYNTAX,o=n.to_luastring,l=r(2),i=l.LUA_MINBUFFER,c=l.MAX_INT,_=l.lua_assert,f=r(10),p=r(7),v=r(21),d=v.lisdigit,h=v.lislalnum,L=v.lislalpha,A=v.lisspace,g=v.lisxdigit,b=r(4),T=r(9),x=T.luaS_bless,k=T.luaS_hash,O=T.luaS_hashlongstr,m=T.luaS_new,E=r(8),U=r(18),R=U.EOZ,y=U.luaZ_buffer,N=U.luaZ_buffremove,S=U.luaZ_resetbuffer,w=U.luaZ_resizebuffer,I=o("_ENV",!0),M={TK_AND:257,TK_BREAK:258,TK_DO:259,TK_ELSE:260,TK_ELSEIF:261,TK_END:262,TK_FALSE:263,TK_FOR:264,TK_FUNCTION:265,TK_GOTO:266,TK_IF:267,TK_IN:268,TK_LOCAL:269,TK_NIL:270,TK_NOT:271,TK_OR:272,TK_REPEAT:273,TK_RETURN:274,TK_THEN:275,TK_TRUE:276,TK_UNTIL:277,TK_WHILE:278,TK_IDIV:279,TK_CONCAT:280,TK_DOTS:281,TK_EQ:282,TK_GE:283,TK_LE:284,TK_NE:285,TK_SHL:286,TK_SHR:287,TK_DBCOLON:288,TK_EOS:289,TK_FLT:290,TK_INT:291,TK_NAME:292,TK_STRING:293},P=["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","//","..","...","==",">=","<=","~=","<<",">>","::","<eof>","<number>","<integer>","<name>","<string>"].map(function(e,t){return o(e)}),D=function e(){a(this,e),this.r=NaN,this.i=NaN,this.ts=null},C=function e(){a(this,e),this.token=NaN,this.seminfo=new D},V=function e(){a(this,e),this.current=NaN,this.linenumber=NaN,this.lastline=NaN,this.t=new C,this.lookahead=new C,this.fs=null,this.L=null,this.z=null,this.buff=null,this.h=null,this.dyd=null,this.source=null,this.envn=null},B=function(e,t){var r=e.buff;if(r.n+1>r.buffer.length){r.buffer.length>=c/2&&W(e,o("lexical element too long",!0),0);var a=2*r.buffer.length;w(e.L,r,a)}r.buffer[r.n++]=t<0?255+t+1:t},G=function(e,t){if(t<257)return b.luaO_pushfstring(e.L,o("'%c'",!0),t);var r=P[t-257];return t<289?b.luaO_pushfstring(e.L,o("'%s'",!0),r):r},K=function(e){return 10===e.current||13===e.current},j=function(e){e.current=e.z.zgetc()},F=function(e){B(e,e.current),j(e)},H=function(e,t){var r=e.L,a=m(r,t),n=E.luaH_set(r,e.h,new b.TValue(u,a));if(n.ttisnil())n.setbvalue(!0);else{var s=e.h.strong.get(O(a));_(s.value==n),a=s.key.tsvalue()}return a},X=function(e){var t=e.current;_(K(e)),j(e),K(e)&&e.current!==t&&j(e),++e.linenumber>=c&&W(e,o("chunk has too many lines",!0),0)},z=function(e,t,r,a,n){t.t={token:0,seminfo:new D},t.L=e,t.current=n,t.lookahead={token:289,seminfo:new D},t.z=r,t.fs=null,t.linenumber=1,t.lastline=1,t.source=a,t.envn=x(e,I),w(e,t.buff,i)},q=function(e,t){return e.current===t&&(j(e),!0)},Y=function(e,t){return(e.current===t[0].charCodeAt(0)||e.current===t[1].charCodeAt(0))&&(F(e),!0)},J=function(e,t){var r="Ee",a=e.current;for(_(d(e.current)),F(e),48===a&&Y(e,"xX")&&(r="Pp");;)if(Y(e,r)&&Y(e,"-+"),g(e.current))F(e);else{if(46!==e.current)break;F(e)}var n=new b.TValue;return 0===b.luaO_str2num(y(e.buff),n)&&W(e,o("malformed number",!0),290),n.ttisinteger()?(t.i=n.value,291):(_(n.ttisfloat()),t.r=n.value,290)},Z=function(e,t){switch(t){case 292:case 293:case 290:case 291:return b.luaO_pushfstring(e.L,o("'%s'",!0),y(e.buff));default:return G(e,t)}},W=function(e,t,r){t=f.luaG_addinfo(e.L,t,e.source,e.linenumber),r&&b.luaO_pushfstring(e.L,o("%s near %s"),t,Z(e,r)),p.luaD_throw(e.L,s)},Q=function(e,t){W(e,t,e.t.token)},$=function(e){var t=0,r=e.current;for(_(91===r||93===r),F(e);61===e.current;)F(e),t++;return e.current===r?t:-t-1},ee=function(e,t,r){var a=e.linenumber;F(e),K(e)&&X(e);for(var n=!1;!n;)switch(e.current){case R:W(e,o("unfinished long "+(t?"string":"comment")+" (starting at line "+a+")"),289);break;case 93:$(e)===r&&(F(e),n=!0);break;case 10:case 13:B(e,10),X(e),t||S(e.buff);break;default:t?F(e):j(e)}t&&(t.ts=H(e,e.buff.buffer.subarray(2+r,e.buff.n-(2+r))))},te=function(e,t,r){t||(e.current!==R&&F(e),W(e,r,293))},re=function(e){return F(e),te(e,g(e.current),o("hexadecimal digit expected",!0)),b.luaO_hexavalue(e.current)},ae=function(e){var t=re(e);return t=(t<<4)+re(e),N(e.buff,2),t},ne=function(e){var t=4;F(e),te(e,123===e.current,o("missing '{'",!0));var r=re(e);for(F(e);g(e.current);)t++,r=(r<<4)+b.luaO_hexavalue(e.current),te(e,r<=1114111,o("UTF-8 value too large",!0)),F(e);return te(e,125===e.current,o("missing '}'",!0)),j(e),N(e.buff,t),r},ue=function(e){for(var t=new Uint8Array(b.UTF8BUFFSZ),r=b.luaO_utf8esc(t,ne(e));r>0;r--)B(e,t[b.UTF8BUFFSZ-r])},se=function(e){var t=0,r=void 0;for(r=0;r<3&&d(e.current);r++)t=10*t+e.current-48,F(e);return te(e,t<=255,o("decimal escape too large",!0)),N(e.buff,r),t},oe=function(e,t,r){for(F(e);e.current!==t;)switch(e.current){case R:W(e,o("unfinished string",!0),289);break;case 10:case 13:W(e,o("unfinished string",!0),293);break;case 92:F(e);var a=void 0,n=void 0;switch(e.current){case 97:n=7,a="read_save";break;case 98:n=8,a="read_save";break;case 102:n=12,a="read_save";break;case 110:n=10,a="read_save";break;case 114:n=13,a="read_save";break;case 116:n=9,a="read_save";break;case 118:n=11,a="read_save";break;case 120:n=ae(e),a="read_save";break;case 117:ue(e),a="no_save";break;case 10:case 13:X(e),n=10,a="only_save";break;case 92:case 34:case 39:n=e.current,a="read_save";break;case R:a="no_save";break;case 122:for(N(e.buff,1),j(e);A(e.current);)K(e)?X(e):j(e);a="no_save";break;default:te(e,d(e.current),o("invalid escape sequence",!0)),n=se(e),a="only_save"}"read_save"===a&&j(e),"read_save"!==a&&"only_save"!==a||(N(e.buff,1),B(e,n));break;default:F(e)}F(e),r.ts=H(e,e.buff.buffer.subarray(1,e.buff.n-1))},le=Object.create(null);P.forEach(function(e,t){return le[k(e)]=t});var ie=function(e){var t=le[O(e)];return void 0!==t&&t<=22},ce=function(e,t){for(S(e.buff);;)switch(_("number"==typeof e.current),e.current){case 10:case 13:X(e);break;case 32:case 12:case 9:case 11:j(e);break;case 45:if(j(e),45!==e.current)return 45;if(j(e),91===e.current){var r=$(e);if(S(e.buff),r>=0){ee(e,null,r),S(e.buff);break}}for(;!K(e)&&e.current!==R;)j(e);break;case 91:var a=$(e);return a>=0?(ee(e,t,a),293):(-1!==a&&W(e,o("invalid long string delimiter",!0),293),91);case 61:return j(e),q(e,61)?282:61;case 60:return j(e),q(e,61)?284:q(e,60)?286:60;case 62:return j(e),q(e,61)?283:q(e,62)?287:62;case 47:return j(e),q(e,47)?279:47;case 126:return j(e),q(e,61)?285:126;case 58:return j(e),q(e,58)?288:58;case 34:case 39:return oe(e,e.current,t),293;case 46:return F(e),q(e,46)?q(e,46)?281:280:d(e.current)?J(e,t):46;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return J(e,t);case R:return 289;default:if(L(e.current)){do{F(e)}while(h(e.current));var n=H(e,y(e.buff));t.ts=n;var u=le[O(n)];return void 0!==u&&u<=22?u+257:292}var s=e.current;return j(e),s}},_e=function(e){e.lastline=e.linenumber,289!==e.lookahead.token?(e.t.token=e.lookahead.token,e.t.seminfo.i=e.lookahead.seminfo.i,e.t.seminfo.r=e.lookahead.seminfo.r,e.t.seminfo.ts=e.lookahead.seminfo.ts,e.lookahead.token=289):e.t.token=ce(e,e.t.seminfo)},fe=function(e){return _(289===e.lookahead.token),e.lookahead.token=ce(e,e.lookahead.seminfo),e.lookahead.token};e.exports.FIRST_RESERVED=257,e.exports.LUA_ENV=I,e.exports.LexState=V,e.exports.RESERVED=M,e.exports.isreserved=ie,e.exports.luaX_lookahead=fe,e.exports.luaX_newstring=H,e.exports.luaX_next=_e,e.exports.luaX_setinput=z,e.exports.luaX_syntaxerror=Q,e.exports.luaX_token2str=G,e.exports.luaX_tokens=P},function(e,t,r){"use strict";var a=r(0),n=a.luastring_of,u=n(0,0,0,0,0,0,0,0,0,0,8,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,22,22,22,22,22,22,22,22,22,22,4,4,4,4,4,4,4,21,21,21,21,21,21,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,5,4,21,21,21,21,21,21,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),s=function(e){return 0!=(2&u[e+1])},o=function(e){return 0!=(16&u[e+1])},l=function(e){return 0!=(4&u[e+1])},i=function(e){return 0!=(8&u[e+1])},c=function(e){return 0!=(1&u[e+1])},_=function(e){return 0!=(3&u[e+1])};e.exports.lisdigit=s,e.exports.lislalnum=_,e.exports.lislalpha=c,e.exports.lisprint=l,e.exports.lisspace=i,e.exports.lisxdigit=o},function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),u=r(0),s=u.LUA_MULTRET,o=u.to_luastring,l=r(32),i=l.BinOpr,c=i.OPR_ADD,_=i.OPR_AND,f=i.OPR_BAND,p=i.OPR_BOR,v=i.OPR_BXOR,d=i.OPR_CONCAT,h=i.OPR_DIV,L=i.OPR_EQ,A=i.OPR_GE,g=i.OPR_GT,b=i.OPR_IDIV,T=i.OPR_LE,x=i.OPR_LT,k=i.OPR_MOD,O=i.OPR_MUL,m=i.OPR_NE,E=i.OPR_NOBINOPR,U=i.OPR_OR,R=i.OPR_POW,y=i.OPR_SHL,N=i.OPR_SHR,S=i.OPR_SUB,w=l.UnOpr,I=w.OPR_BNOT,M=w.OPR_LEN,P=w.OPR_MINUS,D=w.OPR_NOT,C=w.OPR_NOUNOPR,V=l.NO_JUMP,B=l.getinstruction,G=l.luaK_checkstack,K=l.luaK_codeABC,j=l.luaK_codeABx,F=l.luaK_codeAsBx,H=l.luaK_codek,X=l.luaK_concat,z=l.luaK_dischargevars,q=l.luaK_exp2RK,Y=l.luaK_exp2anyreg,J=l.luaK_exp2anyregup,Z=l.luaK_exp2nextreg,W=l.luaK_exp2val,Q=l.luaK_fixline,$=l.luaK_getlabel,ee=l.luaK_goiffalse,te=l.luaK_goiftrue,re=l.luaK_indexed,ae=l.luaK_infix,ne=l.luaK_intK,ue=l.luaK_jump,se=l.luaK_jumpto,oe=l.luaK_nil,le=l.luaK_patchclose,ie=l.luaK_patchlist,ce=l.luaK_patchtohere,_e=l.luaK_posfix,fe=l.luaK_prefix,pe=l.luaK_reserveregs,ve=l.luaK_ret,de=l.luaK_self,he=l.luaK_setlist,Le=l.luaK_setmultret,Ae=l.luaK_setoneret,ge=l.luaK_setreturns,be=l.luaK_storevar,Te=l.luaK_stringK,xe=r(7),ke=r(12),Oe=r(20),me=r(2),Ee=me.LUAI_MAXCCALLS,Ue=me.MAX_INT,Re=me.lua_assert,ye=r(4),Ne=r(15),Se=Ne.OpCodesI,we=Se.OP_CALL,Ie=Se.OP_CLOSURE,Me=Se.OP_FORLOOP,Pe=Se.OP_FORPREP,De=Se.OP_GETUPVAL,Ce=Se.OP_MOVE,Ve=Se.OP_NEWTABLE,Be=Se.OP_SETTABLE,Ge=Se.OP_TAILCALL,Ke=Se.OP_TFORCALL,je=Se.OP_TFORLOOP,Fe=Se.OP_VARARG,He=Ne.LFIELDS_PER_FLUSH,Xe=Ne.SETARG_B,ze=Ne.SETARG_C,qe=Ne.SET_OPCODE,Ye=r(9),Je=Ye.luaS_eqlngstr,Ze=Ye.luaS_new,We=Ye.luaS_newliteral,Qe=r(8),$e=ke.Proto,et=Oe.RESERVED,tt=function(e){return e===nt.VCALL||e===nt.VVARARG},rt=function(e,t){return Je(e,t)},at=function e(){a(this,e),this.previous=null,this.firstlabel=NaN,this.firstgoto=NaN,this.nactvar=NaN,this.upval=NaN,this.isloop=NaN},nt={VVOID:0,VNIL:1,VTRUE:2,VFALSE:3,VK:4,VKFLT:5,VKINT:6,VNONRELOC:7,VLOCAL:8,VUPVAL:9,VINDEXED:10,VJMP:11,VRELOCABLE:12,VCALL:13,VVARARG:14},ut=function(e){return nt.VLOCAL<=e&&e<=nt.VINDEXED},st=function(e){return e===nt.VNONRELOC||e===nt.VLOCAL},ot=function(){function e(){a(this,e),this.k=NaN,this.u={ival:NaN,nval:NaN,info:NaN,ind:{idx:NaN,t:NaN,vt:NaN}},this.t=NaN,this.f=NaN}return n(e,[{key:"to",value:function(e){this.k=e.k,this.u=e.u,this.t=e.t,this.f=e.f}}]),e}(),lt=function e(){a(this,e),this.f=null,this.prev=null,this.ls=null,this.bl=null,this.pc=NaN,this.lasttarget=NaN,this.jpc=NaN,this.nk=NaN,this.np=NaN,this.firstlocal=NaN,this.nlocvars=NaN,this.nactvar=NaN,this.nups=NaN,this.freereg=NaN},it=function e(){a(this,e),this.idx=NaN},ct=function e(){a(this,e),this.name=null,this.pc=NaN,this.line=NaN,this.nactvar=NaN},_t=function e(){a(this,e),this.arr=[],this.n=NaN,this.size=NaN},ft=function e(){a(this,e),this.actvar={arr:[],n:NaN,size:NaN},this.gt=new _t,this.label=new _t},pt=function(e,t){e.t.token=0,Oe.luaX_syntaxerror(e,t)},vt=function(e,t){Oe.luaX_syntaxerror(e,ye.luaO_pushfstring(e.L,o("%s expected",!0),Oe.luaX_token2str(e,t)))},dt=function(e,t,r){var a=e.ls.L,n=e.f.linedefined,u=0===n?o("main function",!0):ye.luaO_pushfstring(a,o("function at line %d",!0),n),s=ye.luaO_pushfstring(a,o("too many %s (limit is %d) in %s",!0),r,t,u);Oe.luaX_syntaxerror(e.ls,s)},ht=function(e,t,r,a){t>r&&dt(e,r,a)},Lt=function(e,t){return e.t.token===t&&(Oe.luaX_next(e),!0)},At=function(e,t){e.t.token!==t&&vt(e,t)},gt=function(e,t){At(e,t),Oe.luaX_next(e)},bt=function(e,t,r){t||Oe.luaX_syntaxerror(e,r)},Tt=function(e,t,r,a){Lt(e,t)||(a===e.linenumber?vt(e,t):Oe.luaX_syntaxerror(e,ye.luaO_pushfstring(e.L,o("%s expected (to close %s at line %d)"),Oe.luaX_token2str(e,t),Oe.luaX_token2str(e,r),a)))},xt=function(e){At(e,et.TK_NAME);var t=e.t.seminfo.ts;return Oe.luaX_next(e),t},kt=function(e,t,r){e.f=e.t=V,e.k=t,e.u.info=r},Ot=function(e,t,r){kt(t,nt.VK,Te(e.fs,r))},mt=function(e,t){Ot(e,t,xt(e))},Et=function(e,t){var r=e.fs,a=r.f;return a.locvars[r.nlocvars]=new ye.LocVar,a.locvars[r.nlocvars].varname=t,r.nlocvars++},Ut=function(e,t){var r=e.fs,a=e.dyd,n=Et(e,t);ht(r,a.actvar.n+1-r.firstlocal,200,o("local variables",!0)),a.actvar.arr[a.actvar.n]=new it,a.actvar.arr[a.actvar.n].idx=n,a.actvar.n++},Rt=function(e,t){Ut(e,Oe.luaX_newstring(e,o(t,!0)))},yt=function(e,t){var r=e.ls.dyd.actvar.arr[e.firstlocal+t].idx;return Re(r<e.nlocvars),e.f.locvars[r]},Nt=function(e,t){var r=e.fs;for(r.nactvar=r.nactvar+t;t;t--)yt(r,r.nactvar-t).startpc=r.pc},St=function(e,t){for(e.ls.dyd.actvar.n-=e.nactvar-t;e.nactvar>t;)yt(e,--e.nactvar).endpc=e.pc},wt=function(e,t){for(var r=e.f.upvalues,a=0;a<e.nups;a++)if(rt(r[a].name,t))return a;return-1},It=function(e,t,r){var a=e.f;return ht(e,e.nups+1,ke.MAXUPVAL,o("upvalues",!0)),a.upvalues[e.nups]={instack:r.k===nt.VLOCAL,idx:r.u.info,name:t},e.nups++},Mt=function(e,t){for(var r=e.nactvar-1;r>=0;r--)if(rt(t,yt(e,r).varname))return r;return-1},Pt=function(e,t){for(var r=e.bl;r.nactvar>t;)r=r.previous;r.upval=1},Dt=function e(t,r,a,n){if(null===t)kt(a,nt.VVOID,0);else{var u=Mt(t,r);if(u>=0)kt(a,nt.VLOCAL,u),n||Pt(t,u);else{var s=wt(t,r);if(s<0){if(e(t.prev,r,a,0),a.k===nt.VVOID)return;s=It(t,r,a)}kt(a,nt.VUPVAL,s)}}},Ct=function(e,t){var r=xt(e),a=e.fs;if(Dt(a,r,t,1),t.k===nt.VVOID){var n=new ot;Dt(a,e.envn,t,1),Re(t.k!==nt.VVOID),Ot(e,n,r),re(a,t,n)}},Vt=function(e,t,r,a){var n=e.fs,u=t-r;if(tt(a.k))u++,u<0&&(u=0),ge(n,a,u),u>1&&pe(n,u-1);else if(a.k!==nt.VVOID&&Z(n,a),u>0){var s=n.freereg;pe(n,u),oe(n,s,u)}r>t&&(e.fs.freereg-=r-t)},Bt=function(e){var t=e.L;++t.nCcalls,ht(e.fs,t.nCcalls,Ee,o("JS levels",!0))},Gt=function(e){return e.L.nCcalls--},Kt=function(e,t,r){var a=e.fs,n=e.dyd.gt,u=n.arr[t];if(Re(rt(u.name,r.name)),u.nactvar<r.nactvar){var s=yt(a,u.nactvar).varname,l=ye.luaO_pushfstring(e.L,o("<goto %s> at line %d jumps into the scope of local '%s'"),u.name.getstr(),u.line,s.getstr());pt(e,l)}ie(a,u.pc,r.pc);for(var i=t;i<n.n-1;i++)n.arr[i]=n.arr[i+1];n.n--},jt=function(e,t){for(var r=e.fs.bl,a=e.dyd,n=a.gt.arr[t],u=r.firstlabel;u<a.label.n;u++){var s=a.label.arr[u];if(rt(s.name,n.name))return n.nactvar>s.nactvar&&(r.upval||a.label.n>r.firstlabel)&&le(e.fs,n.pc,s.nactvar),Kt(e,t,s),!0}return!1},Ft=function(e,t,r,a,n){var u=t.n;return t.arr[u]=new ct,t.arr[u].name=r,t.arr[u].line=a,t.arr[u].nactvar=e.fs.nactvar,t.arr[u].pc=n,t.n=u+1,u},Ht=function(e,t){for(var r=e.dyd.gt,a=e.fs.bl.firstgoto;a<r.n;)rt(r.arr[a].name,t.name)?Kt(e,a,t):a++},Xt=function(e,t){for(var r=t.firstgoto,a=e.ls.dyd.gt;r<a.n;){var n=a.arr[r];n.nactvar>t.nactvar&&(t.upval&&le(e,n.pc,t.nactvar),n.nactvar=t.nactvar),jt(e.ls,r)||r++}},zt=function(e,t,r){t.isloop=r,t.nactvar=e.nactvar,t.firstlabel=e.ls.dyd.label.n,t.firstgoto=e.ls.dyd.gt.n,t.upval=0,t.previous=e.bl,e.bl=t,Re(e.freereg===e.nactvar)},qt=function(e){var t=We(e.L,"break"),r=Ft(e,e.dyd.label,t,0,e.fs.pc);Ht(e,e.dyd.label.arr[r])},Yt=function(e,t){var r=Oe.isreserved(t.name)?"<%s> at line %d not inside a loop":"no visible label '%s' for <goto> at line %d";r=ye.luaO_pushfstring(e.L,o(r),t.name.getstr(),t.line),pt(e,r)},Jt=function(e){var t=e.L,r=new $e(t),a=e.fs;return a.f.p[a.np++]=r,r},Zt=function(e,t){var r=e.fs.prev;kt(t,nt.VRELOCABLE,j(r,Ie,0,r.np-1)),Z(r,t)},Wt=function(e,t,r){t.prev=e.fs,t.ls=e,e.fs=t,t.pc=0,t.lasttarget=0,t.jpc=V,t.freereg=0,t.nk=0,t.np=0,t.nups=0,t.nlocvars=0,t.nactvar=0,t.firstlocal=e.dyd.actvar.n,t.bl=null;var a=new $e(e.L);a=t.f,a.source=e.source,a.maxstacksize=2,zt(t,r,!1)},Qt=function(e){var t=e.bl,r=e.ls;if(t.previous&&t.upval){var a=ue(e);le(e,a,t.nactvar),ce(e,a)}t.isloop&&qt(r),e.bl=t.previous,St(e,t.nactvar),Re(t.nactvar===e.nactvar),e.freereg=e.nactvar,r.dyd.label.n=t.firstlabel,t.previous?Xt(e,t):t.firstgoto<r.dyd.gt.n&&Yt(r,r.dyd.gt.arr[t.firstgoto])},$t=function(e){var t=e.fs;ve(t,0,0),Qt(t),Re(null===t.bl),e.fs=t.prev},er=function(e,t){switch(e.t.token){case et.TK_ELSE:case et.TK_ELSEIF:case et.TK_END:case et.TK_EOS:return!0;case et.TK_UNTIL:return t;default:return!1}},tr=function(e){for(;!er(e,1);){if(e.t.token===et.TK_RETURN)return void qr(e);qr(e)}},rr=function(e,t){var r=e.fs,a=new ot;J(r,t),Oe.luaX_next(e),mt(e,a),re(r,t,a)},ar=function(e,t){Oe.luaX_next(e),xr(e,t),W(e.fs,t),gt(e,93)},nr=function e(){a(this,e),this.v=new ot,this.t=new ot,this.nh=NaN,this.na=NaN,this.tostore=NaN},ur=function(e,t){var r=e.fs,a=e.fs.freereg,n=new ot,u=new ot;e.t.token===et.TK_NAME?(ht(r,t.nh,Ue,o("items in a constructor",!0)),mt(e,n)):ar(e,n),t.nh++,gt(e,61);var s=q(r,n);xr(e,u),K(r,Be,t.t.u.info,s,q(r,u)),r.freereg=a},sr=function(e,t){t.v.k!==nt.VVOID&&(Z(e,t.v),t.v.k=nt.VVOID,t.tostore===He&&(he(e,t.t.u.info,t.na,t.tostore),t.tostore=0))},or=function(e,t){0!==t.tostore&&(tt(t.v.k)?(Le(e,t.v),he(e,t.t.u.info,t.na,s),t.na--):(t.v.k!==nt.VVOID&&Z(e,t.v),he(e,t.t.u.info,t.na,t.tostore)))},lr=function(e,t){xr(e,t.v),ht(e.fs,t.na,Ue,o("items in a constructor",!0)),t.na++,t.tostore++},ir=function(e,t){switch(e.t.token){case et.TK_NAME:61!==Oe.luaX_lookahead(e)?lr(e,t):ur(e,t);break;case 91:ur(e,t);break;default:lr(e,t)}},cr=function(e,t){var r=e.fs,a=e.linenumber,n=K(r,Ve,0,0,0),u=new nr;u.na=u.nh=u.tostore=0,u.t=t,kt(t,nt.VRELOCABLE,n),kt(u.v,nt.VVOID,0),Z(e.fs,t),gt(e,123);do{if(Re(u.v.k===nt.VVOID||u.tostore>0),125===e.t.token)break;sr(r,u),ir(e,u)}while(Lt(e,44)||Lt(e,59));Tt(e,125,123,a),or(r,u),Xe(r.f.code[n],ye.luaO_int2fb(u.na)),ze(r.f.code[n],ye.luaO_int2fb(u.nh))},_r=function(e){var t=e.fs,r=t.f,a=0;if(r.is_vararg=!1,41!==e.t.token)do{switch(e.t.token){case et.TK_NAME:Ut(e,xt(e)),a++;break;case et.TK_DOTS:Oe.luaX_next(e),r.is_vararg=!0;break;default:Oe.luaX_syntaxerror(e,o("<name> or '...' expected",!0))}}while(!r.is_vararg&&Lt(e,44));Nt(e,a),r.numparams=t.nactvar,pe(t,t.nactvar)},fr=function(e,t,r,a){var n=new lt,u=new at;n.f=Jt(e),n.f.linedefined=a,Wt(e,n,u),gt(e,40),r&&(Rt(e,"self"),Nt(e,1)),_r(e),gt(e,41),tr(e),n.f.lastlinedefined=e.linenumber,Tt(e,et.TK_END,et.TK_FUNCTION,a),Zt(e,t),$t(e)},pr=function(e,t){var r=1;for(xr(e,t);Lt(e,44);)Z(e.fs,t),xr(e,t),r++;return r},vr=function(e,t,r){var a=e.fs,n=new ot;switch(e.t.token){case 40:Oe.luaX_next(e),41===e.t.token?n.k=nt.VVOID:(pr(e,n),Le(a,n)),Tt(e,41,40,r);break;case 123:cr(e,n);break;case et.TK_STRING:Ot(e,n,e.t.seminfo.ts),Oe.luaX_next(e);break;default:Oe.luaX_syntaxerror(e,o("function arguments expected",!0))}Re(t.k===nt.VNONRELOC);var u=void 0,l=t.u.info;tt(n.k)?u=s:(n.k!==nt.VVOID&&Z(a,n),u=a.freereg-(l+1)),kt(t,nt.VCALL,K(a,we,l,u+1,2)),Q(a,r),a.freereg=l+1},dr=function(e,t){switch(e.t.token){case 40:var r=e.linenumber;return Oe.luaX_next(e),xr(e,t),Tt(e,41,40,r),void z(e.fs,t);case et.TK_NAME:return void Ct(e,t);default:Oe.luaX_syntaxerror(e,o("unexpected symbol",!0))}},hr=function(e,t){var r=e.fs,a=e.linenumber;for(dr(e,t);;)switch(e.t.token){case 46:rr(e,t);break;case 91:var n=new ot;J(r,t),ar(e,n),re(r,t,n);break;case 58:var u=new ot;Oe.luaX_next(e),mt(e,u),de(r,t,u),vr(e,t,a);break;case 40:case et.TK_STRING:case 123:Z(r,t),vr(e,t,a);break;default:return}},Lr=function(e,t){switch(e.t.token){case et.TK_FLT:kt(t,nt.VKFLT,0),t.u.nval=e.t.seminfo.r;break;case et.TK_INT:kt(t,nt.VKINT,0),t.u.ival=e.t.seminfo.i;break;case et.TK_STRING:Ot(e,t,e.t.seminfo.ts);break;case et.TK_NIL:kt(t,nt.VNIL,0);break;case et.TK_TRUE:kt(t,nt.VTRUE,0);break;case et.TK_FALSE:kt(t,nt.VFALSE,0);break;case et.TK_DOTS:var r=e.fs;bt(e,r.f.is_vararg,o("cannot use '...' outside a vararg function",!0)),kt(t,nt.VVARARG,K(r,Fe,0,1,0));break;case 123:return void cr(e,t);case et.TK_FUNCTION:return Oe.luaX_next(e),void fr(e,t,0,e.linenumber);default:return void hr(e,t)}Oe.luaX_next(e)},Ar=function(e){switch(e){case et.TK_NOT:return D;case 45:return P;case 126:return I;case 35:return M;default:return C}},gr=function(e){switch(e){case 43:return c;case 45:return S;case 42:return O;case 37:return k;case 94:return R;case 47:return h;case et.TK_IDIV:return b;case 38:return f;case 124:return p;case 126:return v;case et.TK_SHL:return y;case et.TK_SHR:return N;case et.TK_CONCAT:return d;case et.TK_NE:return m;case et.TK_EQ:return L;case 60:return x;case et.TK_LE:return T;case 62:return g;case et.TK_GE:return A;case et.TK_AND:return _;case et.TK_OR:return U;default:return E}},br=[{left:10,right:10},{left:10,right:10},{left:11,right:11},{left:11,right:11},{left:14,right:13},{left:11,right:11},{left:11,right:11},{left:6,right:6},{left:4,right:4},{left:5,right:5},{left:7,right:7},{left:7,right:7},{left:9,right:8},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:2,right:2},{left:1,right:1}],Tr=function e(t,r,a){Bt(t);var n=Ar(t.t.token);if(n!==C){var u=t.linenumber;Oe.luaX_next(t),e(t,r,12),fe(t.fs,n,r,u)}else Lr(t,r);for(var s=gr(t.t.token);s!==E&&br[s].left>a;){var o=new ot,l=t.linenumber;Oe.luaX_next(t),ae(t.fs,s,r);var i=e(t,o,br[s].right);_e(t.fs,s,r,o,l),s=i}return Gt(t),s},xr=function(e,t){Tr(e,t,0)},kr=function(e){var t=e.fs,r=new at;zt(t,r,0),tr(e),Qt(t)},Or=function e(){a(this,e),this.prev=null,this.v=new ot},mr=function(e,t,r){for(var a=e.fs,n=a.freereg,u=!1;t;t=t.prev)t.v.k===nt.VINDEXED&&(t.v.u.ind.vt===r.k&&t.v.u.ind.t===r.u.info&&(u=!0,t.v.u.ind.vt=nt.VLOCAL,t.v.u.ind.t=n),r.k===nt.VLOCAL&&t.v.u.ind.idx===r.u.info&&(u=!0,t.v.u.ind.idx=n));if(u){var s=r.k===nt.VLOCAL?Ce:De;K(a,s,n,r.u.info,0),pe(a,1)}},Er=function e(t,r,a){var n=new ot;if(bt(t,ut(r.v.k),o("syntax error",!0)),Lt(t,44)){var u=new Or;u.prev=r,hr(t,u.v),u.v.k!==nt.VINDEXED&&mr(t,r,u.v),ht(t.fs,a+t.L.nCcalls,Ee,o("JS levels",!0)),e(t,u,a+1)}else{gt(t,61);var s=pr(t,n);if(s===a)return Ae(t.fs,n),void be(t.fs,r.v,n);Vt(t,a,s,n)}kt(n,nt.VNONRELOC,t.fs.freereg-1),be(t.fs,r.v,n)},Ur=function(e){var t=new ot;return xr(e,t),t.k===nt.VNIL&&(t.k=nt.VFALSE),te(e.fs,t),t.f},Rr=function(e,t){var r=e.linenumber,a=void 0;Lt(e,et.TK_GOTO)?a=xt(e):(Oe.luaX_next(e),a=We(e.L,"break"));var n=Ft(e,e.dyd.gt,a,r,t);jt(e,n)},yr=function(e,t,r){for(var a=e.bl.firstlabel;a<t.n;a++)if(rt(r,t.arr[a].name)){var n=ye.luaO_pushfstring(e.ls.L,o("label '%s' already defined on line %d",!0),r.getstr(),t.arr[a].line);pt(e.ls,n)}},Nr=function(e){for(;59===e.t.token||e.t.token===et.TK_DBCOLON;)qr(e)},Sr=function(e,t,r){var a=e.fs,n=e.dyd.label,u=void 0;yr(a,n,t),gt(e,et.TK_DBCOLON),u=Ft(e,n,t,r,$(a)),Nr(e),er(e,0)&&(n.arr[u].nactvar=a.bl.nactvar),Ht(e,n.arr[u])},wr=function(e,t){var r=e.fs,a=new at;Oe.luaX_next(e);var n=$(r),u=Ur(e);zt(r,a,1),gt(e,et.TK_DO),kr(e),se(r,n),Tt(e,et.TK_END,et.TK_WHILE,t),Qt(r),ce(r,u)},Ir=function(e,t){var r=e.fs,a=$(r),n=new at,u=new at;zt(r,n,1),zt(r,u,0),Oe.luaX_next(e),tr(e),Tt(e,et.TK_UNTIL,et.TK_REPEAT,t);var s=Ur(e);u.upval&&le(r,s,u.nactvar),Qt(r),ie(r,s,a),Qt(r)},Mr=function(e){var t=new ot;return xr(e,t),Z(e.fs,t),Re(t.k===nt.VNONRELOC),t.u.info},Pr=function(e,t,r,a,n){var u=new at,s=e.fs,o=void 0;Nt(e,3),gt(e,et.TK_DO);var l=n?F(s,Pe,t,V):ue(s);zt(s,u,0),Nt(e,a),pe(s,a),kr(e),Qt(s),ce(s,l),n?o=F(s,Me,t,V):(K(s,Ke,t,0,a),Q(s,r),o=F(s,je,t+2,V)),ie(s,o,l+1),Q(s,r)},Dr=function(e,t,r){var a=e.fs,n=a.freereg;Rt(e,"(for index)"),Rt(e,"(for limit)"),Rt(e,"(for step)"),Ut(e,t),gt(e,61),Mr(e),gt(e,44),Mr(e),Lt(e,44)?Mr(e):(H(a,a.freereg,ne(a,1)),pe(a,1)),Pr(e,n,r,1,1)},Cr=function(e,t){var r=e.fs,a=new ot,n=4,u=r.freereg;for(Rt(e,"(for generator)"),Rt(e,"(for state)"),Rt(e,"(for control)"),Ut(e,t);Lt(e,44);)Ut(e,xt(e)),n++;gt(e,et.TK_IN);var s=e.linenumber;Vt(e,3,pr(e,a),a),G(r,3),Pr(e,u,s,n-3,0)},Vr=function(e,t){var r=e.fs,a=new at;zt(r,a,1),Oe.luaX_next(e);var n=xt(e);switch(e.t.token){case 61:Dr(e,n,t);break;case 44:case et.TK_IN:Cr(e,n);break;default:Oe.luaX_syntaxerror(e,o("'=' or 'in' expected",!0))}Tt(e,et.TK_END,et.TK_FOR,t),Qt(r)},Br=function(e,t){var r=new at,a=e.fs,n=new ot,u=void 0;if(Oe.luaX_next(e),xr(e,n),gt(e,et.TK_THEN),e.t.token===et.TK_GOTO||e.t.token===et.TK_BREAK){for(ee(e.fs,n),zt(a,r,!1),Rr(e,n.t);Lt(e,59););if(er(e,0))return Qt(a),t;u=ue(a)}else te(e.fs,n),zt(a,r,!1),u=n.f;return tr(e),Qt(a),e.t.token!==et.TK_ELSE&&e.t.token!==et.TK_ELSEIF||(t=X(a,t,ue(a))),ce(a,u),t},Gr=function(e,t){var r=e.fs,a=V;for(a=Br(e,a);e.t.token===et.TK_ELSEIF;)a=Br(e,a);Lt(e,et.TK_ELSE)&&kr(e),Tt(e,et.TK_END,et.TK_IF,t),ce(r,a)},Kr=function(e){var t=new ot,r=e.fs;Ut(e,xt(e)),Nt(e,1),fr(e,t,0,e.linenumber),yt(r,t.u.info).startpc=r.pc},jr=function(e){var t=0,r=void 0,a=new ot;do{Ut(e,xt(e)),t++}while(Lt(e,44));Lt(e,61)?r=pr(e,a):(a.k=nt.VVOID,r=0),Vt(e,t,r,a),Nt(e,t)},Fr=function(e,t){var r=0;for(Ct(e,t);46===e.t.token;)rr(e,t);return 58===e.t.token&&(r=1,rr(e,t)),r},Hr=function(e,t){var r=new ot,a=new ot;Oe.luaX_next(e);var n=Fr(e,r);fr(e,a,n,t),be(e.fs,r,a),Q(e.fs,t)},Xr=function(e){var t=e.fs,r=new Or;hr(e,r.v),61===e.t.token||44===e.t.token?(r.prev=null,Er(e,r,1)):(bt(e,r.v.k===nt.VCALL,o("syntax error",!0)),ze(B(t,r.v),1))},zr=function(e){var t=e.fs,r=new ot,a=void 0,n=void 0;er(e,1)||59===e.t.token?a=n=0:(n=pr(e,r),tt(r.k)?(Le(t,r),r.k===nt.VCALL&&1===n&&(qe(B(t,r),Ge),Re(B(t,r).A===t.nactvar)),a=t.nactvar,n=s):1===n?a=Y(t,r):(Z(t,r),a=t.nactvar,Re(n===t.freereg-a))),ve(t,a,n),Lt(e,59)},qr=function(e){var t=e.linenumber;switch(Bt(e),e.t.token){case 59:Oe.luaX_next(e);break;case et.TK_IF:Gr(e,t);break;case et.TK_WHILE:wr(e,t);break;case et.TK_DO:Oe.luaX_next(e),kr(e),Tt(e,et.TK_END,et.TK_DO,t);break;case et.TK_FOR:Vr(e,t);break;case et.TK_REPEAT:Ir(e,t);break;case et.TK_FUNCTION:Hr(e,t);break;case et.TK_LOCAL:Oe.luaX_next(e),Lt(e,et.TK_FUNCTION)?Kr(e):jr(e);break;case et.TK_DBCOLON:Oe.luaX_next(e),Sr(e,xt(e),t);break;case et.TK_RETURN:Oe.luaX_next(e),zr(e);break;case et.TK_BREAK:case et.TK_GOTO:Rr(e,ue(e.fs));break;default:Xr(e)}Re(e.fs.f.maxstacksize>=e.fs.freereg&&e.fs.freereg>=e.fs.nactvar),e.fs.freereg=e.fs.nactvar,Gt(e)},Yr=function(e,t){var r=new at,a=new ot;Wt(e,t,r),t.f.is_vararg=!0,kt(a,nt.VLOCAL,0),It(t,e.envn,a),Oe.luaX_next(e),tr(e),At(e,et.TK_EOS),$t(e)},Jr=function(e,t,r,a,n,u){var s=new Oe.LexState,o=new lt,l=ke.luaF_newLclosure(e,1);return xe.luaD_inctop(e),e.stack[e.top-1].setclLvalue(l),s.h=Qe.luaH_new(e),xe.luaD_inctop(e),e.stack[e.top-1].sethvalue(s.h),o.f=l.p=new $e(e),o.f.source=Ze(e,n),s.buff=r,s.dyd=a,a.actvar.n=a.gt.n=a.label.n=0,Oe.luaX_setinput(e,s,t,o.f.source,u),Yr(s,o),Re(!o.prev&&1===o.nups&&!s.fs),Re(0===a.actvar.n&&0===a.gt.n&&0===a.label.n),delete e.stack[--e.top],l};e.exports.Dyndata=ft,e.exports.expkind=nt,e.exports.expdesc=ot,e.exports.luaY_parser=Jr,e.exports.vkisinreg=st},function(e,t,r){"use strict";var a=r(1),n=a.LUA_OK,u=a.LUA_TFUNCTION,s=a.LUA_TSTRING,o=a.LUA_YIELD,l=a.lua_Debug,i=a.lua_checkstack,c=a.lua_concat,_=a.lua_error,f=a.lua_getstack,p=a.lua_gettop,v=a.lua_insert,d=a.lua_isyieldable,h=a.lua_newthread,L=a.lua_pop,A=a.lua_pushboolean,g=a.lua_pushcclosure,b=a.lua_pushliteral,T=a.lua_pushthread,x=a.lua_pushvalue,k=a.lua_resume,O=a.lua_status,m=a.lua_tothread,E=a.lua_type,U=a.lua_upvalueindex,R=a.lua_xmove,y=a.lua_yield,N=r(6),S=N.luaL_argcheck,w=N.luaL_checktype,I=N.luaL_newlib,M=N.luaL_where,P=r(3),D=P.to_luastring,C=function(e){var t=m(e,1);return S(e,t,1,D("thread expected",!0)),t},V=function(e,t,r){if(!i(t,r))return b(e,"too many arguments to resume"),-1;if(O(t)===n&&0===p(t))return b(e,"cannot resume dead coroutine"),-1;R(e,t,r);var a=k(t,e,r);if(a===n||a===o){var u=p(t);return i(e,u+1)?(R(t,e,u),u):(L(t,u),b(e,"too many results to resume"),-1)}return R(t,e,1),-1},B=function(e){var t=C(e),r=V(e,t,p(e)-1);return r<0?(A(e,0),v(e,-2),2):(A(e,1),v(e,-(r+1)),r+1)},G=function(e){var t=m(e,U(1)),r=V(e,t,p(e));return r<0?(E(e,-1)===s&&(M(e,1),v(e,-2),c(e,2)),_(e)):r},K=function(e){w(e,1,u);var t=h(e);return x(e,1),R(e,t,1),1},j=function(e){return K(e),g(e,G,1),1},F=function(e){return y(e,p(e))},H=function(e){var t=C(e);if(e===t)b(e,"running");else switch(O(t)){case o:b(e,"suspended");break;case n:var r=new l;f(t,0,r)>0?b(e,"normal"):0===p(t)?b(e,"dead"):b(e,"suspended");break;default:b(e,"dead")}return 1},X=function(e){return A(e,d(e)),1},z=function(e){return A(e,T(e)),2},q={create:K,isyieldable:X,resume:B,running:z,status:H,wrap:j,yield:F},Y=function(e){return I(e,q),1};e.exports.luaopen_coroutine=Y},function(e,t,r){"use strict";var a=r(5),n=a.LUA_MAXINTEGER,u=r(1),s=u.LUA_OPEQ,o=u.LUA_OPLT,l=u.LUA_TFUNCTION,i=u.LUA_TNIL,c=u.LUA_TTABLE,_=u.lua_call,f=u.lua_checkstack,p=u.lua_compare,v=u.lua_createtable,d=u.lua_geti,h=u.lua_getmetatable,L=u.lua_gettop,A=u.lua_insert,g=u.lua_isnil,b=u.lua_isnoneornil,T=u.lua_isstring,x=u.lua_pop,k=u.lua_pushinteger,O=u.lua_pushnil,m=u.lua_pushstring,E=u.lua_pushvalue,U=u.lua_rawget,R=u.lua_setfield,y=u.lua_seti,N=u.lua_settop,S=u.lua_toboolean,w=u.lua_type,I=r(6),M=I.luaL_Buffer,P=I.luaL_addlstring,D=I.luaL_addvalue,C=I.luaL_argcheck,V=I.luaL_buffinit,B=I.luaL_checkinteger,G=I.luaL_checktype,K=I.luaL_error,j=I.luaL_len,F=I.luaL_newlib,H=I.luaL_opt,X=I.luaL_optinteger,z=I.luaL_optlstring,q=I.luaL_pushresult,Y=I.luaL_typename,J=r(16),Z=r(3),W=Z.to_luastring,Q=function(e,t,r){return m(e,t),U(e,-r)!==i},$=function(e,t,r){if(w(e,t)!==c){var a=1;!h(e,t)||1&r&&!Q(e,W("__index",!0),++a)||2&r&&!Q(e,W("__newindex",!0),++a)||4&r&&!Q(e,W("__len",!0),++a)?G(e,t,c):x(e,a)}},ee=function(e,t,r){return $(e,t,4|r),j(e,t)},te=function(e,t,r){d(e,1,r),T(e,-1)||K(e,W("invalid value (%s) at index %d in table for 'concat'"),Y(e,-1),r),D(t)},re=function(e){var t=ee(e,1,3)+1,r=void 0;switch(L(e)){case 2:r=t;break;case 3:r=B(e,2),C(e,1<=r&&r<=t,2,W("position out of bounds",!0));for(var a=t;a>r;a--)d(e,1,a-1),y(e,1,a);break;default:return K(e,W("wrong number of arguments to 'insert'",!0))}return y(e,1,r),0},ae=function(e){var t=ee(e,1,3),r=X(e,2,t);for(r!==t&&C(e,1<=r&&r<=t+1,1,W("position out of bounds",!0)),d(e,1,r);r<t;r++)d(e,1,r+1),y(e,1,r);return O(e),y(e,1,r),1},ne=function(e){var t=B(e,2),r=B(e,3),a=B(e,4),u=b(e,5)?1:5;if($(e,1,1),$(e,u,2),r>=t){C(e,t>0||r<n+t,3,W("too many elements to move",!0));var o=r-t+1;if(C(e,a<=n-o+1,4,W("destination wrap around",!0)),a>r||a<=t||1!==u&&1!==p(e,1,u,s))for(var l=0;l<o;l++)d(e,1,t+l),y(e,u,a+l);else for(var i=o-1;i>=0;i--)d(e,1,t+i),y(e,u,a+i)}return E(e,u),1},ue=function(e){var t=ee(e,1,1),r=z(e,2,W("")),a=r.length,n=X(e,3,1);t=X(e,4,t);var u=new M;for(V(e,u);n<t;n++)te(e,u,n),P(u,r,a);return n===t&&te(e,u,n),q(u),1},se=function(e){var t=L(e);v(e,t,1),A(e,1);for(var r=t;r>=1;r--)y(e,1,r);return k(e,t),R(e,1,W("n")),1},oe=function(e){var t=X(e,2,1),r=H(e,B,3,j(e,1));if(t>r)return 0;var a=r-t;if(a>=Number.MAX_SAFE_INTEGER||!f(e,++a))return K(e,W("too many results to unpack",!0));for(;t<r;t++)d(e,1,t);return d(e,1,r),a},le=function(){return Math.floor(1*Math.random()<<32)},ie=function(e,t,r){y(e,1,t),y(e,1,r)},ce=function(e,t,r){if(g(e,2))return p(e,t,r,o);E(e,2),E(e,t-1),E(e,r-2),_(e,2,1);var a=S(e,-1);return x(e,1),a},_e=function(e,t,r){for(var a=t,n=r-1;;){for(;d(e,1,++a),ce(e,-1,-2);)a==r-1&&K(e,W("invalid order function for sorting")),x(e,1);for(;d(e,1,--n),ce(e,-3,-1);)n<a&&K(e,W("invalid order function for sorting")),x(e,1);if(n<a)return x(e,1),ie(e,r-1,a),a;ie(e,a,n)}},fe=function(e,t,r){var a=Math.floor((t-e)/4),n=r%(2*a)+(e+a);return J.lua_assert(e+a<=n&&n<=t-a),n},pe=function e(t,r,a,n){for(;r<a;){if(d(t,1,r),d(t,1,a),ce(t,-1,-2)?ie(t,r,a):x(t,2),a-r==1)return;var u=void 0;if(u=a-r<100||0===n?Math.floor((r+a)/2):fe(r,a,n),d(t,1,u),d(t,1,r),ce(t,-2,-1)?ie(t,u,r):(x(t,1),d(t,1,a),ce(t,-1,-2)?ie(t,u,a):x(t,2)),a-r==2)return;d(t,1,u),E(t,-1),d(t,1,a-1),ie(t,u,a-1),u=_e(t,r,a);var s=void 0;u-r<a-u?(e(t,r,u-1,n),s=u-r,r=u+1):(e(t,u+1,a,n),s=a-u,a=u-1),(a-r)/128>s&&(n=le())}},ve=function(e){var t=ee(e,1,3);return t>1&&(C(e,t<n,1,W("array too big",!0)),b(e,2)||G(e,2,l),N(e,2),pe(e,1,t,0)),0},de={concat:ue,insert:re,move:ne,pack:se,remove:ae,sort:ve,unpack:oe},he=function(e){return F(e,de),1};e.exports.luaopen_table=he},function(e,t,r){"use strict";var a=r(1),n=a.LUA_TNIL,u=a.LUA_TTABLE,s=(a.lua_close,a.lua_createtable),o=a.lua_getfield,l=(a.lua_isboolean,a.lua_isnoneornil),i=a.lua_pop,c=(a.lua_pushboolean,a.lua_pushfstring),_=a.lua_pushinteger,f=(a.lua_pushliteral,a.lua_pushnil,a.lua_pushnumber),p=(a.lua_pushstring,a.lua_setfield),v=a.lua_settop,d=(a.lua_toboolean,a.lua_tointegerx),h=r(6),L=h.luaL_Buffer,A=h.luaL_addchar,g=h.luaL_addstring,b=h.luaL_argerror,T=h.luaL_buffinit,x=h.luaL_checkinteger,k=(h.luaL_checkstring,h.luaL_checktype),O=h.luaL_error,m=(h.luaL_execresult,h.luaL_fileresult,h.luaL_newlib),E=h.luaL_opt,U=(h.luaL_optinteger,h.luaL_optlstring),R=(h.luaL_optstring,h.luaL_pushresult),y=r(3),N=y.luastring_indexOf,S=y.to_jsstring,w=y.to_luastring,I=r(35),M=w("aAbBcdHIjmMpSUwWxXyYZ%"),P=M,D=function(e,t,r){_(e,r),p(e,-2,w(t,!0))},C=function(e,t,r){D(e,"sec",r?t.getUTCSeconds():t.getSeconds()),D(e,"min",r?t.getUTCMinutes():t.getMinutes()),D(e,"hour",r?t.getUTCHours():t.getHours()),D(e,"day",r?t.getUTCDate():t.getDate()),D(e,"month",r?t.getUTCMonth():t.getMonth()),D(e,"year",r?t.getUTCFullYear():t.getFullYear()),D(e,"wday",r?t.getUTCDay():t.getDay());var a=new Date;D(e,"yday",Math.floor((a-new Date(a.getFullYear(),0,0))/864e5))},V=Number.MAX_SAFE_INTEGER/2,B=function(e,t,r,a){var u=o(e,-1,w(t,!0)),s=d(e,-1);if(!1===s){if(u!==n)return O(e,w("field '%s' is not an integer"),t);if(r<0)return O(e,w("field '%s' missing in date table"),t);s=r}else{if(!(-V<=s&&s<=V))return O(e,w("field '%s' is out-of-bound"),t);s-=a}return i(e,1),s},G=function(e,t,r,a,n){for(var u=0;u<n;u++)if(e[t+u]!==r[a+u])return!1;return!0},K=function(e,t,r,a){for(var n=P,u=0,s=1;u<n.length&&s<=t.length-r;u+=s)if(n[u]==="|".charCodeAt(0))s++;else if(G(t,r,n,u,s))return a.set(t.subarray(r,r+s)),r+s;b(e,1,c(e,w("invalid conversion specifier '%%%s'"),t))},j=function(e){var t=U(e,1,w("%c")),r=1e3*E(e,H,2,(new Date).getTime()/1e3),a=new Date(r),n=!1,u=0;if(t[u]==="!".charCodeAt(0)&&(n=!0,u++),null===a&&O(e,w("time result cannot be represented in this installation",!0)),t[u]==="*".charCodeAt(0)&&t[u+1]==="t".charCodeAt(0))s(e,0,9),C(e,a,n);else{var o=new Uint8Array(4);o[0]="%".charCodeAt(0);var l=new L;for(T(e,l);u<t.length;)if(t[u]!=="%".charCodeAt(0))A(l,t[u++]);else{u++,u=K(e,t,u,o.subarray(1));var i=N(o,0);-1!==i&&(o=o.subarray(0,i));var c=I(S(o),a);g(l,w(c))}R(l)}return 1},F=function(e){var t=new Date;return l(e,1)||(k(e,1,u),v(e,1),t.setSeconds(B(e,"sec",0,0)),t.setMinutes(B(e,"min",0,0)),t.setHours(B(e,"hour",12,0)),t.setDate(B(e,"day",-1,0)),t.setMonth(B(e,"month",-1,1)),t.setFullYear(B(e,"year",-1,0)),C(e,t)),_(e,Math.floor(t/1e3)),1},H=function(e,t){return x(e,t)},X=function(e){var t=H(e,1),r=H(e,2);return f(e,new Date(t)-new Date(r)),1},z={date:j,difftime:X,time:F};z.clock=function(e){return f(e,performance.now()/1e3),1};var q=function(e){return m(e,z),1};e.exports.luaopen_os=q},function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=r(36),u=n.sprintf,s=r(5),o=s.LUA_INTEGER_FMT,l=s.LUA_INTEGER_FRMLEN,i=s.LUA_MININTEGER,c=s.LUA_NUMBER_FMT,_=s.LUA_NUMBER_FRMLEN,f=s.frexp,p=s.lua_getlocaledecpoint,v=r(1),d=v.LUA_TBOOLEAN,h=v.LUA_TFUNCTION,L=v.LUA_TNIL,A=v.LUA_TNUMBER,g=v.LUA_TSTRING,b=v.LUA_TTABLE,T=v.lua_call,x=v.lua_createtable,k=v.lua_dump,O=v.lua_gettable,m=v.lua_gettop,E=v.lua_isinteger,U=v.lua_isstring,R=v.lua_pop,y=v.lua_pushcclosure,N=v.lua_pushinteger,S=v.lua_pushlightuserdata,w=v.lua_pushliteral,I=v.lua_pushlstring,M=v.lua_pushnil,P=v.lua_pushnumber,D=v.lua_pushstring,C=v.lua_pushvalue,V=v.lua_remove,B=v.lua_setfield,G=v.lua_setmetatable,K=v.lua_settop,j=v.lua_toboolean,F=v.lua_tointeger,H=v.lua_tonumber,X=v.lua_tostring,z=v.lua_touserdata,q=v.lua_type,Y=v.lua_upvalueindex,J=r(6),Z=J.luaL_Buffer,W=J.luaL_addchar,Q=J.luaL_addlstring,$=J.luaL_addsize,ee=J.luaL_addstring,te=J.luaL_addvalue,re=J.luaL_argcheck,ae=J.luaL_argerror,ne=J.luaL_buffinit,ue=J.luaL_buffinitsize,se=J.luaL_checkinteger,oe=J.luaL_checknumber,le=J.luaL_checkstack,ie=J.luaL_checkstring,ce=J.luaL_checktype,_e=J.luaL_error,fe=J.luaL_newlib,pe=J.luaL_optinteger,ve=J.luaL_optstring,de=J.luaL_prepbuffsize,he=J.luaL_pushresult,Le=J.luaL_pushresultsize,Ae=J.luaL_tolstring,ge=J.luaL_typename,be=r(16),Te=r(3),xe=Te.luastring_indexOf,ke=Te.to_jsstring,Oe=Te.to_luastring,me="%",Ee=me.charCodeAt(0),Ue=function(e){var t=xe(e,0);return t>-1?t:e.length},Re=function(e,t){return e>=0?e:0-e>t?0:t+e+1},ye=function(e){var t=ie(e,1),r=t.length,a=Re(se(e,2),r),n=Re(pe(e,3,-1),r);return a<1&&(a=1),n>r&&(n=r),a<=n?D(e,t.subarray(a-1,a-1+(n-a+1))):w(e,""),1},Ne=function(e){return N(e,ie(e,1).length),1},Se=function(e){for(var t=m(e),r=new Z,a=ue(e,r,t),n=1;n<=t;n++){var u=se(e,n);re(e,u>=0&&u<=255,"value out of range"),a[n-1]=u}return Le(r,t),1},we=function(e,t,r,a){return Q(a,t,r),0},Ie=function(e){var t=new Z,r=j(e,2);return ce(e,1,h),K(e,1),ne(e,t),0!==k(e,we,t,r)?_e(e,Oe("unable to dump given function")):(he(t),1)},Me=_.length+1,Pe=function(e){if(Object.is(e,1/0))return Oe("inf");if(Object.is(e,-1/0))return Oe("-inf");if(Number.isNaN(e))return Oe("nan");if(0===e){var t=u(c+"x0p+0",e);return Object.is(e,-0)&&(t="-"+t),Oe(t)}var r="",a=f(e),n=a[0],s=a[1];return n<0&&(r+="-",n=-n),r+="0x",r+=(2*n).toString(16),s-=1,r+=u("p%+d",s),Oe(r)},De=function(e,t,r){var a=Pe(r);if(65===t[Me])for(var n=0;n<a.length;n++){var u=a[n];u>=97&&(a[n]=223&u)}else 97!==t[Me]&&_e(e,Oe("modifiers for format '%%a'/'%%A' not implemented"));return a},Ce=Oe("-+ #0"),Ve=function(e){return 97<=e&&e<=122||65<=e&&e<=90},Be=function(e){return 48<=e&&e<=57},Ge=function(e){return 0<=e&&e<=31||127===e},Ke=function(e){return 33<=e&&e<=126},je=function(e){return 97<=e&&e<=122},Fe=function(e){return 65<=e&&e<=90},He=function(e){return 97<=e&&e<=122||65<=e&&e<=90||48<=e&&e<=57},Xe=function(e){return Ke(e)&&!He(e)},ze=function(e){return 32===e||e>=9&&e<=13},qe=function(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102},Ye=function(e,t,r){W(e,34);for(var a=0;r--;){if(34===t[a]||92===t[a]||10===t[a])W(e,92),W(e,t[a]);else if(Ge(t[a])){var n=""+t[a];Be(t[a+1])&&(n="0".repeat(3-n.length)+n),ee(e,Oe("\\"+n))}else W(e,t[a]);a++}W(e,34)},Je=function(e){if(xe(e,46)<0){var t=p(),r=xe(e,t);r&&(e[r]=46)}},Ze=function(e,t,r){switch(q(e,r)){case g:var a=X(e,r);Ye(t,a,a.length);break;case A:var n=void 0;if(E(e,r)){var s=F(e,r);n=Oe(u(s===i?"0x%"+l+"x":o,s))}else{var c=H(e,r);n=De(e,Oe("%"+l+"a"),c),Je(n)}ee(t,n);break;case L:case d:Ae(e,r),te(t);break;default:ae(e,r,Oe("value has no literal form",!0))}},We=function(e,t,r,a){for(var n=r;0!==t[n]&&xe(Ce,t[n])>=0;)n++;n-r>=Ce.length&&_e(e,Oe("invalid format (repeated flags)",!0)),Be(t[n])&&n++,Be(t[n])&&n++,46===t[n]&&(n++,Be(t[n])&&n++,Be(t[n])&&n++),Be(t[n])&&_e(e,Oe("invalid format (width or precision too long)",!0)),a[0]=37;for(var u=0;u<n-r+1;u++)a[u+1]=t[r+u];return n},Qe=function(e,t){for(var r=e.length,a=t.length,n=e[r-1],u=0;u<a;u++)e[u+r-1]=t[u];e[r+a-1]=n},$e=function(e){var t=m(e),r=1,a=ie(e,r),n=0,s=new Z;for(ne(e,s);n<a.length;)if(a[n]!==Ee)W(s,a[n++]);else if(a[++n]===Ee)W(s,a[n++]);else{var o=[];switch(++r>t&&ae(e,r,Oe("no value",!0)),n=We(e,a,n,o),String.fromCharCode(a[n++])){case"c":W(s,se(e,r));break;case"d":case"i":case"o":case"u":case"x":case"X":var i=se(e,r);Qe(o,Oe(l,!0)),ee(s,Oe(u(String.fromCharCode.apply(String,o),i)));break;case"a":case"A":Qe(o,Oe(l,!0)),ee(s,De(e,o,oe(e,r)));break;case"e":case"E":case"f":case"g":case"G":var c=oe(e,r);Qe(o,Oe(l,!0)),ee(s,Oe(u(String.fromCharCode.apply(String,o),c)));break;case"q":Ze(e,s,r);break;case"s":var _=Ae(e,r);o.length<=2||0===o[2]?te(s):(re(e,_.length===Ue(_),r,Oe("string contains zeros",!0)),xe(o,46)<0&&_.length>=100?te(s):(ee(s,Oe(u(String.fromCharCode.apply(String,o),ke(_)))),R(e,1)));break;default:return _e(e,Oe("invalid option '%%%c' to 'format'"),a[n-1])}}return he(s),1},et=function e(t){a(this,e),this.L=t,this.islittle=!0,this.maxalign=1},tt=Be,rt=function(e,t){if(e.off>=e.s.length||!tt(e.s[e.off]))return t;var r=0;do{r=10*r+(e.s[e.off++]-48)}while(e.off<e.s.length&&tt(e.s[e.off])&&r<=214748363.8);return r},at=function(e,t,r){var a=rt(t,r);return(a>16||a<=0)&&_e(e.L,Oe("integral size (%d) out of limits [1,%d]"),a,16),a},nt=function(e,t){var r={opt:t.s[t.off++],size:0};switch(r.opt){case 98:return r.size=1,r.opt=0,r;case 66:return r.size=1,r.opt=1,r;case 104:return r.size=2,r.opt=0,r;case 72:return r.size=2,r.opt=1,r;case 108:return r.size=4,r.opt=0,r;case 76:return r.size=4,r.opt=1,r;case 106:return r.size=4,r.opt=0,r;case 74:case 84:return r.size=4,r.opt=1,r;case 102:return r.size=4,r.opt=2,r;case 100:case 110:return r.size=8,r.opt=2,r;case 105:return r.size=at(e,t,4),r.opt=0,r;case 73:return r.size=at(e,t,4),r.opt=1,r;case 115:return r.size=at(e,t,4),r.opt=4,r;case 99:return r.size=rt(t,-1),-1===r.size&&_e(e.L,Oe("missing size for format option 'c'")),r.opt=3,r;case 122:return r.opt=5,r;case 120:return r.size=1,r.opt=6,r;case 88:return r.opt=7,r;case 32:break;case 60:e.islittle=!0;break;case 62:e.islittle=!1;break;case 61:e.islittle=!0;break;case 33:e.maxalign=at(e,t,8);break;default:_e(e.L,Oe("invalid format option '%c'"),r.opt)}return r.opt=8,r},ut=function(e,t,r){var a={opt:NaN,size:NaN,ntoalign:NaN},n=nt(e,r);a.size=n.size,a.opt=n.opt;var u=a.size;if(7===a.opt)if(r.off>=r.s.length||0===r.s[r.off])ae(e.L,1,Oe("invalid next option for option 'X'",!0));else{var s=nt(e,r);u=s.size,s=s.opt,3!==s&&0!==u||ae(e.L,1,Oe("invalid next option for option 'X'",!0))}return u<=1||3===a.opt?a.ntoalign=0:(u>e.maxalign&&(u=e.maxalign),0!=(u&u-1)&&ae(e.L,1,Oe("format asks for alignment not power of 2",!0)),a.ntoalign=u-(t&u-1)&u-1),a},st=function(e,t,r,a,n){var u=de(e,a);u[r?0:a-1]=255&t;for(var s=1;s<a;s++)t>>=8,u[r?s:a-1-s]=255&t;if(n&&a>4)for(var o=4;o<a;o++)u[r?o:a-1-o]=255;$(e,a)},ot=function(e){var t=new Z,r=new et(e),a={s:ie(e,1),off:0},n=1,u=0;for(M(e),ne(e,t);a.off<a.s.length;){var s=ut(r,u,a),o=s.opt,l=s.size,i=s.ntoalign;for(u+=i+l;i-- >0;)W(t,0);switch(n++,o){case 0:var c=se(e,n);if(l<4){var _=1<<8*l-1;re(e,-_<=c&&c<_,n,Oe("integer overflow",!0))}st(t,c,r.islittle,l,c<0);break;case 1:var f=se(e,n);l<4&&re(e,f>>>0<1<<8*l,n,Oe("unsigned overflow",!0)),st(t,f>>>0,r.islittle,l,!1);break;case 2:var p=de(t,l),v=oe(e,n),d=new DataView(p.buffer,p.byteOffset,p.byteLength);4===l?d.setFloat32(0,v,r.islittle):d.setFloat64(0,v,r.islittle),$(t,l);break;case 3:var h=ie(e,n),L=h.length;for(re(e,L<=l,n,Oe("string longer than given size",!0)),Q(t,h,L);L++<l;)W(t,0);break;case 4:var A=ie(e,n),g=A.length;re(e,l>=4||g<1<<8*l,n,Oe("string length does not fit in given size",!0)),st(t,g,r.islittle,l,0),Q(t,A,g),u+=g;break;case 5:var b=ie(e,n),T=b.length;re(e,xe(b,0)<0,n,Oe("strings contains zeros",!0)),Q(t,b,T),W(t,0),u+=T+1;break;case 6:W(t,0);case 7:case 8:n--}}return he(t),1},lt=function(e){for(var t=ie(e,1),r=t.length,a=new Uint8Array(r),n=0;n<r;n++)a[n]=t[r-1-n];return D(e,a),1},it=function(e){for(var t=ie(e,1),r=t.length,a=new Uint8Array(r),n=0;n<r;n++){var u=t[n];Fe(u)&&(u|=32),a[n]=u}return D(e,a),1},ct=function(e){for(var t=ie(e,1),r=t.length,a=new Uint8Array(r),n=0;n<r;n++){var u=t[n];je(u)&&(u&=223),a[n]=u}return D(e,a),1},_t=function(e){var t=ie(e,1),r=t.length,a=se(e,2),n=ve(e,3,Oe("")),u=n.length;if(a<=0)w(e,"");else{if(r+u<r||r+u>2147483647/a)return _e(e,Oe("resulting string too large"));for(var s=a*r+(a-1)*u,o=new Z,l=ue(e,o,s),i=0;a-- >1;)l.set(t,i),i+=r,u>0&&(l.set(n,i),i+=u);l.set(t,i),Le(o,s)}return 1},ft=function(e){var t=ie(e,1),r=t.length,a=Re(pe(e,2,1),r),n=Re(pe(e,3,a),r);if(a<1&&(a=1),n>r&&(n=r),a>n)return 0;if(n-a>=Number.MAX_SAFE_INTEGER)return _e(e,Oe("string slice too long",!0));var u=n-a+1;le(e,u,Oe("string slice too long",!0));for(var s=0;s<u;s++)N(e,t[a+s-1]);return u},pt=function(e){for(var t=new et(e),r={s:ie(e,1),off:0},a=0;r.off<r.s.length;){var n=ut(t,a,r),u=n.opt,s=n.size;switch(s+=n.ntoalign,re(e,a<=2147483647-s,1,Oe("format result too large",!0)),a+=s,u){case 4:case 5:ae(e,1,Oe("variable-length format",!0))}}return N(e,a),1},vt=function(e,t,r,a,n){for(var u=0,s=a<=4?a:4,o=s-1;o>=0;o--)u<<=8,u|=t[r?o:a-1-o];if(a<4){if(n){var l=1<<8*a-1;u=(u^l)-l}}else if(a>4)for(var i=!n||u>=0?0:255,c=s;c<a;c++)t[r?c:a-1-c]!==i&&_e(e,Oe("%d-byte integer does not fit into Lua Integer"),a);return u},dt=function(e,t,r,a){be.lua_assert(t.length>=a);for(var n=new DataView(new ArrayBuffer(a)),u=0;u<a;u++)n.setUint8(u,t[u],r);return 4==a?n.getFloat32(0,r):n.getFloat64(0,r)},ht=function(e){var t=new et(e),r={s:ie(e,1),off:0},a=ie(e,2),n=a.length,u=Re(pe(e,3,1),n)-1,s=0;for(re(e,u<=n&&u>=0,3,Oe("initial position out of string",!0));r.off<r.s.length;){var o=ut(t,u,r),l=o.opt,i=o.size,c=o.ntoalign;switch(u+c+i>n&&ae(e,2,Oe("data string too short",!0)),u+=c,le(e,2,Oe("too many results",!0)),s++,l){case 0:case 1:var _=vt(e,a.subarray(u),t.islittle,i,0===l);N(e,_);break;case 2:var f=dt(0,a.subarray(u),t.islittle,i);P(e,f);break;case 3:D(e,a.subarray(u,u+i));break;case 4:var p=vt(e,a.subarray(u),t.islittle,i,0);re(e,u+p+i<=n,2,Oe("data string too short",!0)),D(e,a.subarray(u+i,u+i+p)),u+=p;break;case 5:var v=xe(a,0,u);-1===v&&(v=a.length-u),D(e,a.subarray(u,v)),u=v+1;break;case 7:case 6:case 8:s--}u+=i}return N(e,u+1),s+1},Lt=Oe("^$*+?.([%-"),At=function e(t){a(this,e),this.src=null,this.src_init=null,this.src_end=null,this.p=null,this.p_end=null,this.L=t,this.matchdepth=NaN,this.level=NaN,this.capture=[]},gt=function(e,t){return t-=49,t<0||t>=e.level||-1===e.capture[t].len?_e(e.L,Oe("invalid capture index %%%d"),t+1):t},bt=function(e){var t=e.level;for(t--;t>=0;t--)if(-1===e.capture[t].len)return t;return _e(e.L,Oe("invalid pattern capture"))},Tt=function(e,t){switch(e.p[t++]){case Ee:return t===e.p_end&&_e(e.L,Oe("malformed pattern (ends with '%%')")),t+1;case 91:94===e.p[t]&&t++;do{t===e.p_end&&_e(e.L,Oe("malformed pattern (missing ']')")),e.p[t++]===Ee&&t<e.p_end&&t++}while(93!==e.p[t]);return t+1;default:return t}},xt=function(e,t){switch(t){case 97:return Ve(e);case 65:return!Ve(e);case 99:return Ge(e);case 67:return!Ge(e);case 100:return Be(e);case 68:return!Be(e);case 103:return Ke(e);case 71:return!Ke(e);case 108:return je(e);case 76:return!je(e);case 112:return Xe(e);case 80:return!Xe(e);case 115:return ze(e);case 83:return!ze(e);case 117:return Fe(e);case 85:return!Fe(e);case 119:return He(e);case 87:return!He(e);case 120:return qe(e);case 88:return!qe(e);case 122:return 0===e;case 90:return 0!==e;default:return t===e}},kt=function(e,t,r,a){var n=!0;for(94===e.p[r+1]&&(n=!1,r++);++r<a;)if(e.p[r]===Ee){if(r++,xt(t,e.p[r]))return n}else if(45===e.p[r+1]&&r+2<a){if(r+=2,e.p[r-2]<=t&&t<=e.p[r])return n}else if(e.p[r]===t)return n;return!n},Ot=function(e,t,r,a){if(t>=e.src_end)return!1;var n=e.src[t];switch(e.p[r]){case 46:return!0;case Ee:return xt(n,e.p[r+1]);case 91:return kt(e,n,r,a-1);default:return e.p[r]===n}},mt=function(e,t,r){if(r>=e.p_end-1&&_e(e.L,Oe("malformed pattern (missing arguments to '%%b'")),e.src[t]!==e.p[r])return null;for(var a=e.p[r],n=e.p[r+1],u=1;++t<e.src_end;)if(e.src[t]===n){if(0==--u)return t+1}else e.src[t]===a&&u++;return null},Et=function(e,t,r,a){for(var n=0;Ot(e,t+n,r,a);)n++;for(;n>=0;){var u=wt(e,t+n,a+1);if(u)return u;n--}return null},Ut=function(e,t,r,a){for(;;){var n=wt(e,t,a+1);if(null!==n)return n;if(!Ot(e,t,r,a))return null;t++}},Rt=function(e,t,r,a){var n=e.level;n>=32&&_e(e.L,Oe("too many captures",!0)),e.capture[n]=e.capture[n]?e.capture[n]:{},e.capture[n].init=t,e.capture[n].len=a,e.level=n+1;var u=void 0;return null===(u=wt(e,t,r))&&e.level--,u},yt=function(e,t,r){var a=bt(e);e.capture[a].len=t-e.capture[a].init;var n=void 0;return null===(n=wt(e,t,r))&&(e.capture[a].len=-1),n},Nt=function(e,t,r,a,n){if(0===n)return!0;var u=t+n;e:for(;;){if(-1===(t=xe(e,r[a],t))||t>=u)return!1;for(var s=1;s<n;s++)if(e[t+s]!==r[a+s]){t++;continue e}return!0}},St=function(e,t,r){r=gt(e,r);var a=e.capture[r].len;return e.src_end-t>=a&&Nt(e.src,e.capture[r].init,e.src,t,a)?t+a:null},wt=function e(t,r,a){var n=!1,u=!0;for(0==t.matchdepth--&&_e(t.L,Oe("pattern too complex",!0));u||n;)if(u=!1,a!==t.p_end)switch(n?void 0:t.p[a]){case 40:r=41===t.p[a+1]?Rt(t,r,a+2,-2):Rt(t,r,a+1,-1);break;case 41:r=yt(t,r,a+1);break;case 36:if(a+1!==t.p_end){n=!0;break}r=t.src.length-r==0?r:null;break;case Ee:switch(t.p[a+1]){case 98:r=mt(t,r,a+2),null!==r&&(a+=4,u=!0);break;case 102:a+=2,91!==t.p[a]&&_e(t.L,Oe("missing '[' after '%%f' in pattern"));var s=Tt(t,a),o=r===t.src_init?0:t.src[r-1];if(!kt(t,o,a,s-1)&&kt(t,r===t.src_end?0:t.src[r],a,s-1)){a=s,u=!0;break}r=null;break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:r=St(t,r,t.p[a+1]),null!==r&&(a+=2,u=!0);break;default:n=!0}break;default:n=!1;var l=Tt(t,a);if(Ot(t,r,a,l))switch(t.p[l]){case 63:var i=void 0;null!==(i=e(t,r+1,l+1))?r=i:(a=l+1,u=!0);break;case 43:r++;case 42:r=Et(t,r,a,l);break;case 45:r=Ut(t,r,a,l);break;default:r++,a=l,u=!0}else{if(42===t.p[l]||63===t.p[l]||45===t.p[l]){a=l+1,u=!0;break}r=null}}return t.matchdepth++,r},It=function(e,t,r,a){if(t>=e.level)0===t?I(e.L,e.src.subarray(r,a),a-r):_e(e.L,Oe("invalid capture index %%%d"),t+1);else{var n=e.capture[t].len;-1===n&&_e(e.L,Oe("unfinished capture",!0)),-2===n?N(e.L,e.capture[t].init-e.src_init+1):I(e.L,e.src.subarray(e.capture[t].init),n)}},Mt=function(e,t,r){var a=0===e.level&&e.src.subarray(t)?1:e.level;le(e.L,a,Oe("too many catpures",!0));for(var n=0;n<a;n++)It(e,n,t,r);return a},Pt=function(e,t){for(var r=0;r<t;r++)if(-1!==xe(Lt,e[r]))return!1;return!0},Dt=function(e,t,r,a,n,u){e.L=t,e.matchdepth=200,e.src=r,e.src_init=0,e.src_end=a,e.p=n,e.p_end=u},Ct=function(e){e.level=0,be.lua_assert(200===e.matchdepth)},Vt=function(e,t,r){var a=r>>>0,n=t.length;if(0===n)return a;e:for(;-1!==(a=e.indexOf(t[0],a));){for(var u=1;u<n;u++)if(e[a+u]!==t[u]){a++;continue e}return a}return-1},Bt=function(e,t){var r=ie(e,1),a=ie(e,2),n=r.length,u=a.length,s=Re(pe(e,3,1),n);if(s<1)s=1;else if(s>n+1)return M(e),1;if(t&&(j(e,4)||Pt(a,u))){var o=Vt(r.subarray(s-1),a,0);if(o>-1)return N(e,s+o),N(e,s+o+u-1),2}else{var l=new At(e),i=s-1,c=94===a[0];c&&(a=a.subarray(1),u--),Dt(l,e,r,n,a,u);do{var _=void 0;if(Ct(l),null!==(_=wt(l,i,0)))return t?(N(e,i+1),N(e,_),Mt(l,null,0)+2):Mt(l,i,_)}while(i++<l.src_end&&!c)}return M(e),1},Gt=function(e){return Bt(e,1)},Kt=function(e){return Bt(e,0)},jt=function e(){a(this,e),this.src=NaN,this.p=NaN,this.lastmatch=NaN,this.ms=new At},Ft=function(e){var t=z(e,Y(3));t.ms.L=e;for(var r=t.src;r<=t.ms.src_end;r++){Ct(t.ms);var a=void 0;if(null!==(a=wt(t.ms,r,t.p))&&a!==t.lastmatch)return t.src=t.lastmatch=a,Mt(t.ms,r,a)}return 0},Ht=function(e){var t=ie(e,1),r=ie(e,2),a=t.length,n=r.length;K(e,2);var u=new jt;return S(e,u),Dt(u.ms,e,t,a,r,n),u.src=0,u.p=0,u.lastmatch=null,y(e,Ft,3),1},Xt=function(e,t,r,a){for(var n=e.L,u=X(n,3),s=u.length,o=0;o<s;o++)u[o]!==Ee?W(t,u[o]):(o++,Be(u[o])?48===u[o]?Q(t,e.src.subarray(r,a),a-r):(It(e,u[o]-49,r,a),Ae(n,-1),V(n,-2),te(t)):(u[o]!==Ee&&_e(n,Oe("invalid use of '%c' in replacement string"),Ee),W(t,u[o])))},zt=function(e,t,r,a,n){var u=e.L;switch(n){case h:C(u,3);var s=Mt(e,r,a);T(u,s,1);break;case b:It(e,0,r,a),O(u,3);break;default:return void Xt(e,t,r,a)}j(u,-1)?U(u,-1)||_e(u,Oe("invalid replacement value (a %s)"),ge(u,-1)):(R(u,1),I(u,e.src.subarray(r,a),a-r)),te(t)},qt=function(e){var t=ie(e,1),r=t.length,a=ie(e,2),n=a.length,u=null,s=q(e,3),o=pe(e,4,r+1),l=94===a[0],i=0,c=new At(e),_=new Z;for(re(e,s===A||s===g||s===h||s===b,3,Oe("string/function/table expected",!0)),ne(e,_),l&&(a=a.subarray(1),n--),Dt(c,e,t,r,a,n),t=0,a=0;i<o;){var f=void 0;if(Ct(c),null!==(f=wt(c,t,a))&&f!==u)i++,zt(c,_,t,f,s),t=u=f;else{if(!(t<c.src_end))break;W(_,c.src[t++])}if(l)break}return Q(_,c.src.subarray(t,c.src_end),c.src_end-t),he(_),N(e,i),2},Yt={byte:ft,char:Se,dump:Ie,find:Gt,format:$e,gmatch:Ht,gsub:qt,len:Ne,lower:it,match:Kt,pack:ot,packsize:pt,rep:_t,reverse:lt,sub:ye,unpack:ht,upper:ct},Jt=function(e){x(e,0,1),w(e,""),C(e,-2),G(e,-2),R(e,1),C(e,-2),B(e,-2,Oe("__index",!0)),R(e,1)},Zt=function(e){return fe(e,Yt),Jt(e),1};e.exports.luaopen_string=Zt},function(e,t,r){"use strict";var a=r(1),n=a.lua_gettop,u=a.lua_pushcfunction,s=a.lua_pushfstring,o=a.lua_pushinteger,l=a.lua_pushnil,i=a.lua_pushstring,c=a.lua_pushvalue,_=a.lua_setfield,f=a.lua_tointeger,p=r(6),v=p.luaL_Buffer,d=p.luaL_addvalue,h=p.luaL_argcheck,L=p.luaL_buffinit,A=p.luaL_checkinteger,g=p.luaL_checkstack,b=p.luaL_checkstring,T=p.luaL_error,x=p.luaL_newlib,k=p.luaL_optinteger,O=p.luaL_pushresult,m=r(3),E=m.luastring_of,U=m.to_luastring,R=function(e){return 128==(192&e)},y=function(e,t){return e>=0?e:0-e>t?0:t+e+1},N=[255,127,2047,65535],S=function(e,t){var r=e[t],a=0;if(r<128)a=r;else{for(var n=0;64&r;){var u=e[t+ ++n];if(128!=(192&u))return null;a=a<<6|63&u,r<<=1}if(a|=(127&r)<<5*n,n>3||a>1114111||a<=N[n])return null;t+=n}return{code:a,pos:t+1}},w=function(e){var t=0,r=b(e,1),a=r.length,n=y(k(e,2,1),a),u=y(k(e,3,-1),a);for(h(e,1<=n&&--n<=a,2,U("initial position out of string")),h(e,--u<a,3,U("final position out of string"));n<=u;){var s=S(r,n);if(null===s)return l(e),o(e,n+1),2;n=s.pos,t++}return o(e,t),1},I=U("%U"),M=function(e,t){var r=A(e,t);h(e,0<=r&&r<=1114111,t,U("value out of range",!0)),s(e,I,r)},P=function(e){var t=n(e);if(1===t)M(e,1);else{var r=new v;L(e,r);for(var a=1;a<=t;a++)M(e,a),d(r);O(r)}return 1},D=function(e){var t=b(e,1),r=A(e,2),a=r>=0?1:t.length+1;if(a=y(k(e,3,a),t.length),h(e,1<=a&&--a<=t.length,3,U("position out of range",!0)),0===r)for(;a>0&&R(t[a]);)a--;else if(R(t[a])&&T(e,U("initial position is a continuation byte",!0)),r<0)for(;r<0&&a>0;){do{a--}while(a>0&&R(t[a]));r++}else for(r--;r>0&&a<t.length;){do{a++}while(R(t[a]));r--}return 0===r?o(e,a+1):l(e),1},C=function(e){var t=b(e,1),r=y(k(e,2,1),t.length),a=y(k(e,3,r),t.length);if(h(e,r>=1,2,U("out of range",!0)),h(e,a<=t.length,3,U("out of range",!0)),r>a)return 0;if(a-r>=Number.MAX_SAFE_INTEGER)return T(e,U("string slice too long",!0));var n=a-r+1;for(g(e,n,U("string slice too long",!0)),n=0,r-=1;r<a;){var u=S(t,r);if(null===u)return T(e,U("invalid UTF-8 code",!0));o(e,u.code),r=u.pos,n++}return n},V=function(e){var t=b(e,1),r=t.length,a=f(e,2)-1;if(a<0)a=0;else if(a<r)for(a++;R(t[a]);)a++;if(a>=r)return 0;var n=S(t,a);return null===n||R(t[n.pos])?T(e,U("invalid UTF-8 code",!0)):(o(e,a+1),o(e,n.code),2)},B=function(e){return b(e,1),u(e,V),c(e,1),o(e,0),3},G={char:P,codepoint:C,codes:B,len:w,offset:D},K=E(91,0,45,127,194,45,244,93,91,128,45,191,93,42),j=function(e){return x(e,G),i(e,K),_(e,-2,U("charpattern",!0)),1};e.exports.luaopen_utf8=j},function(e,t,r){"use strict";var a=r(1),n=a.LUA_OPLT,u=a.LUA_TNUMBER,s=a.lua_compare,o=a.lua_gettop,l=a.lua_isinteger,i=a.lua_isnoneornil,c=a.lua_pushboolean,_=a.lua_pushinteger,f=a.lua_pushliteral,p=a.lua_pushnil,v=a.lua_pushnumber,d=a.lua_pushvalue,h=a.lua_setfield,L=a.lua_settop,A=a.lua_tointeger,g=a.lua_tointegerx,b=a.lua_type,T=r(6),x=T.luaL_argcheck,k=T.luaL_argerror,O=T.luaL_checkany,m=T.luaL_checkinteger,E=T.luaL_checknumber,U=T.luaL_error,R=T.luaL_newlib,y=T.luaL_optnumber,N=r(5),S=N.LUA_MAXINTEGER,w=N.LUA_MININTEGER,I=N.lua_numbertointeger,M=r(3),P=M.to_luastring,D=void 0,C=function(){return D=1103515245*D+12345&2147483647},V=function(e){0===(D=0|e)&&(D=1)},B=function(e){var t=void 0,r=void 0,a=void 0===D?Math.random():C()/2147483648;switch(o(e)){case 0:return v(e,a),1;case 1:t=1,r=m(e,1);break;case 2:t=m(e,1),r=m(e,2);break;default:return U(e,P("wrong number of arguments",!0))}return x(e,t<=r,1,P("interval is empty",!0)),x(e,t>=0||r<=S+t,1,P("interval too large",!0)),a*=r-t+1,_(e,Math.floor(a)+t),1},G=function(e){return V(E(e,1)),C(),0},K=function(e){if(l(e,1)){var t=A(e,1);t<0&&(t=0|-t),_(e,t)}else v(e,Math.abs(E(e,1)));return 1},j=function(e){return v(e,Math.sin(E(e,1))),1},F=function(e){return v(e,Math.cos(E(e,1))),1},H=function(e){return v(e,Math.tan(E(e,1))),1},X=function(e){return v(e,Math.asin(E(e,1))),1},z=function(e){return v(e,Math.acos(E(e,1))),1},q=function(e){var t=E(e,1),r=y(e,2,1);return v(e,Math.atan2(t,r)),1},Y=function(e){var t=g(e,1);return!1!==t?_(e,t):(O(e,1),p(e)),1},J=function(e,t){var r=I(t);!1!==r?_(e,r):v(e,t)},Z=function(e){return l(e,1)?L(e,1):J(e,Math.floor(E(e,1))),1},W=function(e){return l(e,1)?L(e,1):J(e,Math.ceil(E(e,1))),1},Q=function(e){return v(e,Math.sqrt(E(e,1))),1},$=function(e){var t=m(e,1),r=m(e,2);return c(e,t>=0?r<0||t<r:r<0&&t<r),1},ee=function(e){var t=E(e,1),r=void 0;if(i(e,2))r=Math.log(t);else{var a=E(e,2);r=2===a?Math.log2(t):10===a?Math.log10(t):Math.log(t)/Math.log(a)}return v(e,r),1},te=function(e){return v(e,Math.exp(E(e,1))),1},re=function(e){return v(e,E(e,1)*(180/Math.PI)),1},ae=function(e){return v(e,E(e,1)*(Math.PI/180)),1},ne=function(e){var t=o(e),r=1;x(e,t>=1,1,P("value expected",!0));for(var a=2;a<=t;a++)s(e,a,r,n)&&(r=a);return d(e,r),1},ue=function(e){var t=o(e),r=1;x(e,t>=1,1,P("value expected",!0));for(var a=2;a<=t;a++)s(e,r,a,n)&&(r=a);return d(e,r),1},se=function(e){return b(e,1)===u?l(e,1)?f(e,"integer"):f(e,"float"):(O(e,1),p(e)),1},oe=function(e){if(l(e,1)&&l(e,2)){var t=A(e,2);0===t?k(e,2,P("zero",!0)):_(e,A(e,1)%t|0)}else{var r=E(e,1),a=E(e,2);v(e,r%a)}return 1},le=function(e){if(l(e,1))L(e,1),v(e,0);else{var t=E(e,1),r=t<0?Math.ceil(t):Math.floor(t);J(e,r),v(e,t===r?0:t-r)}return 2},ie={abs:K,acos:z,asin:X,atan:q,ceil:W,cos:F,deg:re,exp:te,floor:Z,fmod:oe,log:ee,max:ue,min:ne,modf:le,rad:ae,random:B,randomseed:G,sin:j,sqrt:Q,tan:H,tointeger:Y,type:se,ult:$},ce=function(e){return R(e,ie),v(e,Math.PI),h(e,-2,P("pi",!0)),v(e,1/0),h(e,-2,P("huge",!0)),_(e,S),h(e,-2,P("maxinteger",!0)),_(e,w),h(e,-2,P("mininteger",!0)),1};e.exports.luaopen_math=ce},function(e,t,r){"use strict";var a=r(1),n=a.LUA_MASKCALL,u=a.LUA_MASKCOUNT,s=a.LUA_MASKLINE,o=a.LUA_MASKRET,l=a.LUA_REGISTRYINDEX,i=a.LUA_TFUNCTION,c=a.LUA_TNIL,_=a.LUA_TTABLE,f=a.LUA_TUSERDATA,p=a.lua_Debug,v=a.lua_call,d=a.lua_checkstack,h=a.lua_gethook,L=a.lua_gethookcount,A=a.lua_gethookmask,g=a.lua_getinfo,b=a.lua_getlocal,T=a.lua_getmetatable,x=a.lua_getstack,k=a.lua_getupvalue,O=a.lua_getuservalue,m=a.lua_insert,E=a.lua_iscfunction,U=a.lua_isfunction,R=a.lua_isnoneornil,y=a.lua_isthread,N=a.lua_newtable,S=a.lua_pcall,w=a.lua_pop,I=a.lua_pushboolean,M=a.lua_pushfstring,P=a.lua_pushinteger,D=a.lua_pushlightuserdata,C=a.lua_pushliteral,V=a.lua_pushnil,B=a.lua_pushstring,G=a.lua_pushvalue,K=a.lua_rawgetp,j=a.lua_rawsetp,F=a.lua_rotate,H=a.lua_setfield,X=a.lua_sethook,z=a.lua_setlocal,q=a.lua_setmetatable,Y=a.lua_settop,J=a.lua_setupvalue,Z=a.lua_setuservalue,W=a.lua_tojsstring,Q=a.lua_toproxy,$=a.lua_tostring,ee=a.lua_tothread,te=a.lua_touserdata,re=a.lua_type,ae=a.lua_upvalueid,ne=a.lua_upvaluejoin,ue=a.lua_xmove,se=r(6),oe=se.luaL_argcheck,le=se.luaL_argerror,ie=se.luaL_checkany,ce=se.luaL_checkinteger,_e=se.luaL_checkstring,fe=se.luaL_checktype,pe=se.luaL_error,ve=se.luaL_loadbuffer,de=se.luaL_newlib,he=se.luaL_optinteger,Le=se.luaL_optstring,Ae=se.luaL_traceback,ge=se.lua_writestringerror,be=r(16),Te=r(3),xe=Te.luastring_indexOf,ke=Te.to_luastring,Oe=function(e,t,r){e===t||d(t,r)||pe(e,ke("stack overflow",!0))},me=function(e){return G(e,l),1},Ee=function(e){return ie(e,1),T(e,1)||V(e),1},Ue=function(e){var t=re(e,2);return oe(e,t==c||t==_,2,ke("nil or table expected",!0)),Y(e,2),q(e,1),1},Re=function(e){return re(e,1)!==f?V(e):O(e,1),1},ye=function(e){return fe(e,1,f),ie(e,2),Y(e,2),Z(e,1),1},Ne=function(e){return y(e,1)?{arg:1,thread:ee(e,1)}:{arg:0,thread:e}},Se=function(e,t,r){B(e,r),H(e,-2,t)},we=function(e,t,r){P(e,r),H(e,-2,t)},Ie=function(e,t,r){I(e,r),H(e,-2,t)},Me=function(e,t,r){e==t?F(e,-2,1):ue(t,e,1),H(e,-2,r)},Pe=function(e){var t=new p,r=Ne(e),a=r.arg,n=r.thread,u=Le(e,a+2,ke("flnStu",!0));if(Oe(e,n,3),U(e,a+1))u=M(e,ke(">%s"),u),G(e,a+1),ue(e,n,1);else if(!x(n,ce(e,a+1),t))return V(e),1;return g(n,u,t)||le(e,a+2,ke("invalid option",!0)),N(e),xe(u,83)>-1&&(Se(e,ke("source",!0),t.source),Se(e,ke("short_src",!0),t.short_src),we(e,ke("linedefined",!0),t.linedefined),we(e,ke("lastlinedefined",!0),t.lastlinedefined),Se(e,ke("what",!0),t.what)),xe(u,108)>-1&&we(e,ke("currentline",!0),t.currentline),xe(u,117)>-1&&(we(e,ke("nups",!0),t.nups),we(e,ke("nparams",!0),t.nparams),Ie(e,ke("isvararg",!0),t.isvararg)),xe(u,110)>-1&&(Se(e,ke("name",!0),t.name),Se(e,ke("namewhat",!0),t.namewhat)),xe(u,116)>-1&&Ie(e,ke("istailcall",!0),t.istailcall),xe(u,76)>-1&&Me(e,n,ke("activelines",!0)),xe(u,102)>-1&&Me(e,n,ke("func",!0)),1},De=function(e){var t=Ne(e),r=t.thread,a=t.arg,n=new p,u=ce(e,a+2);if(U(e,a+1))return G(e,a+1),B(e,b(e,null,u)),1;var s=ce(e,a+1);if(!x(r,s,n))return le(e,a+1,ke("level out of range",!0));Oe(e,r,1);var o=b(r,n,u);return o?(ue(r,e,1),B(e,o),F(e,-2,1),2):(V(e),1)},Ce=function(e){var t=Ne(e),r=t.thread,a=t.arg,n=new p,u=ce(e,a+1),s=ce(e,a+2);if(!x(r,u,n))return le(e,a+1,ke("level out of range",!0));ie(e,a+3),Y(e,a+3),Oe(e,r,1),ue(e,r,1);var o=z(r,n,s);return null===o&&w(r,1),B(e,o),1},Ve=function(e,t){var r=ce(e,2);fe(e,1,i);var a=t?k(e,1,r):J(e,1,r);return null===a?0:(B(e,a),m(e,-(t+1)),t+1)},Be=function(e){return Ve(e,1)},Ge=function(e){return ie(e,3),Ve(e,0)},Ke=function(e,t,r){var a=ce(e,r);return fe(e,t,i),oe(e,null!==k(e,t,a),r,ke("invalid upvalue index",!0)),a},je=function(e){var t=Ke(e,1,2);return D(e,ae(e,1,t)),1},Fe=function(e){var t=Ke(e,1,2),r=Ke(e,3,4);return oe(e,!E(e,1),1,ke("Lua function expected",!0)),oe(e,!E(e,3),3,ke("Lua function expected",!0)),ne(e,1,t,3,r),0},He=ke("__hooks__",!0),Xe=["call","return","line","count","tail call"].map(function(e){return ke(e)}),ze=function(e,t){K(e,l,He);var r=te(e,-1),a=r.get(e);a&&(a(e),B(e,Xe[t.event]),t.currentline>=0?P(e,t.currentline):V(e),be.lua_assert(g(e,ke("lS"),t)),v(e,2,0))},qe=function(e,t){var r=0;return xe(e,99)>-1&&(r|=n),xe(e,114)>-1&&(r|=o),xe(e,108)>-1&&(r|=s),t>0&&(r|=u),r},Ye=function(e,t){var r=0;return e&n&&(t[r++]=99),e&o&&(t[r++]=114),e&s&&(t[r++]=108),t.subarray(0,r)},Je=function(e){var t=void 0,r=void 0,a=void 0,n=Ne(e),u=n.thread,s=n.arg;if(R(e,s+1))Y(e,s+1),a=null,t=0,r=0;else{var o=_e(e,s+2);fe(e,s+1,i),r=he(e,s+3,0),a=ze,t=qe(o,r)}var _=void 0;K(e,l,He)===c?(_=new WeakMap,D(e,_),j(e,l,He)):_=te(e,-1);var f=Q(e,s+1);return _.set(u,f),X(u,a,t,r),0},Ze=function(e){var t=Ne(e),r=t.thread,a=new Uint8Array(5),n=A(r),u=h(r);if(null===u)V(e);else if(u!==ze)C(e,"external hook");else{K(e,l,He);var s=te(e,-1),o=s.get(r);o(e)}return B(e,Ye(n,a)),P(e,L(r)),3},We=function(e){var t=Ne(e),r=t.thread,a=t.arg,n=$(e,a+1);if(null!==n||R(e,a+1)){var u=he(e,a+2,e===r?1:0);Ae(e,r,n,u)}else G(e,a+1);return 1},Qe={gethook:Ze,getinfo:Pe,getlocal:De,getmetatable:Ee,getregistry:me,getupvalue:Be,getuservalue:Re,sethook:Je,setlocal:Ce,setmetatable:Ue,setupvalue:Ge,setuservalue:ye,traceback:We,upvalueid:je,upvaluejoin:Fe},$e=void 0;"undefined"!=typeof window&&($e=function(){var e=prompt("lua_debug>","");return null!==e?e:""}),$e&&(Qe.debug=function(e){for(;;){var t=$e();if("cont"===t)return 0;if(0!==t.length){var r=ke(t);(ve(e,r,r.length,ke("=(debug command)",!0))||S(e,0,0,0))&&ge(W(e,-1),"\n"),Y(e,0)}}});var et=function(e){return de(e,Qe),1};e.exports.luaopen_debug=et},function(module,exports,__webpack_require__){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_require=__webpack_require__(1),LUA_CPATH_DEFAULT=_require.LUA_CPATH_DEFAULT,LUA_DIRSEP=_require.LUA_DIRSEP,LUA_EXEC_DIR=_require.LUA_EXEC_DIR,LUA_OK=_require.LUA_OK,LUA_PATH_DEFAULT=_require.LUA_PATH_DEFAULT,LUA_PATH_MARK=_require.LUA_PATH_MARK,LUA_PATH_SEP=_require.LUA_PATH_SEP,LUA_REGISTRYINDEX=_require.LUA_REGISTRYINDEX,LUA_TNIL=_require.LUA_TNIL,LUA_TTABLE=_require.LUA_TTABLE,LUA_VERSUFFIX=_require.LUA_VERSUFFIX,lua_callk=_require.lua_callk,lua_createtable=_require.lua_createtable,lua_getfield=_require.lua_getfield,lua_insert=_require.lua_insert,lua_isfunction=_require.lua_isfunction,lua_isnil=_require.lua_isnil,lua_isstring=_require.lua_isstring,lua_newtable=_require.lua_newtable,lua_pop=_require.lua_pop,lua_pushboolean=_require.lua_pushboolean,lua_pushcclosure=_require.lua_pushcclosure,lua_pushcfunction=_require.lua_pushcfunction,lua_pushfstring=_require.lua_pushfstring,lua_pushglobaltable=_require.lua_pushglobaltable,lua_pushlightuserdata=_require.lua_pushlightuserdata,lua_pushliteral=_require.lua_pushliteral,lua_pushlstring=_require.lua_pushlstring,lua_pushnil=_require.lua_pushnil,lua_pushstring=_require.lua_pushstring,lua_pushvalue=_require.lua_pushvalue,lua_rawgeti=_require.lua_rawgeti,lua_rawgetp=_require.lua_rawgetp,lua_rawseti=_require.lua_rawseti,lua_rawsetp=_require.lua_rawsetp,lua_remove=_require.lua_remove,lua_setfield=_require.lua_setfield,lua_setmetatable=_require.lua_setmetatable,lua_settop=_require.lua_settop,lua_toboolean=_require.lua_toboolean,lua_tostring=_require.lua_tostring,lua_touserdata=_require.lua_touserdata,lua_upvalueindex=_require.lua_upvalueindex,_require2=__webpack_require__(6),LUA_LOADED_TABLE=_require2.LUA_LOADED_TABLE,LUA_PRELOAD_TABLE=_require2.LUA_PRELOAD_TABLE,luaL_Buffer=_require2.luaL_Buffer,luaL_addvalue=_require2.luaL_addvalue,luaL_buffinit=_require2.luaL_buffinit,luaL_checkstring=_require2.luaL_checkstring,luaL_error=_require2.luaL_error,luaL_getsubtable=_require2.luaL_getsubtable,luaL_gsub=_require2.luaL_gsub,luaL_len=_require2.luaL_len,luaL_loadfile=_require2.luaL_loadfile,luaL_newlib=_require2.luaL_newlib,luaL_optstring=_require2.luaL_optstring,luaL_pushresult=_require2.luaL_pushresult,luaL_setfuncs=_require2.luaL_setfuncs,_require3=__webpack_require__(3),luastring_indexOf=_require3.luastring_indexOf,to_jsstring=_require3.to_jsstring,to_luastring=_require3.to_luastring,to_uristring=_require3.to_uristring,fengari=__webpack_require__(19),global_env=function(){return"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:eval("this")}(),CLIBS=to_luastring("__CLIBS__"),LUA_PATH_VAR="LUA_PATH",LUA_CPATH_VAR="LUA_CPATH",LUA_IGMARK="-",LUA_CSUBSEP=LUA_DIRSEP,LUA_LSUBSEP=LUA_DIRSEP,LUA_POF=to_luastring("luaopen_"),LUA_OFSEP=to_luastring("_"),LIB_FAIL="open",AUXMARK=to_luastring(""),lsys_load=void 0,pathlib;lsys_load=function(e,t,r){t=to_uristring(t);var a=new XMLHttpRequest;if(a.open("GET",t,!1),a.send(),a.status<200||a.status>=300)return lua_pushstring(e,to_luastring(a.status+": "+a.statusText)),null;var n=a.response;/\/\/[#@] sourceURL=/.test(n)||(n+=" //# sourceURL="+t);var u=void 0;try{u=Function("fengari",n)}catch(t){return lua_pushstring(e,to_luastring(t.name+": "+t.message)),null}var s=u(fengari);return"function"==typeof s||"object"===(void 0===s?"undefined":_typeof(s))&&null!==s?s:void 0===s?global_env:(lua_pushstring(e,to_luastring("library returned unexpected type ("+(void 0===s?"undefined":_typeof(s))+")")),null)};var lsys_sym=function(e,t,r){var a=t[to_jsstring(r)];return a&&"function"==typeof a?a:(lua_pushfstring(e,to_luastring("undefined symbol: %s"),r),null)},noenv=function(e){lua_getfield(e,LUA_REGISTRYINDEX,to_luastring("LUA_NOENV"));var t=lua_toboolean(e,-1);return lua_pop(e,1),t},readable=void 0,fs;readable=function(e){e=to_uristring(e);var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),t.status>=200&&t.status<=299};var ERRLIB=1,ERRFUNC=2,lookforfunc=function(e,t,r){var a=checkclib(e,t);if(null===a){if(null===(a=lsys_load(e,t,r[0]==="*".charCodeAt(0))))return ERRLIB;addtoclib(e,t,a)}if(r[0]==="*".charCodeAt(0))return lua_pushboolean(e,1),0;var n=lsys_sym(e,a,r);return null===n?ERRFUNC:(lua_pushcfunction(e,n),0)},ll_loadlib=function(e){var t=luaL_checkstring(e,1),r=luaL_checkstring(e,2),a=lookforfunc(e,t,r);return 0===a?1:(lua_pushnil(e),lua_insert(e,-2),lua_pushliteral(e,a===ERRLIB?LIB_FAIL:"init"),3)},env=function(){return global_env}(),setpath=function(e,t,r,a){var n=""+r+LUA_VERSUFFIX;lua_pushstring(e,to_luastring(n));var u=env[n];void 0===u&&(u=env[r]),void 0===u||noenv(e)?lua_pushstring(e,a):(u=luaL_gsub(e,to_luastring(u),to_luastring(LUA_PATH_SEP+LUA_PATH_SEP,!0),to_luastring(LUA_PATH_SEP+to_jsstring(AUXMARK)+LUA_PATH_SEP,!0)),luaL_gsub(e,u,AUXMARK,a),lua_remove(e,-2)),lua_setfield(e,-3,t),lua_pop(e,1)},checkclib=function(e,t){lua_rawgetp(e,LUA_REGISTRYINDEX,CLIBS),lua_getfield(e,-1,t);var r=lua_touserdata(e,-1);return lua_pop(e,2),r},addtoclib=function(e,t,r){lua_rawgetp(e,LUA_REGISTRYINDEX,CLIBS),lua_pushlightuserdata(e,r),lua_pushvalue(e,-1),lua_setfield(e,-3,t),lua_rawseti(e,-2,luaL_len(e,-2)+1),lua_pop(e,1)},pushnexttemplate=function(e,t){for(;t[0]===LUA_PATH_SEP.charCodeAt(0);)t=t.subarray(1);if(0===t.length)return null;var r=luastring_indexOf(t,LUA_PATH_SEP.charCodeAt(0));return r<0&&(r=t.length),lua_pushlstring(e,t,r),t.subarray(r)},searchpath=function(e,t,r,a,n){var u=new luaL_Buffer;for(luaL_buffinit(e,u),0!==a[0]&&(t=luaL_gsub(e,t,a,n));null!==(r=pushnexttemplate(e,r));){var s=luaL_gsub(e,lua_tostring(e,-1),to_luastring(LUA_PATH_MARK,!0),t);if(lua_remove(e,-2),readable(s))return s;lua_pushfstring(e,to_luastring("\n\tno file '%s'"),s),lua_remove(e,-2),luaL_addvalue(u)}return luaL_pushresult(u),null},ll_searchpath=function(e){return null!==searchpath(e,luaL_checkstring(e,1),luaL_checkstring(e,2),luaL_optstring(e,3,to_luastring(".")),luaL_optstring(e,4,to_luastring(LUA_DIRSEP)))?1:(lua_pushnil(e),lua_insert(e,-2),2)},findfile=function(e,t,r,a){lua_getfield(e,lua_upvalueindex(1),r);var n=lua_tostring(e,-1);return null===n&&luaL_error(e,to_luastring("'package.%s' must be a string"),r),searchpath(e,t,n,to_luastring("."),a)},checkload=function(e,t,r){return t?(lua_pushstring(e,r),2):luaL_error(e,to_luastring("error loading module '%s' from file '%s':\n\t%s"),lua_tostring(e,1),r,lua_tostring(e,-1))},searcher_Lua=function(e){var t=luaL_checkstring(e,1),r=findfile(e,t,to_luastring("path",!0),to_luastring(LUA_LSUBSEP,!0));return null===r?1:checkload(e,luaL_loadfile(e,r)===LUA_OK,r)},loadfunc=function(e,t,r){var a=void 0;r=luaL_gsub(e,r,to_luastring("."),LUA_OFSEP);var n=luastring_indexOf(r,LUA_IGMARK.charCodeAt(0));if(n>=0){a=lua_pushlstring(e,r,n),a=lua_pushfstring(e,to_luastring("%s%s"),LUA_POF,a);var u=lookforfunc(e,t,a);if(u!==ERRFUNC)return u;r=n+1}return a=lua_pushfstring(e,to_luastring("%s%s"),LUA_POF,r),lookforfunc(e,t,a)},searcher_C=function(e){var t=luaL_checkstring(e,1),r=findfile(e,t,to_luastring("cpath",!0),to_luastring(LUA_CSUBSEP,!0));return null===r?1:checkload(e,0===loadfunc(e,r,t),r)},searcher_Croot=function(e){var t=luaL_checkstring(e,1),r=luastring_indexOf(t,".".charCodeAt(0)),a=void 0;if(r<0)return 0;lua_pushlstring(e,t,r);var n=findfile(e,lua_tostring(e,-1),to_luastring("cpath",!0),to_luastring(LUA_CSUBSEP,!0));return null===n?1:0!==(a=loadfunc(e,n,t))?a!=ERRFUNC?checkload(e,0,n):(lua_pushstring(e,to_luastring("\n\tno module '%s' in file '%s'"),t,n),1):(lua_pushstring(e,n),2)},searcher_preload=function(e){var t=luaL_checkstring(e,1);return lua_getfield(e,LUA_REGISTRYINDEX,LUA_PRELOAD_TABLE),lua_getfield(e,-1,t)===LUA_TNIL&&lua_pushfstring(e,to_luastring("\n\tno field package.preload['%s']"),t),1},findloader=function(e,t,r,a){var n=new luaL_Buffer;return luaL_buffinit(e,n),lua_getfield(e,lua_upvalueindex(1),to_luastring("searchers",!0))!==LUA_TTABLE&&luaL_error(e,to_luastring("'package.searchers' must be a table")),findloader_cont(e,LUA_OK,{name:t,i:1,msg:n,ctx:r,k:a})},findloader_cont=function e(t,r,a){for(;r===LUA_OK?(lua_rawgeti(t,3,a.i)===LUA_TNIL&&(lua_pop(t,1),luaL_pushresult(a.msg),luaL_error(t,to_luastring("module '%s' not found:%s"),a.name,lua_tostring(t,-1))),lua_pushstring(t,a.name),lua_callk(t,1,2,a,e)):r=LUA_OK,!lua_isfunction(t,-2);a.i++)lua_isstring(t,-2)?(lua_pop(t,1),luaL_addvalue(a.msg)):lua_pop(t,2);return a.k(t,LUA_OK,a.ctx)},ll_require=function(e){var t=luaL_checkstring(e,1);return lua_settop(e,1),lua_getfield(e,LUA_REGISTRYINDEX,LUA_LOADED_TABLE),lua_getfield(e,2,t),lua_toboolean(e,-1)?1:(lua_pop(e,1),findloader(e,t,t,ll_require_cont))},ll_require_cont=function(e,t,r){return lua_pushstring(e,r),lua_insert(e,-2),lua_callk(e,2,1,r,ll_require_cont2),ll_require_cont2(e,LUA_OK,r)},ll_require_cont2=function(e,t,r){var a=r;return lua_isnil(e,-1)||lua_setfield(e,2,a),lua_getfield(e,2,a)==LUA_TNIL&&(lua_pushboolean(e,1),lua_pushvalue(e,-1),lua_setfield(e,2,a)),1},pk_funcs={loadlib:ll_loadlib,searchpath:ll_searchpath},ll_funcs={require:ll_require},createsearcherstable=function(e){var t=[searcher_preload,searcher_Lua,searcher_C,searcher_Croot,null];lua_createtable(e);for(var r=0;t[r];r++)lua_pushvalue(e,-2),lua_pushcclosure(e,t[r],1),lua_rawseti(e,-2,r+1);lua_setfield(e,-2,to_luastring("searchers",!0))},createclibstable=function(e){lua_newtable(e),lua_createtable(e,0,1),lua_setmetatable(e,-2),lua_rawsetp(e,LUA_REGISTRYINDEX,CLIBS)},luaopen_package=function(e){return createclibstable(e),luaL_newlib(e,pk_funcs),createsearcherstable(e),setpath(e,to_luastring("path",!0),LUA_PATH_VAR,LUA_PATH_DEFAULT),setpath(e,to_luastring("cpath",!0),LUA_CPATH_VAR,LUA_CPATH_DEFAULT),lua_pushliteral(e,LUA_DIRSEP+"\n"+LUA_PATH_SEP+"\n"+LUA_PATH_MARK+"\n"+LUA_EXEC_DIR+"\n"+LUA_IGMARK+"\n"),lua_setfield(e,-2,to_luastring("config",!0)),luaL_getsubtable(e,LUA_REGISTRYINDEX,LUA_LOADED_TABLE),lua_setfield(e,-2,to_luastring("loaded",!0)),luaL_getsubtable(e,LUA_REGISTRYINDEX,LUA_PRELOAD_TABLE),lua_setfield(e,-2,to_luastring("preload",!0)),lua_pushglobaltable(e),lua_pushvalue(e,-2),luaL_setfuncs(e,ll_funcs,1),lua_pop(e,1),1};module.exports.luaopen_package=luaopen_package},function(e,t,r){"use strict";function a(e,t){if("string"==typeof e)e=(0,n.to_luastring)(e);else if(!Array.isArray(e))throw TypeError("expected string or array of bytes");t=t?(0,n.to_luastring)(t):null;var r=x(y,e,null,t),a=void 0;if(a=r===l?new SyntaxError(T(y,-1)):R(y,-1),h(y,1),r!==i)throw a;return a}Object.defineProperty(t,"__esModule",{value:!0}),t.L=t.interop=t.lualib=t.lauxlib=t.lua=t.to_uristring=t.to_luastring=t.to_jsstring=t.luastring_of=t.luastring_indexOf=t.luastring_eq=t.FENGARI_VERSION_RELEASE=t.FENGARI_VERSION_NUM=t.FENGARI_VERSION_MINOR=t.FENGARI_VERSION_MAJOR=t.FENGARI_VERSION=t.FENGARI_RELEASE=t.FENGARI_COPYRIGHT=t.FENGARI_AUTHORS=void 0,t.load=a;var n=r(19),u=r(39),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(u),o=n.lua.LUA_ERRRUN,l=n.lua.LUA_ERRSYNTAX,i=n.lua.LUA_OK,c=n.lua.lua_Debug,_=n.lua.lua_getinfo,f=n.lua.lua_getstack,p=n.lua.lua_gettop,v=n.lua.lua_insert,d=n.lua.lua_pcall,h=n.lua.lua_pop,L=n.lua.lua_pushcfunction,A=n.lua.lua_pushstring,g=n.lua.lua_remove,b=n.lua.lua_setglobal,T=n.lua.lua_tojsstring,x=n.lauxlib.luaL_loadbuffer,k=n.lauxlib.luaL_newstate,O=n.lauxlib.luaL_requiref,m=s.checkjs,E=s.luaopen_js,U=s.push,R=s.tojs;t.FENGARI_AUTHORS=n.FENGARI_AUTHORS,t.FENGARI_COPYRIGHT=n.FENGARI_COPYRIGHT,t.FENGARI_RELEASE=n.FENGARI_RELEASE,t.FENGARI_VERSION=n.FENGARI_VERSION,t.FENGARI_VERSION_MAJOR=n.FENGARI_VERSION_MAJOR,t.FENGARI_VERSION_MINOR=n.FENGARI_VERSION_MINOR,t.FENGARI_VERSION_NUM=n.FENGARI_VERSION_NUM,t.FENGARI_VERSION_RELEASE=n.FENGARI_VERSION_RELEASE,t.luastring_eq=n.luastring_eq,t.luastring_indexOf=n.luastring_indexOf,t.luastring_of=n.luastring_of,t.to_jsstring=n.to_jsstring,t.to_luastring=n.to_luastring,t.to_uristring=n.to_uristring,t.lua=n.lua,t.lauxlib=n.lauxlib,t.lualib=n.lualib,t.interop=s;var y=t.L=k();if(n.lualib.luaL_openlibs(y),O(y,(0,n.to_luastring)("js"),E,1),h(y,1),A(y,(0,n.to_luastring)(n.FENGARI_COPYRIGHT)),b(y,(0,n.to_luastring)("_COPYRIGHT")),"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);else{var N=function(e){switch(e){case"anonymous":return"omit";case"use-credentials":return"include";default:return"same-origin"}},S=function(e){var t=new c;return f(e,2,t)&&_(e,(0,n.to_luastring)("Sl"),t),U(e,new ErrorEvent("error",{bubbles:!0,cancelable:!0,message:T(e,1),error:R(e,1),filename:t.short_src?(0,n.to_jsstring)(t.short_src):void 0,lineno:t.currentline>0?t.currentline:void 0})),1},w=function(e,t,r){var a=x(y,t,null,r),n=void 0;if(a===l){var u=T(y,-1),s=e.src?e.src:document.location,c=new SyntaxError(u,s,void 0);n=new ErrorEvent("error",{message:u,error:c,filename:s,lineno:void 0})}else if(a===i){var _=p(y);L(y,S),v(y,_),Object.defineProperty(document,"currentScript",{value:e,configurable:!0}),a=d(y,0,0,_),delete document.currentScript,g(y,_),a===o&&(n=m(y,-1))}a!==i&&(void 0===n&&(n=new ErrorEvent("error",{message:T(y,-1),error:R(y,-1)})),h(y,1),window.dispatchEvent(n)&&console.error("uncaught exception",n.error))},I=function(e,t,r){if(e.status>=200&&e.status<300){var a=e.response;a="string"==typeof a?(0,n.to_luastring)(e.response):new Uint8Array(a),w(t,a,r)}else t.dispatchEvent(new Event("error"))},M=function(e){if(e.src){var t=(0,n.to_luastring)("@"+e.src);if("complete"===document.readyState||e.async)if("function"==typeof fetch)fetch(e.src,{method:"GET",credentials:N(e.crossorigin),redirect:"follow",integrity:e.integrity}).then(function(e){if(e.ok)return e.arrayBuffer();throw"unable to fetch"}).then(function(r){var a=new Uint8Array(r);w(e,a,t)}).catch(function(t){e.dispatchEvent(new Event("error"))});else{var r=new XMLHttpRequest;r.open("GET",e.src,!0),r.responseType="arraybuffer",r.onreadystatechange=function(){4===r.readyState&&I(r,e,t)},r.send()}else{var a=new XMLHttpRequest;a.open("GET",e.src,!1),a.send(),I(a,e,t)}}else{var u=(0,n.to_luastring)(e.innerHTML),s=e.id?(0,n.to_luastring)("="+e.id):u;w(e,u,s)}},P=/^(.*?\/.*?)([\t ]*;.*)?$/,D=function(e){if("SCRIPT"===e.tagName){var t=P.exec(e.type);if(t){var r=t[1];"application/lua"!==r&&"text/lua"!==r||M(e)}}};new MutationObserver(function(e,t){for(var r=0;r<e.length;r++)for(var a=e[r],n=0;n<a.addedNodes.length;n++)D(a.addedNodes[n])}).observe(document,{childList:!0,subtree:!0});Array.prototype.forEach.call(document.querySelectorAll('script[type^="application/lua"] script[type^="text/lua"]'),D)}},function(e,t,r){"use strict";var a=r(0),n=a.LUA_MULTRET,u=a.LUA_OPADD,s=a.LUA_OPBAND,o=a.LUA_OPBNOT,l=a.LUA_OPBOR,i=a.LUA_OPBXOR,c=a.LUA_OPDIV,_=a.LUA_OPIDIV,f=a.LUA_OPMOD,p=a.LUA_OPSHL,v=a.LUA_OPSHR,d=a.LUA_OPUNM,h=a.constant_types,L=h.LUA_TBOOLEAN,A=h.LUA_TLIGHTUSERDATA,g=h.LUA_TLNGSTR,b=h.LUA_TNIL,T=h.LUA_TNUMFLT,x=h.LUA_TNUMINT,k=h.LUA_TTABLE,O=a.to_luastring,m=r(2),E=m.lua_assert,U=r(20),R=r(4),y=r(15),N=r(22),S=r(8),w=r(14),I=y.OpCodesI,M=R.TValue,P={OPR_ADD:0,OPR_SUB:1,OPR_MUL:2,OPR_MOD:3,OPR_POW:4,OPR_DIV:5,OPR_IDIV:6,OPR_BAND:7,OPR_BOR:8,OPR_BXOR:9,OPR_SHL:10,OPR_SHR:11,OPR_CONCAT:12,OPR_EQ:13,OPR_LT:14,OPR_LE:15,OPR_NE:16,OPR_GT:17,OPR_GE:18,OPR_AND:19,OPR_OR:20,OPR_NOBINOPR:21},D={OPR_MINUS:0,OPR_BNOT:1,OPR_NOT:2,OPR_LEN:3,OPR_NOUNOPR:4},C=function(e){return e.t!==e.f},V=function(e,t){var r=N.expkind;if(C(e))return!1;switch(e.k){case r.VKINT:return!t||new M(x,e.u.ival);case r.VKFLT:return!t||new M(T,e.u.nval);default:return!1}},B=function(e,t,r){var a=void 0,n=t+r-1;if(e.pc>e.lasttarget&&(a=e.f.code[e.pc-1],a.opcode===I.OP_LOADNIL)){var u=a.A,s=u+a.B;if(u<=t&&t<=s+1||t<=u&&u<=n+1)return u<t&&(t=u),s>n&&(n=s),y.SETARG_A(a,t),void y.SETARG_B(a,n-t)}ue(e,I.OP_LOADNIL,t,r-1,0)},G=function(e,t){return e.f.code[t.u.info]},K=function(e,t){var r=e.f.code[t].sBx;return-1===r?-1:t+1+r},j=function(e,t,r){var a=e.f.code[t],n=r-(t+1);E(-1!==r),Math.abs(n)>y.MAXARG_sBx&&U.luaX_syntaxerror(e.ls,O("control structure too long",!0)),y.SETARG_sBx(a,n)},F=function(e,t,r){if(-1===r)return t;if(-1===t)t=r;else{for(var a=t,n=K(e,a);-1!==n;)a=n,n=K(e,a);j(e,a,r)}return t},H=function(e){var t=e.jpc;e.jpc=-1;var r=oe(e,I.OP_JMP,0,-1);return r=F(e,r,t)},X=function(e,t){return re(e,H(e),t)},z=function(e,t,r){ue(e,I.OP_RETURN,t,r+1,0)},q=function(e,t,r,a,n){return ue(e,t,r,a,n),H(e)},Y=function(e){return e.lasttarget=e.pc,e.pc},J=function(e,t){return t>=1&&y.testTMode(e.f.code[t-1].opcode)?t-1:t},Z=function(e,t){return e.f.code[J(e,t)]},W=function(e,t,r){var a=J(e,t),n=e.f.code[a];return n.opcode===I.OP_TESTSET&&(r!==y.NO_REG&&r!==n.B?y.SETARG_A(n,r):e.f.code[a]=y.CREATE_ABC(I.OP_TEST,n.B,0,n.C),!0)},Q=function(e,t){for(;-1!==t;t=K(e,t))W(e,t,y.NO_REG)},$=function(e,t,r,a,n){for(;-1!==t;){var u=K(e,t);W(e,t,a)?j(e,t,r):j(e,t,n),t=u}},ee=function(e){$(e,e.jpc,e.pc,y.NO_REG,e.pc),e.jpc=-1},te=function(e,t){Y(e),e.jpc=F(e,e.jpc,t)},re=function(e,t,r){r===e.pc?te(e,t):(E(r<e.pc),$(e,t,r,y.NO_REG,r))},ae=function(e,t,r){for(r++;-1!==t;t=K(e,t)){var a=e.f.code[t];E(a.opcode===I.OP_JMP&&(0===a.A||a.A>=r)),y.SETARG_A(a,r)}},ne=function(e,t){var r=e.f;return ee(e),r.code[e.pc]=t,r.lineinfo[e.pc]=e.ls.lastline,e.pc++},ue=function(e,t,r,a,n){return E(y.getOpMode(t)===y.iABC),E(y.getBMode(t)!==y.OpArgN||0===a),E(y.getCMode(t)!==y.OpArgN||0===n),E(r<=y.MAXARG_A&&a<=y.MAXARG_B&&n<=y.MAXARG_C),ne(e,y.CREATE_ABC(t,r,a,n))},se=function(e,t,r,a){return E(y.getOpMode(t)===y.iABx||y.getOpMode(t)===y.iAsBx),E(y.getCMode(t)===y.OpArgN),E(r<=y.MAXARG_A&&a<=y.MAXARG_Bx),ne(e,y.CREATE_ABx(t,r,a))},oe=function(e,t,r,a){return se(e,t,r,a+y.MAXARG_sBx)},le=function(e,t){return E(t<=y.MAXARG_Ax),ne(e,y.CREATE_Ax(I.OP_EXTRAARG,t))},ie=function(e,t,r){if(r<=y.MAXARG_Bx)return se(e,I.OP_LOADK,t,r);var a=se(e,I.OP_LOADKX,t,0);return le(e,r),a},ce=function(e,t){var r=e.freereg+t;r>e.f.maxstacksize&&(r>=255&&U.luaX_syntaxerror(e.ls,O("function or expression needs too many registers",!0)),e.f.maxstacksize=r)},_e=function(e,t){ce(e,t),e.freereg+=t},fe=function(e,t){!y.ISK(t)&&t>=e.nactvar&&(e.freereg--,E(t===e.freereg))},pe=function(e,t){t.k===N.expkind.VNONRELOC&&fe(e,t.u.info)},ve=function(e,t,r){var a=t.k===N.expkind.VNONRELOC?t.u.info:-1,n=r.k===N.expkind.VNONRELOC?r.u.info:-1;a>n?(fe(e,a),fe(e,n)):(fe(e,n),fe(e,a))},de=function(e,t,r){var a=e.f,n=S.luaH_set(e.L,e.ls.h,t);if(n.ttisinteger()){var u=n.value;if(u<e.nk&&a.k[u].ttype()===r.ttype()&&a.k[u].value===r.value)return u}var s=e.nk;return n.setivalue(s),a.k[s]=r,e.nk++,s},he=function(e,t){var r=new M(g,t);return de(e,r,r)},Le=function(e,t){var r=new M(A,t),a=new M(x,t);return de(e,r,a)},Ae=function(e,t){var r=new M(T,t);return de(e,r,r)},ge=function(e,t){var r=new M(L,t);return de(e,r,r)},be=function(e){var t=new M(b,null),r=new M(k,e.ls.h);return de(e,r,t)},Te=function(e,t,r){var a=N.expkind;if(t.k===a.VCALL)y.SETARG_C(G(e,t),r+1);else if(t.k===a.VVARARG){var u=G(e,t);y.SETARG_B(u,r+1),y.SETARG_A(u,e.freereg),_e(e,1)}else E(r===n)},xe=function(e,t){Te(e,t,n)},ke=function(e,t){var r=N.expkind;t.k===r.VCALL?(E(2===G(e,t).C),t.k=r.VNONRELOC,t.u.info=G(e,t).A):t.k===r.VVARARG&&(y.SETARG_B(G(e,t),2),t.k=r.VRELOCABLE)},Oe=function(e,t){var r=N.expkind;switch(t.k){case r.VLOCAL:t.k=r.VNONRELOC;break;case r.VUPVAL:t.u.info=ue(e,I.OP_GETUPVAL,0,t.u.info,0),t.k=r.VRELOCABLE;break;case r.VINDEXED:var a=void 0;fe(e,t.u.ind.idx),t.u.ind.vt===r.VLOCAL?(fe(e,t.u.ind.t),a=I.OP_GETTABLE):(E(t.u.ind.vt===r.VUPVAL),a=I.OP_GETTABUP),t.u.info=ue(e,a,0,t.u.ind.t,t.u.ind.idx),t.k=r.VRELOCABLE;break;case r.VVARARG:case r.VCALL:ke(e,t)}},me=function(e,t,r,a){return Y(e),ue(e,I.OP_LOADBOOL,t,r,a)},Ee=function(e,t,r){var a=N.expkind;switch(Oe(e,t),t.k){case a.VNIL:B(e,r,1);break;case a.VFALSE:case a.VTRUE:ue(e,I.OP_LOADBOOL,r,t.k===a.VTRUE,0);break;case a.VK:ie(e,r,t.u.info);break;case a.VKFLT:ie(e,r,Ae(e,t.u.nval));break;case a.VKINT:ie(e,r,Le(e,t.u.ival));break;case a.VRELOCABLE:var n=G(e,t);y.SETARG_A(n,r);break;case a.VNONRELOC:r!==t.u.info&&ue(e,I.OP_MOVE,r,t.u.info,0);break;default:return void E(t.k===a.VJMP)}t.u.info=r,t.k=a.VNONRELOC},Ue=function(e,t){t.k!==N.expkind.VNONRELOC&&(_e(e,1),Ee(e,t,e.freereg-1))},Re=function(e,t){for(;-1!==t;t=K(e,t)){if(Z(e,t).opcode!==I.OP_TESTSET)return!0}return!1},ye=function(e,t,r){var a=N.expkind;if(Ee(e,t,r),t.k===a.VJMP&&(t.t=F(e,t.t,t.u.info)),C(t)){var n=void 0,u=-1,s=-1;if(Re(e,t.t)||Re(e,t.f)){var o=t.k===a.VJMP?-1:H(e);u=me(e,r,0,1),s=me(e,r,1,0),te(e,o)}n=Y(e),$(e,t.f,n,r,u),$(e,t.t,n,r,s)}t.f=t.t=-1,t.u.info=r,t.k=a.VNONRELOC},Ne=function(e,t){Oe(e,t),pe(e,t),_e(e,1),ye(e,t,e.freereg-1)},Se=function(e,t){if(Oe(e,t),t.k===N.expkind.VNONRELOC){if(!C(t))return t.u.info;if(t.u.info>=e.nactvar)return ye(e,t,t.u.info),t.u.info}return Ne(e,t),t.u.info},we=function(e,t){(t.k!==N.expkind.VUPVAL||C(t))&&Se(e,t)},Ie=function(e,t){C(t)?Se(e,t):Oe(e,t)},Me=function(e,t){var r=N.expkind,a=!1;switch(Ie(e,t),t.k){case r.VTRUE:t.u.info=ge(e,!0),a=!0;break;case r.VFALSE:t.u.info=ge(e,!1),a=!0;break;case r.VNIL:t.u.info=be(e),a=!0;break;case r.VKINT:t.u.info=Le(e,t.u.ival),a=!0;break;case r.VKFLT:t.u.info=Ae(e,t.u.nval),a=!0;break;case r.VK:a=!0}return a&&(t.k=r.VK,t.u.info<=y.MAXINDEXRK)?y.RKASK(t.u.info):Se(e,t)},Pe=function(e,t,r){var a=N.expkind;switch(t.k){case a.VLOCAL:return pe(e,r),void ye(e,r,t.u.info);case a.VUPVAL:var n=Se(e,r);ue(e,I.OP_SETUPVAL,n,t.u.info,0);break;case a.VINDEXED:var u=t.u.ind.vt===a.VLOCAL?I.OP_SETTABLE:I.OP_SETTABUP,s=Me(e,r);ue(e,u,t.u.ind.t,t.u.ind.idx,s)}pe(e,r)},De=function(e,t,r){Se(e,t);var a=t.u.info;pe(e,t),t.u.info=e.freereg,t.k=N.expkind.VNONRELOC,_e(e,2),ue(e,I.OP_SELF,t.u.info,a,Me(e,r)),pe(e,r)},Ce=function(e,t){var r=Z(e,t.u.info);E(y.testTMode(r.opcode)&&r.opcode!==I.OP_TESTSET&&r.opcode!==I.OP_TEST),y.SETARG_A(r,!r.A)},Ve=function(e,t,r){if(t.k===N.expkind.VRELOCABLE){var a=G(e,t);if(a.opcode===I.OP_NOT)return e.pc--,q(e,I.OP_TEST,a.B,0,!r)}return Ue(e,t),pe(e,t),q(e,I.OP_TESTSET,y.NO_REG,t.u.info,r)},Be=function(e,t){var r=N.expkind,a=void 0;switch(Oe(e,t),t.k){case r.VJMP:Ce(e,t),a=t.u.info;break;case r.VK:case r.VKFLT:case r.VKINT:case r.VTRUE:a=-1;break;default:a=Ve(e,t,0)}t.f=F(e,t.f,a),te(e,t.t),t.t=-1},Ge=function(e,t){var r=N.expkind,a=void 0;switch(Oe(e,t),t.k){case r.VJMP:a=t.u.info;break;case r.VNIL:case r.VFALSE:a=-1;break;default:a=Ve(e,t,1)}t.t=F(e,t.t,a),te(e,t.f),t.f=-1},Ke=function(e,t){var r=N.expkind;switch(Oe(e,t),t.k){case r.VNIL:case r.VFALSE:t.k=r.VTRUE;break;case r.VK:case r.VKFLT:case r.VKINT:case r.VTRUE:t.k=r.VFALSE;break;case r.VJMP:Ce(e,t);break;case r.VRELOCABLE:case r.VNONRELOC:Ue(e,t),pe(e,t),t.u.info=ue(e,I.OP_NOT,0,t.u.info,0),t.k=r.VRELOCABLE}var a=t.f;t.f=t.t,t.t=a,Q(e,t.f),Q(e,t.t)},je=function(e,t,r){var a=N.expkind;E(!C(t)&&(N.vkisinreg(t.k)||t.k===a.VUPVAL)),t.u.ind.t=t.u.info,t.u.ind.idx=Me(e,r),t.u.ind.vt=t.k===a.VUPVAL?a.VUPVAL:a.VLOCAL,t.k=a.VINDEXED},Fe=function(e,t,r){switch(e){case s:case l:case i:case p:case v:case o:return!1!==w.tointeger(t)&&!1!==w.tointeger(r);case c:case _:case f:return 0!==r.value;default:return 1}},He=function(e,t,r){var a=N.expkind,n=void 0,u=void 0;if(!(n=V(t,!0))||!(u=V(r,!0))||!Fe(e,n,u))return 0;var s=new M;if(R.luaO_arith(null,e,n,u,s),s.ttisinteger())t.k=a.VKINT,t.u.ival=s.value;else{var o=s.value;if(isNaN(o)||0===o)return!1;t.k=a.VKFLT,t.u.nval=o}return!0},Xe=function(e,t,r,a){var n=Se(e,r);pe(e,r),r.u.info=ue(e,t,0,n,0),r.k=N.expkind.VRELOCABLE,We(e,a)},ze=function(e,t,r,a,n){var u=Me(e,a),s=Me(e,r);ve(e,r,a),r.u.info=ue(e,t,0,s,u),r.k=N.expkind.VRELOCABLE,We(e,n)},qe=function(e,t,r,a){var n=N.expkind,u=void 0;r.k===n.VK?u=y.RKASK(r.u.info):(E(r.k===n.VNONRELOC),u=r.u.info);var s=Me(e,a);switch(ve(e,r,a),t){case P.OPR_NE:r.u.info=q(e,I.OP_EQ,0,u,s);break;case P.OPR_GT:case P.OPR_GE:var o=t-P.OPR_NE+I.OP_EQ;r.u.info=q(e,o,1,s,u);break;default:var l=t-P.OPR_EQ+I.OP_EQ;r.u.info=q(e,l,1,u,s)}r.k=n.VJMP},Ye=function(e,t,r,a){var n=new N.expdesc;switch(n.k=N.expkind.VKINT,n.u.ival=n.u.nval=n.u.info=0,n.t=-1,n.f=-1,t){case D.OPR_MINUS:case D.OPR_BNOT:if(He(t+d,r,n))break;case D.OPR_LEN:Xe(e,t+I.OP_UNM,r,a);break;case D.OPR_NOT:Ke(e,r)}},Je=function(e,t,r){switch(t){case P.OPR_AND:Be(e,r);break;case P.OPR_OR:Ge(e,r);break;case P.OPR_CONCAT:Ne(e,r);break;case P.OPR_ADD:case P.OPR_SUB:case P.OPR_MUL:case P.OPR_DIV:case P.OPR_IDIV:case P.OPR_MOD:case P.OPR_POW:case P.OPR_BAND:case P.OPR_BOR:case P.OPR_BXOR:case P.OPR_SHL:case P.OPR_SHR:V(r,!1)||Me(e,r);break;default:Me(e,r)}},Ze=function(e,t,r,a,n){var s=N.expkind;switch(t){case P.OPR_AND:E(-1===r.t),Oe(e,a),a.f=F(e,a.f,r.f),r.to(a);break;case P.OPR_OR:E(-1===r.f),Oe(e,a),a.t=F(e,a.t,r.t),r.to(a);break;case P.OPR_CONCAT:Ie(e,a);var o=G(e,a);a.k===s.VRELOCABLE&&o.opcode===I.OP_CONCAT?(E(r.u.info===o.B-1),pe(e,r),y.SETARG_B(o,r.u.info),r.k=s.VRELOCABLE,r.u.info=a.u.info):(Ne(e,a),ze(e,I.OP_CONCAT,r,a,n));break;case P.OPR_ADD:case P.OPR_SUB:case P.OPR_MUL:case P.OPR_DIV:case P.OPR_IDIV:case P.OPR_MOD:case P.OPR_POW:case P.OPR_BAND:case P.OPR_BOR:case P.OPR_BXOR:case P.OPR_SHL:case P.OPR_SHR:He(t+u,r,a)||ze(e,t+I.OP_ADD,r,a,n);break;case P.OPR_EQ:case P.OPR_LT:case P.OPR_LE:case P.OPR_NE:case P.OPR_GT:case P.OPR_GE:qe(e,t,r,a)}return r},We=function(e,t){e.f.lineinfo[e.pc-1]=t},Qe=function(e,t,r,a){var u=(r-1)/y.LFIELDS_PER_FLUSH+1,s=a===n?0:a;E(0!==a&&a<=y.LFIELDS_PER_FLUSH),u<=y.MAXARG_C?ue(e,I.OP_SETLIST,t,s,u):u<=y.MAXARG_Ax?(ue(e,I.OP_SETLIST,t,s,0),le(e,u)):U.luaX_syntaxerror(e.ls,O("constructor too long",!0)),e.freereg=t+1};e.exports.BinOpr=P,e.exports.NO_JUMP=-1,e.exports.UnOpr=D,e.exports.getinstruction=G,e.exports.luaK_checkstack=ce,e.exports.luaK_code=ne,e.exports.luaK_codeABC=ue,e.exports.luaK_codeABx=se,e.exports.luaK_codeAsBx=oe,e.exports.luaK_codek=ie,e.exports.luaK_concat=F,e.exports.luaK_dischargevars=Oe,e.exports.luaK_exp2RK=Me,e.exports.luaK_exp2anyreg=Se,e.exports.luaK_exp2anyregup=we,e.exports.luaK_exp2nextreg=Ne,e.exports.luaK_exp2val=Ie,e.exports.luaK_fixline=We,e.exports.luaK_getlabel=Y,e.exports.luaK_goiffalse=Ge,e.exports.luaK_goiftrue=Be,e.exports.luaK_indexed=je,e.exports.luaK_infix=Je,e.exports.luaK_intK=Le,e.exports.luaK_jump=H,e.exports.luaK_jumpto=X,e.exports.luaK_nil=B,e.exports.luaK_numberK=Ae,e.exports.luaK_patchclose=ae,e.exports.luaK_patchlist=re,e.exports.luaK_patchtohere=te,e.exports.luaK_posfix=Ze,e.exports.luaK_prefix=Ye,e.exports.luaK_reserveregs=_e,e.exports.luaK_ret=z,e.exports.luaK_self=De,e.exports.luaK_setlist=Qe,e.exports.luaK_setmultret=xe,e.exports.luaK_setoneret=ke,e.exports.luaK_setreturns=Te,e.exports.luaK_storevar=Pe,e.exports.luaK_stringK=he},function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),u=r(0),s=u.LUA_SIGNATURE,o=u.constant_types,l=o.LUA_TBOOLEAN,i=o.LUA_TLNGSTR,c=o.LUA_TNIL,_=o.LUA_TNUMFLT,f=o.LUA_TNUMINT,p=o.LUA_TSHRSTR,v=u.thread_status.LUA_ERRSYNTAX,d=u.is_luastring,h=u.luastring_eq,L=u.to_luastring,A=r(7),g=r(12),b=r(4),T=r(15),x=T.MAXARG_sBx,k=T.POS_A,O=T.POS_Ax,m=T.POS_B,E=T.POS_Bx,U=T.POS_C,R=T.POS_OP,y=T.SIZE_A,N=T.SIZE_Ax,S=T.SIZE_B,w=T.SIZE_Bx,I=T.SIZE_C,M=T.SIZE_OP,P=r(2),D=P.lua_assert,C=r(9),V=C.luaS_bless,B=r(18),G=B.luaZ_read,K=B.ZIO,j=[25,147,13,10,26,10],F=function(){function e(t,r,n){a(this,e),this.intSize=4,this.size_tSize=4,this.instructionSize=4,this.integerSize=4,this.numberSize=8,D(r instanceof K,"BytecodeParser only operates on a ZIO"),D(d(n)),64===n[0]||61===n[0]?this.name=n.subarray(1):n[0]==s[0]?this.name=L("binary string",!0):this.name=n,this.L=t,this.Z=r,this.arraybuffer=new ArrayBuffer(Math.max(this.intSize,this.size_tSize,this.instructionSize,this.integerSize,this.numberSize)),this.dv=new DataView(this.arraybuffer),this.u8=new Uint8Array(this.arraybuffer)}return n(e,[{key:"read",value:function(e){var t=new Uint8Array(e);return 0!==G(this.Z,t,0,e)&&this.error("truncated"),t}},{key:"readByte",value:function(){return 0!==G(this.Z,this.u8,0,1)&&this.error("truncated"),this.u8[0]}},{key:"readInteger",value:function(){return 0!==G(this.Z,this.u8,0,this.integerSize)&&this.error("truncated"),this.dv.getInt32(0,!0)}},{key:"readSize_t",value:function(){return this.readInteger()}},{key:"readInt",value:function(){return 0!==G(this.Z,this.u8,0,this.intSize)&&this.error("truncated"),this.dv.getInt32(0,!0)}},{key:"readNumber",value:function(){return 0!==G(this.Z,this.u8,0,this.numberSize)&&this.error("truncated"),this.dv.getFloat64(0,!0)}},{key:"readString",value:function(){var e=Math.max(this.readByte()-1,0);return e+1===255&&(e=this.readSize_t()-1),0===e?null:V(this.L,this.read(e))}},{key:"readInstruction",value:function(){return 0!==G(this.Z,this.u8,0,this.instructionSize)&&this.error("truncated"),this.dv.getUint32(0,!0)}},{key:"readCode",value:function(t){for(var r=this.readInt(),a=e,n=0;n<r;n++){var u=this.readInstruction();t.code[n]={code:u,opcode:u>>R&a.MASK1(M,0),A:u>>k&a.MASK1(y,0),B:u>>m&a.MASK1(S,0),C:u>>U&a.MASK1(I,0),Bx:u>>E&a.MASK1(w,0),Ax:u>>O&a.MASK1(N,0),sBx:(u>>E&a.MASK1(w,0))-x}}}},{key:"readUpvalues",value:function(e){for(var t=this.readInt(),r=0;r<t;r++)e.upvalues[r]={name:null,instack:this.readByte(),idx:this.readByte()}}},{key:"readConstants",value:function(e){for(var t=this.readInt(),r=0;r<t;r++){var a=this.readByte();switch(a){case c:e.k.push(new b.TValue(c,null));break;case l:e.k.push(new b.TValue(l,0!==this.readByte()));break;case _:e.k.push(new b.TValue(_,this.readNumber()));break;case f:e.k.push(new b.TValue(f,this.readInteger()));break;case p:case i:e.k.push(new b.TValue(i,this.readString()));break;default:this.error("unrecognized constant '"+a+"'")}}}},{key:"readProtos",value:function(e){for(var t=this.readInt(),r=0;r<t;r++)e.p[r]=new g.Proto(this.L),this.readFunction(e.p[r],e.source)}},{key:"readDebug",value:function(e){for(var t=this.readInt(),r=0;r<t;r++)e.lineinfo[r]=this.readInt();t=this.readInt();for(var a=0;a<t;a++)e.locvars[a]={varname:this.readString(),startpc:this.readInt(),endpc:this.readInt()};t=this.readInt();for(var n=0;n<t;n++)e.upvalues[n].name=this.readString()}},{key:"readFunction",value:function(e,t){e.source=this.readString(),null===e.source&&(e.source=t),e.linedefined=this.readInt(),e.lastlinedefined=this.readInt(),e.numparams=this.readByte(),e.is_vararg=0!==this.readByte(),e.maxstacksize=this.readByte(),this.readCode(e),this.readConstants(e),this.readUpvalues(e),this.readProtos(e),this.readDebug(e)}},{key:"checkliteral",value:function(e,t){var r=this.read(e.length);h(r,e)||this.error(t)}},{key:"checkHeader",value:function(){this.checkliteral(s.subarray(1),"not a"),83!==this.readByte()&&this.error("version mismatch in"),0!==this.readByte()&&this.error("format mismatch in"),this.checkliteral(j,"corrupted"),this.intSize=this.readByte(),this.size_tSize=this.readByte(),this.instructionSize=this.readByte(),this.integerSize=this.readByte(),this.numberSize=this.readByte(),this.checksize(this.intSize,4,"int"),this.checksize(this.size_tSize,4,"size_t"),this.checksize(this.instructionSize,4,"instruction"),this.checksize(this.integerSize,4,"integer"),this.checksize(this.numberSize,8,"number"),22136!==this.readInteger()&&this.error("endianness mismatch in"),370.5!==this.readNumber()&&this.error("float format mismatch in")}},{key:"error",value:function(e){b.luaO_pushfstring(this.L,L("%s: %s precompiled chunk"),this.name,L(e)),A.luaD_throw(this.L,v)}},{key:"checksize",value:function(e,t,r){e!==t&&this.error(r+" size mismatch in")}}],[{key:"MASK1",value:function(e,t){return~(-1<<e)<<t}},{key:"MASK0",value:function(t,r){return~e.MASK1(t,r)}}]),e}(),H=function(e,t,r){var a=new F(e,t,r);a.checkHeader();var n=g.luaF_newLclosure(e,a.readByte());return A.luaD_inctop(e),e.stack[e.top-1].setclLvalue(n),n.p=new g.Proto(e),a.readFunction(n.p,null),D(n.nupvalues===n.p.upvalues.length),n};e.exports.luaU_undump=H},function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=r(0),u=n.LUA_SIGNATURE,s=n.LUA_VERSION_MAJOR,o=n.LUA_VERSION_MINOR,l=n.constant_types,i=l.LUA_TBOOLEAN,c=l.LUA_TLNGSTR,_=l.LUA_TNIL,f=l.LUA_TNUMFLT,p=l.LUA_TNUMINT,v=l.LUA_TSHRSTR,d=n.luastring_of,h=d(25,147,13,10,26,10),L=16*Number(s)+Number(o),A=function e(){a(this,e),this.L=null,this.write=null,this.data=null,this.strip=NaN,this.status=NaN},g=function(e,t,r){0===r.status&&t>0&&(r.status=r.writer(r.L,e,t,r.data))},b=function(e,t){g(d(e),1,t)},T=function(e,t){var r=new ArrayBuffer(4);new DataView(r).setInt32(0,e,!0);var a=new Uint8Array(r);g(a,4,t)},x=function(e,t){var r=new ArrayBuffer(4);new DataView(r).setInt32(0,e,!0);var a=new Uint8Array(r);g(a,4,t)},k=function(e,t){var r=new ArrayBuffer(8);new DataView(r).setFloat64(0,e,!0);var a=new Uint8Array(r);g(a,8,t)},O=function(e,t){if(null===e)b(0,t);else{var r=e.tsslen()+1,a=e.getstr();r<255?b(r,t):(b(255,t),x(r,t)),g(a,r-1,t)}},m=function(e,t){var r=e.code.map(function(e){return e.code});T(r.length,t);for(var a=0;a<r.length;a++)T(r[a],t)},E=function(e,t){var r=e.k.length;T(r,t);for(var a=0;a<r;a++){var n=e.k[a];switch(b(n.ttype(),t),n.ttype()){case _:break;case i:b(n.value?1:0,t);break;case f:k(n.value,t);break;case p:x(n.value,t);break;case v:case c:O(n.tsvalue(),t)}}},U=function(e,t){var r=e.p.length;T(r,t);for(var a=0;a<r;a++)N(e.p[a],e.source,t)},R=function(e,t){var r=e.upvalues.length;T(r,t);for(var a=0;a<r;a++)b(e.upvalues[a].instack?1:0,t),b(e.upvalues[a].idx,t)},y=function(e,t){var r=t.strip?0:e.lineinfo.length;T(r,t);for(var a=0;a<r;a++)T(e.lineinfo[a],t);r=t.strip?0:e.locvars.length,T(r,t);for(var n=0;n<r;n++)O(e.locvars[n].varname,t),T(e.locvars[n].startpc,t),T(e.locvars[n].endpc,t);r=t.strip?0:e.upvalues.length,T(r,t);for(var u=0;u<r;u++)O(e.upvalues[u].name,t)},N=function(e,t,r){r.strip||e.source===t?O(null,r):O(e.source,r),T(e.linedefined,r),T(e.lastlinedefined,r),b(e.numparams,r),b(e.is_vararg?1:0,r),b(e.maxstacksize,r),m(e,r),E(e,r),R(e,r),U(e,r),y(e,r)},S=function(e){g(u,u.length,e),b(L,e),b(0,e),g(h,h.length,e),b(4,e),b(4,e),b(4,e),b(4,e),b(8,e),x(22136,e),k(370.5,e)},w=function(e,t,r,a,n){var u=new A;return u.L=e,u.writer=r,u.data=a,u.strip=n,u.status=0,S(u),b(t.upvalues.length,u),N(t,null,u),u.status};e.exports.luaU_dump=w},function(e,t,r){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){function t(e,c,p){function v(e,t){var r;if(t){if(r=t.getTime(),g){var a=l(t);if(t=new Date(r+a+A),l(t)!==a){var n=l(t);t=new Date(r+n+A)}}}else{var u=Date.now();u>b?(b=u,h=new Date(b),r=b,g&&(h=new Date(b+l(h)+A))):r=b,t=h}return d(e,t,L,r)}function d(e,t,a,l){for(var c="",_=null,f=!1,p=e.length,v=!1,h=0;h<p;h++){var L=e.charCodeAt(h);if(!0!==f)37!==L?c+=e[h]:f=!0;else{if(45===L){_="";continue}if(95===L){_=" ";continue}if(48===L){_="0";continue}if(58===L){v&&i("[WARNING] detected use of unsupported %:: or %::: modifiers to strftime"),v=!0;continue}switch(L){case 37:c+="%";break;case 65:c+=a.days[t.getDay()];break;case 66:c+=a.months[t.getMonth()];break;case 67:c+=r(Math.floor(t.getFullYear()/100),_);break;case 68:c+=d(a.formats.D,t,a,l);break;case 70:c+=d(a.formats.F,t,a,l);break;case 72:c+=r(t.getHours(),_);break;case 73:c+=r(u(t.getHours()),_);break;case 76:c+=n(Math.floor(l%1e3));break;case 77:c+=r(t.getMinutes(),_);break;case 80:c+=t.getHours()<12?a.am:a.pm;break;case 82:c+=d(a.formats.R,t,a,l);break;case 83:c+=r(t.getSeconds(),_);break;case 84:c+=d(a.formats.T,t,a,l);break;case 85:c+=r(s(t,"sunday"),_);break;case 87:c+=r(s(t,"monday"),_);break;case 88:c+=d(a.formats.X,t,a,l);break;case 89:c+=t.getFullYear();break;case 90:if(g&&0===A)c+="GMT";else{var b=t.toString().match(/\(([\w\s]+)\)/);c+=b&&b[1]||""}break;case 97:c+=a.shortDays[t.getDay()];break;case 98:c+=a.shortMonths[t.getMonth()];break;case 99:c+=d(a.formats.c,t,a,l);break;case 100:c+=r(t.getDate(),_);break;case 101:c+=r(t.getDate(),null==_?" ":_);break;case 104:c+=a.shortMonths[t.getMonth()];break;case 106:var T=new Date(t.getFullYear(),0,1),x=Math.ceil((t.getTime()-T.getTime())/864e5);c+=n(x);break;case 107:c+=r(t.getHours(),null==_?" ":_);break;case 108:c+=r(u(t.getHours()),null==_?" ":_);break;case 109:c+=r(t.getMonth()+1,_);break;case 110:c+="\n";break;case 111:var x=t.getDate();a.ordinalSuffixes?c+=String(x)+(a.ordinalSuffixes[x-1]||o(x)):c+=String(x)+o(x);break;case 112:c+=t.getHours()<12?a.AM:a.PM;break;case 114:c+=d(a.formats.r,t,a,l);break;case 115:c+=Math.floor(l/1e3);break;case 116:c+="\t";break;case 117:var x=t.getDay();c+=0===x?7:x;break;case 118:c+=d(a.formats.v,t,a,l);break;case 119:c+=t.getDay();break;case 120:c+=d(a.formats.x,t,a,l);break;case 121:c+=(""+t.getFullYear()).slice(2);break;case 122:if(g&&0===A)c+=v?"+00:00":"+0000";else{var k;k=0!==A?A/6e4:-t.getTimezoneOffset();var O=k<0?"-":"+",m=v?":":"",E=Math.floor(Math.abs(k/60)),U=Math.abs(k%60);c+=O+r(E)+m+r(U)}break;default:f&&(c+="%"),c+=e[h]}_=null,f=!1}}return c}var h,L=e||f,A=c||0,g=p||!1,b=0,T=v;return T.localize=function(e){return new t(e||L,A,g)},T.localizeByIdentifier=function(e){var t=_[e];return t?T.localize(t):(i('[WARNING] No locale found with identifier "'+e+'".'),T)},T.timezone=function(e){var r=A,n=g,u=void 0===e?"undefined":a(e);if("number"===u||"string"===u)if(n=!0,"string"===u){var s="-"===e[0]?-1:1,o=parseInt(e.slice(1,3),10),l=parseInt(e.slice(3,5),10);r=s*(60*o+l)*60*1e3}else"number"===u&&(r=60*e*1e3);return new t(L,r,n)},T.utc=function(){return new t(L,A,!0)},T}function r(e,t){return""===t||e>9?e:(null==t&&(t="0"),t+e)}function n(e){return e>99?e:e>9?"0"+e:"00"+e}function u(e){return 0===e?12:e>12?e-12:e}function s(e,t){t=t||"sunday";var r=e.getDay();"monday"===t&&(0===r?r=6:r--);var a=Date.UTC(e.getFullYear(),0,1),n=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),u=Math.floor((n-a)/864e5),s=(u+7-r)/7;return Math.floor(s)}function o(e){var t=e%10,r=e%100;if(r>=11&&r<=13||0===t||t>=4)return"th";switch(t){case 1:return"st";case 2:return"nd";case 3:return"rd"}}function l(e){return 6e4*(e.getTimezoneOffset()||0)}function i(e){"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e)}var c,_={de_DE:{days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d.%m.%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},en_CA:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ordinalSuffixes:["st","nd","rd","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","st","nd","rd","th","th","th","th","th","th","th","st"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%r",x:"%D"}},en_US:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ordinalSuffixes:["st","nd","rd","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","st","nd","rd","th","th","th","th","th","th","th","st"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%m/%d/%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%r",x:"%D"}},es_MX:{days:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],shortDays:["dom","lun","mar","mié","jue","vie","sáb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre"," diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},fr_FR:{days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["janv.","févr.","mars","avril","mai","juin","juil.","août","sept.","oct.","nov.","déc."],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},it_IT:{days:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"],shortDays:["dom","lun","mar","mer","gio","ven","sab"],months:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"],shortMonths:["pr","mag","giu","lug","ago","set","ott","nov","dic"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},nl_NL:{days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d-%m-%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},pt_BR:{days:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d-%m-%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},ru_RU:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],shortDays:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],shortMonths:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X",D:"%d.%m.%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},tr_TR:{days:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],shortDays:["Paz","Pzt","Sal","Çrş","Prş","Cum","Cts"],months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],shortMonths:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],AM:"ÖÖ",PM:"ÖS",am:"ÖÖ",pm:"ÖS",formats:{c:"%a %d %b %Y %X %Z",D:"%d-%m-%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},zh_CN:{days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],shortDays:["日","一","二","三","四","五","六"],months:["一月份","二月份","三月份","四月份","五月份","六月份","七月份","八月份","九月份","十月份","十一月份","十二月份"],shortMonths:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],AM:"上午",PM:"下午",am:"上午",pm:"下午",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%r",x:"%D"}}},f=_.en_US,p=new t(f,0,!1),v=void 0!==e;v?c=e.exports=p:(c=function(){return this||(0,eval)("this")}(),c.strftime=p),"function"!=typeof Date.now&&(Date.now=function(){return+new Date})}()},function(e,t,r){"use strict";var a;!function(){function n(e){return s(o(e),arguments)}function u(e,t){return n.apply(null,[e].concat(t||[]))}function s(e,t){var r,a,u,s,o,i,c,_,f,p=1,v=e.length,d="";for(a=0;a<v;a++)if("string"==typeof e[a])d+=e[a];else if(Array.isArray(e[a])){if(s=e[a],s[2])for(r=t[p],u=0;u<s[2].length;u++){if(!r.hasOwnProperty(s[2][u]))throw new Error(n('[sprintf] property "%s" does not exist',s[2][u]));r=r[s[2][u]]}else r=s[1]?t[s[1]]:t[p++];if(l.not_type.test(s[8])&&l.not_primitive.test(s[8])&&r instanceof Function&&(r=r()),l.numeric_arg.test(s[8])&&"number"!=typeof r&&isNaN(r))throw new TypeError(n("[sprintf] expecting number but found %T",r));switch(l.number.test(s[8])&&(_=r>=0),s[8]){case"b":r=parseInt(r,10).toString(2);break;case"c":r=String.fromCharCode(parseInt(r,10));break;case"d":case"i":r=parseInt(r,10);break;case"j":r=JSON.stringify(r,null,s[6]?parseInt(s[6]):0);break;case"e":r=s[7]?parseFloat(r).toExponential(s[7]):parseFloat(r).toExponential();break;case"f":r=s[7]?parseFloat(r).toFixed(s[7]):parseFloat(r);break;case"g":r=s[7]?String(Number(r.toPrecision(s[7]))):parseFloat(r);break;case"o":r=(parseInt(r,10)>>>0).toString(8);break;case"s":r=String(r),r=s[7]?r.substring(0,s[7]):r;break;case"t":r=String(!!r),r=s[7]?r.substring(0,s[7]):r;break;case"T":r=Object.prototype.toString.call(r).slice(8,-1).toLowerCase(),r=s[7]?r.substring(0,s[7]):r;break;case"u":r=parseInt(r,10)>>>0;break;case"v":r=r.valueOf(),r=s[7]?r.substring(0,s[7]):r;break;case"x":r=(parseInt(r,10)>>>0).toString(16);break;case"X":r=(parseInt(r,10)>>>0).toString(16).toUpperCase()}l.json.test(s[8])?d+=r:(!l.number.test(s[8])||_&&!s[3]?f="":(f=_?"+":"-",r=r.toString().replace(l.sign,"")),i=s[4]?"0"===s[4]?"0":s[4].charAt(1):" ",c=s[6]-(f+r).length,o=s[6]&&c>0?i.repeat(c):"",d+=s[5]?f+r+o:"0"===i?f+o+r:o+f+r)}return d}function o(e){if(i[e])return i[e];for(var t,r=e,a=[],n=0;r;){if(null!==(t=l.text.exec(r)))a.push(t[0]);else if(null!==(t=l.modulo.exec(r)))a.push("%");else{if(null===(t=l.placeholder.exec(r)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){n|=1;var u=[],s=t[2],o=[];if(null===(o=l.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(u.push(o[1]);""!==(s=s.substring(o[0].length));)if(null!==(o=l.key_access.exec(s)))u.push(o[1]);else{if(null===(o=l.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");u.push(o[1])}t[2]=u}else n|=2;if(3===n)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");a.push(t)}r=r.substring(t[0].length)}return i[e]=a}var l={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/},i=Object.create(null);t.sprintf=n,t.vsprintf=u,"undefined"!=typeof window&&(window.sprintf=n,window.vsprintf=u,void 0!==(a=function(){return{sprintf:n,vsprintf:u}}.call(t,r,t,e))&&(e.exports=a))}()},function(e,t,r){"use strict";var a=r(1),n=a.lua_pop,u=r(6),s=u.luaL_requiref,o=r(3),l=o.to_luastring,i={},c=function(e){for(var t in i)s(e,l(t),i[t],1),n(e,1)};e.exports.luaL_openlibs=c;var _=r(16),f=r(38),p=f.luaopen_base,v=r(23),d=v.luaopen_coroutine,h=r(29),L=h.luaopen_debug,A=r(28),g=A.luaopen_math,b=r(30),T=b.luaopen_package,x=r(25),k=x.luaopen_os,O=r(26),m=O.luaopen_string,E=r(24),U=E.luaopen_table,R=r(27),y=R.luaopen_utf8;i._G=p,i[_.LUA_LOADLIBNAME]=T,i[_.LUA_COLIBNAME]=d,i[_.LUA_TABLIBNAME]=U,i[_.LUA_OSLIBNAME]=k,i[_.LUA_STRLIBNAME]=m,i[_.LUA_MATHLIBNAME]=g,i[_.LUA_UTF8LIBNAME]=y,i[_.LUA_DBLIBNAME]=L},function(e,t,r){"use strict";var a=r(1),n=a.LUA_MULTRET,u=a.LUA_OK,s=a.LUA_TFUNCTION,o=a.LUA_TNIL,l=a.LUA_TNONE,i=a.LUA_TNUMBER,c=a.LUA_TSTRING,_=a.LUA_TTABLE,f=a.LUA_VERSION,p=a.LUA_YIELD,v=a.lua_call,d=a.lua_callk,h=a.lua_concat,L=a.lua_error,A=a.lua_getglobal,g=a.lua_geti,b=a.lua_getmetatable,T=a.lua_gettop,x=a.lua_insert,k=a.lua_isnil,O=a.lua_isnone,m=a.lua_isstring,E=a.lua_load,U=a.lua_next,R=a.lua_pcallk,y=a.lua_pop,N=a.lua_pushboolean,S=a.lua_pushcfunction,w=a.lua_pushglobaltable,I=a.lua_pushinteger,M=a.lua_pushliteral,P=a.lua_pushnil,D=a.lua_pushstring,C=a.lua_pushvalue,V=a.lua_rawequal,B=a.lua_rawget,G=a.lua_rawlen,K=a.lua_rawset,j=a.lua_remove,F=a.lua_replace,H=a.lua_rotate,X=a.lua_setfield,z=a.lua_setmetatable,q=a.lua_settop,Y=a.lua_setupvalue,J=a.lua_stringtonumber,Z=a.lua_toboolean,W=a.lua_tolstring,Q=a.lua_tostring,$=a.lua_type,ee=a.lua_typename,te=r(6),re=te.luaL_argcheck,ae=te.luaL_checkany,ne=te.luaL_checkinteger,ue=te.luaL_checkoption,se=te.luaL_checkstack,oe=te.luaL_checktype,le=te.luaL_error,ie=te.luaL_getmetafield,ce=te.luaL_loadbufferx,_e=te.luaL_loadfile,fe=te.luaL_loadfilex,pe=te.luaL_optinteger,ve=te.luaL_optstring,de=te.luaL_setfuncs,he=te.luaL_tolstring,Le=te.luaL_where,Ae=r(3),ge=Ae.to_jsstring,be=Ae.to_luastring,Te=void 0,xe=void 0;if("function"==typeof TextDecoder){var ke="",Oe=new TextDecoder("utf-8");Te=function(e){ke+=Oe.decode(e,{stream:!0})};var me=new Uint8Array(0);xe=function(){ke+=Oe.decode(me),console.log(ke),ke=""}}else{var Ee=[];Te=function(e){try{e=ge(e)}catch(r){var t=new Uint8Array(e.length);t.set(e),e=t}Ee.push(e)},xe=function(){console.log.apply(console.log,Ee),Ee=[]}}var Ue=function(e){var t=T(e);A(e,be("tostring",!0));for(var r=1;r<=t;r++){C(e,-1),C(e,r),v(e,1,1);var a=W(e,-1);if(null===a)return le(e,be("'tostring' must return a string to 'print'",!0));r>1&&Te(be("\t")),Te(a),y(e,1)}return xe(),0},Re=function(e){return ae(e,1),he(e,1),1},ye=function(e){return ae(e,1),b(e,1)?(ie(e,1,be("__metatable",!0)),1):(P(e),1)},Ne=function(e){var t=$(e,2);return oe(e,1,_),re(e,t===o||t===_,2,be("nil or table expected",!0)),ie(e,1,be("__metatable",!0))!==o?le(e,be("cannot change a protected metatable",!0)):(q(e,2),z(e,1),1)},Se=function(e){return ae(e,1),ae(e,2),N(e,V(e,1,2)),1},we=function(e){var t=$(e,1);return re(e,t===_||t===c,1,be("table or string expected",!0)),I(e,G(e,1)),1},Ie=function(e){return oe(e,1,_),ae(e,2),q(e,2),B(e,1),1},Me=function(e){return oe(e,1,_),ae(e,2),ae(e,3),q(e,3),K(e,1),1},Pe=["stop","restart","collect","count","step","setpause","setstepmul","isrunning"].map(function(e){return be(e)}),De=function(e){ue(e,1,be("collect"),Pe),pe(e,2,0),le(e,be("lua_gc not implemented"))},Ce=function(e){var t=$(e,1);return re(e,t!==l,1,be("value expected",!0)),D(e,ee(e,t)),1},Ve=function(e,t,r,a){return ae(e,1),ie(e,1,t)===o?(S(e,a),C(e,1),r?I(e,0):P(e)):(C(e,1),v(e,1,3)),3},Be=function(e){return oe(e,1,_),q(e,2),U(e,1)?2:(P(e),1)},Ge=function(e){return Ve(e,be("__pairs",!0),0,Be)},Ke=function(e){var t=ne(e,2)+1;return I(e,t),g(e,1,t)===o?1:2},je=function(e){return ae(e,1),S(e,Ke),C(e,1),I(e,0),3},Fe=function(e,t){try{e=ge(e)}catch(e){return null}var r=/^[\t\v\f \n\r]*([+-]?)0*([0-9A-Za-z]+)[\t\v\f \n\r]*$/.exec(e);if(!r)return null;var a=parseInt(r[1]+r[2],t);return isNaN(a)?null:0|a},He=function(e){if($(e,2)<=0){if(ae(e,1),$(e,1)===i)return q(e,1),1;var t=Q(e,1);if(null!==t&&J(e,t)===t.length+1)return 1}else{var r=ne(e,2);oe(e,1,c);var a=Q(e,1);re(e,2<=r&&r<=36,2,be("base out of range",!0));var n=Fe(a,r);if(null!==n)return I(e,n),1}return P(e),1},Xe=function(e){var t=pe(e,2,1);return q(e,1),$(e,1)===c&&t>0&&(Le(e,t),C(e,1),h(e,2)),L(e)},ze=function(e){return Z(e,1)?T(e):(ae(e,1),j(e,1),M(e,"assertion failed!"),q(e,1),Xe(e))},qe=function(e){var t=T(e);if($(e,1)===c&&35===Q(e,1)[0])return I(e,t-1),1;var r=ne(e,1);return r<0?r=t+r:r>t&&(r=t),re(e,1<=r,1,be("index out of range",!0)),t-r},Ye=function(e,t,r){return t!==u&&t!==p?(N(e,0),C(e,-2),2):T(e)-r},Je=function(e){ae(e,1),N(e,1),x(e,1);var t=R(e,T(e)-2,n,0,0,Ye);return Ye(e,t,0)},Ze=function(e){var t=T(e);oe(e,2,s),N(e,1),C(e,1),H(e,3,2);var r=R(e,t-2,n,2,2,Ye);return Ye(e,r,2)},We=function(e,t,r){return t===u?(0!==r&&(C(e,r),Y(e,-2,1)||y(e,1)),1):(P(e),x(e,-2),2)},Qe=function(e,t){return se(e,2,be("too many nested functions",!0)),C(e,1),v(e,0,1),k(e,-1)?(y(e,1),null):(m(e,-1)||le(e,be("reader function must return a string",!0)),F(e,5),Q(e,5))},$e=function(e){var t=Q(e,1),r=ve(e,3,be("bt",!0)),a=O(e,4)?0:4,n=void 0;if(null!==t){var u=ve(e,2,t);n=ce(e,t,t.length,u,r)}else{var o=ve(e,2,be("=(load)",!0));oe(e,1,s),q(e,5),n=E(e,Qe,null,o,r)}return We(e,n,a)},et=function(e){var t=ve(e,1,null),r=ve(e,2,null),a=O(e,3)?0:3,n=fe(e,t,r);return We(e,n,a)},tt=function(e,t,r){return T(e)-1},rt=function(e){var t=ve(e,1,null);return q(e,1),_e(e,t)!==u?L(e):(d(e,0,n,0,tt),tt(e))},at={assert:ze,collectgarbage:De,dofile:rt,error:Xe,getmetatable:ye,ipairs:je,load:$e,loadfile:et,next:Be,pairs:Ge,pcall:Je,print:Ue,rawequal:Se,rawget:Ie,rawlen:we,rawset:Me,select:qe,setmetatable:Ne,tonumber:He,tostring:Re,type:Ce,xpcall:Ze},nt=function(e){return w(e),de(e,at,0),C(e,-1),X(e,-2,be("_G",!0)),M(e,f),X(e,-2,be("_VERSION",!0)),1};e.exports.luaopen_base=nt},function(module,exports,__webpack_require__){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_require=__webpack_require__(19),lua=_require.lua,lauxlib=_require.lauxlib,lualib=_require.lualib,to_luastring=_require.to_luastring,LUA_MULTRET=lua.LUA_MULTRET,LUA_OK=lua.LUA_OK,LUA_REGISTRYINDEX=lua.LUA_REGISTRYINDEX,LUA_RIDX_MAINTHREAD=lua.LUA_RIDX_MAINTHREAD,LUA_TBOOLEAN=lua.LUA_TBOOLEAN,LUA_TFUNCTION=lua.LUA_TFUNCTION,LUA_TLIGHTUSERDATA=lua.LUA_TLIGHTUSERDATA,LUA_TNIL=lua.LUA_TNIL,LUA_TNONE=lua.LUA_TNONE,LUA_TNUMBER=lua.LUA_TNUMBER,LUA_TSTRING=lua.LUA_TSTRING,LUA_TTABLE=lua.LUA_TTABLE,LUA_TTHREAD=lua.LUA_TTHREAD,LUA_TUSERDATA=lua.LUA_TUSERDATA,lua_atnativeerror=lua.lua_atnativeerror,lua_getfield=lua.lua_getfield,lua_gettable=lua.lua_gettable,lua_gettop=lua.lua_gettop,lua_isnil=lua.lua_isnil,lua_isproxy=lua.lua_isproxy,lua_newuserdata=lua.lua_newuserdata,lua_pcall=lua.lua_pcall,lua_pop=lua.lua_pop,lua_pushboolean=lua.lua_pushboolean,lua_pushcfunction=lua.lua_pushcfunction,lua_pushlightuserdata=lua.lua_pushlightuserdata,lua_pushliteral=lua.lua_pushliteral,lua_pushnil=lua.lua_pushnil,lua_pushnumber=lua.lua_pushnumber,lua_pushstring=lua.lua_pushstring,lua_pushvalue=lua.lua_pushvalue,lua_rawgeti=lua.lua_rawgeti,lua_rawgetp=lua.lua_rawgetp,lua_rawsetp=lua.lua_rawsetp,lua_remove=lua.lua_remove,lua_rotate=lua.lua_rotate,lua_setfield=lua.lua_setfield,lua_settable=lua.lua_settable,lua_settop=lua.lua_settop,lua_toboolean=lua.lua_toboolean,lua_tojsstring=lua.lua_tojsstring,lua_tonumber=lua.lua_tonumber,lua_toproxy=lua.lua_toproxy,lua_tothread=lua.lua_tothread,lua_touserdata=lua.lua_touserdata,lua_type=lua.lua_type,luaL_argerror=lauxlib.luaL_argerror,luaL_checkany=lauxlib.luaL_checkany,luaL_checkoption=lauxlib.luaL_checkoption,luaL_checkstack=lauxlib.luaL_checkstack,luaL_checkudata=lauxlib.luaL_checkudata,luaL_error=lauxlib.luaL_error,luaL_getmetafield=lauxlib.luaL_getmetafield,luaL_newlib=lauxlib.luaL_newlib,luaL_newmetatable=lauxlib.luaL_newmetatable,luaL_requiref=lauxlib.luaL_requiref,luaL_setfuncs=lauxlib.luaL_setfuncs,luaL_setmetatable=lauxlib.luaL_setmetatable,luaL_testudata=lauxlib.luaL_testudata,luaL_tolstring=lauxlib.luaL_tolstring,luaopen_base=lualib.luaopen_base,custom_inspect_symbol=void 0,global_env=function(){return"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:eval("this")}(),apply=void 0,construct=void 0;if("undefined"!=typeof Reflect)apply=Reflect.apply,construct=Reflect.construct;else{var fApply=Function.apply,bind=Function.bind;apply=function(e,t,r){return fApply.call(e,t,r)},construct=function(e,t){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(bind.apply(e,r))}}var toString=function(e){return""+e},isobject=function(e){return"object"===(void 0===e?"undefined":_typeof(e))?null!==e:"function"==typeof e},js_tname=to_luastring("js object"),testjs=function(e,t){var r=luaL_testudata(e,t,js_tname);return r?r.data:void 0},checkjs=function(e,t){return luaL_checkudata(e,t,js_tname).data},pushjs=function(e,t){lua_newuserdata(e).data=t,luaL_setmetatable(e,js_tname)},getmainthread=function(e){lua_rawgeti(e,LUA_REGISTRYINDEX,LUA_RIDX_MAINTHREAD);var t=lua_tothread(e,-1);return lua_pop(e,1),t},states=new WeakMap,push=function(e,t){switch(void 0===t?"undefined":_typeof(t)){case"undefined":lua_pushnil(e);break;case"number":lua_pushnumber(e,t);break;case"string":lua_pushstring(e,to_luastring(t));break;case"boolean":lua_pushboolean(e,t);break;case"symbol":lua_pushlightuserdata(e,t);break;case"function":if(lua_isproxy(t,e)){t(e);break}case"object":if(null===t){if(lua_rawgetp(e,LUA_REGISTRYINDEX,null)!==LUA_TUSERDATA)throw Error("js library not loaded into lua_State");break}default:var r=states.get(getmainthread(e));if(!r)throw Error("js library not loaded into lua_State");var a=r.get(t);a?a(e):(pushjs(e,t),a=lua_toproxy(e,-1),r.set(t,a))}},atnativeerror=function(e){var t=lua_touserdata(e,1);return push(e,t),1},tojs=function(e,t){switch(lua_type(e,t)){case LUA_TNONE:case LUA_TNIL:return;case LUA_TBOOLEAN:return lua_toboolean(e,t);case LUA_TLIGHTUSERDATA:return lua_touserdata(e,t);case LUA_TNUMBER:return lua_tonumber(e,t);case LUA_TSTRING:return lua_tojsstring(e,t);case LUA_TUSERDATA:var r=testjs(e,t);if(void 0!==r)return r;case LUA_TTABLE:case LUA_TFUNCTION:case LUA_TTHREAD:default:return wrap(e,lua_toproxy(e,t))}},jscall=function(e,t){var r=lua_pcall(e,t,1,0),a=tojs(e,-1);switch(lua_pop(e,1),r){case LUA_OK:return a;default:throw a}},invoke=function(e,t,r,a,n){luaL_checkstack(e,2+a.length,null),void 0!==n&&null!==n||(n=LUA_MULTRET);var u=lua_gettop(e);t(e),push(e,r);for(var s=0;s<a.length;s++)push(e,a[s]);switch(lua_pcall(e,1+a.length,n,0)){case LUA_OK:for(var o=lua_gettop(e)-u,l=new Array(o),i=0;i<o;i++)l[i]=tojs(e,u+i+1);return lua_settop(e,u),l;default:var c=tojs(e,-1);throw lua_settop(e,u),c}},gettable=function(e){return lua_gettable(e,1),1},_get=function(e,t,r){return luaL_checkstack(e,3,null),lua_pushcfunction(e,gettable),t(e),push(e,r),jscall(e,2)},_has=function(e,t,r){switch(luaL_checkstack(e,3,null),lua_pushcfunction(e,gettable),t(e),push(e,r),lua_pcall(e,2,1,0)){case LUA_OK:var a=lua_isnil(e,-1);return lua_pop(e,1),!a;default:var n=tojs(e,-1);throw lua_pop(e,1),n}},_set=function(e,t,r,a){switch(luaL_checkstack(e,4,null),lua_pushcfunction(e,function(e){return lua_settable(e,1),0}),t(e),push(e,r),push(e,a),lua_pcall(e,3,0,0)){case LUA_OK:return;default:var n=tojs(e,-1);throw lua_pop(e,1),n}},_deleteProperty=function(e,t,r){switch(luaL_checkstack(e,4,null),lua_pushcfunction(e,function(e){return lua_settable(e,1),0}),t(e),push(e,r),lua_pushnil(e),lua_pcall(e,3,0,0)){case LUA_OK:return;default:var a=tojs(e,-1);throw lua_pop(e,1),a}},tostring=function(e,t){return luaL_checkstack(e,2,null),lua_pushcfunction(e,function(e){return luaL_tolstring(e,1),1}),t(e),jscall(e,1)},iter_next=function(){var e=this.L;luaL_checkstack(e,3,null);var t=lua_gettop(e);switch(this.iter(e),this.state(e),this.last(e),lua_pcall(e,2,LUA_MULTRET,0)){case LUA_OK:this.last=lua_toproxy(e,t+1);var r=void 0;if(lua_isnil(e,-1))r={done:!0,value:void 0};else{for(var a=lua_gettop(e)-t,n=new Array(a),u=0;u<a;u++)n[u]=tojs(e,t+u+1);r={done:!1,value:n}}return lua_settop(e,t),r;default:var s=tojs(e,-1);throw lua_pop(e,1),s}},jsiterator=function(e,t){switch(luaL_checkstack(this.L,2,null),luaL_requiref(e,to_luastring("_G"),luaopen_base,0),lua_getfield(e,-1,to_luastring("pairs")),lua_remove(e,-2),t(e),lua_pcall(e,1,3,0)){case LUA_OK:var r=lua_toproxy(e,-3),a=lua_toproxy(e,-2),n=lua_toproxy(e,-1);return lua_pop(e,3),{L:e,iter:r,state:a,last:n,next:iter_next};default:var u=tojs(e,-1);throw lua_pop(e,1),u}},wrap=function(e,t){var r=getmainthread(e),a=function(){return invoke(r,t,this,arguments,1)[0]};a.apply=function(e,a){return invoke(r,t,e,a,1)[0]},a.invoke=function(e,a){return invoke(r,t,e,a,LUA_MULTRET)},a.get=function(e){return _get(r,t,e)},a.has=function(e){return _has(r,t,e)},a.set=function(e,a){return _set(r,t,e,a)},a.delete=function(e){return _deleteProperty(r,t,e)},a.toString=function(){return tostring(r,t)},"function"==typeof Symbol&&(a[Symbol.toStringTag]="Fengari object",a[Symbol.iterator]=function(){return jsiterator(r,t)},Symbol.toPrimitive&&(a[Symbol.toPrimitive]=function(e){if("string"===e)return tostring(r,t)})),custom_inspect_symbol&&(a[custom_inspect_symbol]=a.toString);var n=states.get(r);if(!n)throw Error("js library not loaded into lua_State");return n.set(a,t),a},jslib={new:function(e){for(var t=tojs(e,1),r=lua_gettop(e)-1,a=new Array(r),n=0;n<r;n++)a[n]=tojs(e,n+2);return push(e,construct(t,a)),1},tonumber:function(e){var t=tojs(e,1);return lua_pushnumber(e,+t),1},instanceof:function(e){var t=tojs(e,1),r=tojs(e,2);return lua_pushboolean(e,t instanceof r),1},typeof:function e(t){var r=tojs(t,1);return lua_pushliteral(t,void 0===r?"undefined":e(r)),1}};if("function"==typeof Symbol&&Symbol.iterator){var get_iterator=function(e,t){var r=checkjs(e,t),a=r[Symbol.iterator];a||luaL_argerror(e,t,to_luastring("object not iterable"));var n=apply(a,r,[]);return isobject(n)||luaL_argerror(e,t,to_luastring("Result of the Symbol.iterator method is not an object")),n},next=function(e){var t=tojs(e,1),r=t.next();return r.done?0:(push(e,r.value),1)};jslib.of=function(e){var t=get_iterator(e,1);return lua_pushcfunction(e,next),push(e,t),2}}if("function"==typeof Proxy&&"function"==typeof Symbol){var L_symbol=Symbol("lua_State"),p_symbol=Symbol("fengari-proxy"),proxy_handlers={apply:function(e,t,r){return invoke(e[L_symbol],e[p_symbol],t,r,1)[0]},construct:function(e,t){var r=e[L_symbol],a=e[p_symbol],n=t.length;luaL_checkstack(r,2+n,null),a(r);var u=lua_gettop(r);if(luaL_getmetafield(r,u,to_luastring("construct"))===LUA_TNIL)throw lua_pop(r,1),new TypeError("not a constructor");lua_rotate(r,u,1);for(var s=0;s<n;s++)push(r,t[s]);return jscall(r,1+n)},defineProperty:function(e,t,r){var a=e[L_symbol],n=e[p_symbol];return luaL_checkstack(a,4,null),n(a),luaL_getmetafield(a,-1,to_luastring("defineProperty"))===LUA_TNIL?(lua_pop(a,1),!1):(lua_rotate(a,-2,1),push(a,t),push(a,r),jscall(a,3))},deleteProperty:function(e,t){return _deleteProperty(e[L_symbol],e[p_symbol],t)},get:function(e,t){return _get(e[L_symbol],e[p_symbol],t)},getOwnPropertyDescriptor:function(e,t){var r=e[L_symbol],a=e[p_symbol];return luaL_checkstack(r,3,null),a(r),luaL_getmetafield(r,-1,to_luastring("getOwnPropertyDescriptor"))===LUA_TNIL?void lua_pop(r,1):(lua_rotate(r,-2,1),push(r,t),jscall(r,2))},getPrototypeOf:function(e){var t=e[L_symbol],r=e[p_symbol];return luaL_checkstack(t,2,null),r(t),luaL_getmetafield(t,-1,to_luastring("getPrototypeOf"))===LUA_TNIL?(lua_pop(t,1),null):(lua_rotate(t,-2,1),jscall(t,1))},has:function(e,t){return _has(e[L_symbol],e[p_symbol],t)},ownKeys:function(e){var t=e[L_symbol],r=e[p_symbol];return luaL_checkstack(t,2,null),r(t),luaL_getmetafield(t,-1,to_luastring("ownKeys"))===LUA_TNIL?void lua_pop(t,1):(lua_rotate(t,-2,1),jscall(t,1))},set:function(e,t,r){return _set(e[L_symbol],e[p_symbol],t,r)},setPrototypeOf:function(e,t){var r=e[L_symbol],a=e[p_symbol];return luaL_checkstack(r,3,null),a(r),luaL_getmetafield(r,-1,to_luastring("setPrototypeOf"))===LUA_TNIL?(lua_pop(r,1),!1):(lua_rotate(r,-2,1),push(r,t),jscall(r,2))}},make_arrow_function=Function("return ()=>void 0;"),raw_function=function(){var e=make_arrow_function();return delete e.length,delete e.name,e},createproxy=function(e,t,r){var a=getmainthread(e),n=void 0;switch(r){case"function":n=raw_function();break;case"object":n={};break;default:throw TypeError("invalid type to createproxy")}return n[p_symbol]=t,n[L_symbol]=a,new Proxy(n,proxy_handlers)},valid_types=["function","object"],valid_types_as_luastring=valid_types.map(function(e){return to_luastring(e)});jslib.createproxy=function(e){luaL_checkany(e,1);var t=valid_types[luaL_checkoption(e,2,valid_types_as_luastring[0],valid_types_as_luastring)],r=createproxy(e,lua_toproxy(e,1),t);return push(e,r),1}}var jsmt={__index:function(e){var t=checkjs(e,1),r=tojs(e,2);return push(e,t[r]),1},__newindex:function(e){var t=checkjs(e,1),r=tojs(e,2),a=tojs(e,3);return void 0===a?delete t[r]:t[r]=a,0},__tostring:function(e){var t=checkjs(e,1),r=toString(t);return lua_pushstring(e,to_luastring(r)),1},__call:function(e){var t=checkjs(e,1),r=lua_gettop(e)-1,a=void 0,n=new Array(Math.max(0,r-1));if(r>0&&(a=tojs(e,2),r-- >0))for(var u=0;u<r;u++)n[u]=tojs(e,u+3);return push(e,apply(t,a,n)),1},__pairs:function(e){var t=checkjs(e,1),r=void 0;"function"==typeof Symbol&&void 0!==(r=t[Symbol.for("__pairs")])||luaL_argerror(e,1,to_luastring("js object has no __pairs Symbol"));var a=apply(r,t,[]);void 0===a&&luaL_error(e,to_luastring("bad '__pairs' result (object with keys 'iter', 'state', 'first' expected)"));var n=a.iter;return void 0===n&&luaL_error(e,to_luastring("bad '__pairs' result (object.iter is missing)")),lua_pushcfunction(e,function(){var t=tojs(e,1),r=tojs(e,2),a=n.call(t,r);if(void 0===a)return 0;Array.isArray(a)||luaL_error(e,to_luastring("bad iterator result (Array or undefined expected)")),luaL_checkstack(e,a.length,null);for(var u=0;u<a.length;u++)push(e,a[u]);return a.length}),push(e,a.state),push(e,a.first),3},__len:function(e){var t=checkjs(e,1),r=void 0;"function"==typeof Symbol&&void 0!==(r=t[Symbol.for("__len")])||luaL_argerror(e,1,to_luastring("js object has no __len Symbol"));var a=apply(r,t,[]);return push(e,a),1}};if("function"==typeof Symbol){Object.prototype[Symbol.for("__pairs")]=function(){return{iter:function(e){if(!(this.index>=this.keys.length)){var t=this.keys[this.index++];return[t,this.object[t]]}},state:{object:this,keys:Object.keys(this),index:0}}};var arraylikes=[Array,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];"undefined"!=typeof NodeList&&arraylikes.push(NodeList),"undefined"!=typeof DOMTokenList&&arraylikes.push(DOMTokenList);var __len=function(){return this.length};arraylikes.forEach(function(e){e.prototype[Symbol.for("__len")]=__len})}var luaopen_js=function(e){return states.set(getmainthread(e),new WeakMap),lua_atnativeerror(e,atnativeerror),luaL_newlib(e,jslib),luaL_newmetatable(e,js_tname),luaL_setfuncs(e,jsmt,0),lua_pop(e,1),pushjs(e,null),lua_pushvalue(e,-1),lua_rawsetp(e,LUA_REGISTRYINDEX,null),lua_setfield(e,-2,to_luastring("null")),push(e,global_env),lua_setfield(e,-2,to_luastring("global")),1};module.exports.checkjs=checkjs,module.exports.testjs=testjs,module.exports.pushjs=pushjs,module.exports.push=push,module.exports.tojs=tojs,module.exports.luaopen_js=luaopen_js}])});